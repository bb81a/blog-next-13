[
  {
    "title": "Classnames",
    "summary": "There is no need to import classnames from NPM - instead use this simple function.",
    "icon": "js",
    "date": "2022-12-31T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript",
      "CSS"
    ],
    "body": {
      "raw": "\n<CodeBlock>\n\n```JavaScript:cn.ts\nexport function cn(...classes: string[]) {\n  return classes.filter(Boolean).join(\" \");\n}\n```\n\n</CodeBlock>\n\n### Context\n\nThere is a highly used NPM package called [classnames](https://www.npmjs.com/package/classnames) - however I like to keep external dependencies low where possible and I like to know what my code is doing. There is no need to import classnames as you can duplicate the code with the simple function above. \n\n#### What does .filter(Boolean) do on Arrays?\n\nIn short, it's a bit of functional programming which is used to remove false, null and undefined values from an array.\n\n### Usage\n\n<CodeBlock>\n\n```JavaScript:cnExample.tsx\nimport { cn } from \"../lib/cn\";\n\nexport const Navbar = ({ fixed }: { fixed: boolean }) => {\n  return (\n    <nav className={cn(\"bg-white\", fixed ? \"fixed top-0 left-0 right-0\" : \"\")}>\n      Item\n    </nav>\n  );\n};\n```\n\n</CodeBlock>\n\n\n",
      "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var u=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var n in e)c(a,n,{get:e[n],enumerable:!0})},t=(a,e,n,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of p(e))!N.call(a,l)&&l!==n&&c(a,l,{get:()=>e[l],enumerable:!(r=m(e,l))||r.enumerable});return a};var g=(a,e,n)=>(n=a!=null?d(j(a)):{},t(e||!a||!a.__esModule?c(n,\"default\",{value:a,enumerable:!0}):n,a)),w=a=>t(c({},\"__esModule\",{value:!0}),a);var h=u((C,i)=>{i.exports=_jsx_runtime});var b={};f(b,{default:()=>k,frontmatter:()=>x});var s=g(h()),x={title:\"Classnames\",published:!0,date:\"2022-12-31\",summary:\"There is no need to import classnames from NPM - instead use this simple function.\",icon:\"js\",tags:[\"Javascript\",\"CSS\"]};function o(a){let e=Object.assign({div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",p:\"p\",a:\"a\",h4:\"h4\"},a.components),{CodeBlock:n}=e;return n||v(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cn.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"cn\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"...classes: string[]\"}),`) {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" classes.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"filter\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Boolean\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"join\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\" \"'}),`);\n}\n`]})})]}),`\n`,(0,s.jsx)(e.h3,{id:\"context\",children:\"Context\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"There is a highly used NPM package called \",(0,s.jsx)(e.a,{href:\"https://www.npmjs.com/package/classnames\",children:\"classnames\"}),\" - however I like to keep external dependencies low where possible and I like to know what my code is doing. There is no need to import classnames as you can duplicate the code with the simple function above.\"]}),`\n`,(0,s.jsx)(e.h4,{id:\"what-does-filterboolean-do-on-arrays\",children:\"What does .filter(Boolean) do on Arrays?\"}),`\n`,(0,s.jsx)(e.p,{children:\"In short, it's a bit of functional programming which is used to remove false, null and undefined values from an array.\"}),`\n`,(0,s.jsx)(e.h3,{id:\"usage\",children:\"Usage\"}),`\n`,(0,s.jsxs)(n,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cnExample.tsx\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { cn } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"../lib/cn\"'}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"Navbar\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"{ fixed }: { fixed: boolean }\"}),`) => {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,s.jsxs)(e.span,{className:\"xml\",children:[(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"nav\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{cn(\"}),'\"',(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"bg-white\"}),'\", ',(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"fixed\"}),' ? \"',(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"fixed\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"top-0\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"left-0\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"right-0\"}),'\" ',(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\":\"}),' \"\")}>']}),`\n      Item\n    `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"nav\"}),\">\"]})]}),`\n  );\n};\n`]})})]})]})}function y(a={}){let{wrapper:e}=a.components||{};return e?(0,s.jsx)(e,Object.assign({},a,{children:(0,s.jsx)(o,a)})):o(a)}var k=y;function v(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(b);})();\n;return Component;"
    },
    "_id": "snippets/classnames.mdx",
    "_raw": {
      "sourceFilePath": "snippets/classnames.mdx",
      "sourceFileName": "classnames.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/classnames"
    },
    "type": "Snippet",
    "slug": "/snippets/classnames",
    "slugAsParams": "classnames",
    "stats": {
      "text": "1 min read",
      "minutes": 0.66,
      "time": 39600,
      "words": 132
    }
  },
  {
    "title": "Debounce",
    "summary": "Debouncing is a strategy that lets us improve performance by waiting until a certain amount of time has passed before triggering an event.",
    "icon": "js",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\n<CodeBlock>\n\n```JavaScript:debounce.js\nconst debounce = (callback, wait) => {\n    let timeoutId = null;\n\n    return (...args) => {\n        window.clearTimeout(timeoutId);\n\n        timeoutId = window.setTimeout(() => {\n            callback.apply(null, args);\n        }, wait);\n    };\n\n};\n```\n\n</CodeBlock>\n\n### Context\n\nThere are many events in JS that trigger super quickly.\nWhen you scroll the page, or resize the window, or move your mouse, the browser captures dozens and dozens of events per second.\n\nIn many cases, you don't need to capture every single intermediate step; you're only interested in capturing the end state (when the user finishes scrolling, or finishes resizing the window).\nDebouncing is a strategy that lets us improve performance by waiting until a certain amount of time has passed before triggering an event. When the user stops triggering the event, our code will run.\n\nIn some cases, this isn't necessary. But, if any network requests are involved, or if the DOM changes (eg. re-rendering a component), this technique can drastically improve the smoothness of your application.\n\n#### Just use lodash?\n\n> For a long time, it was standard practice to include a utility library like Underscore or lodash. These libraries provide a bunch of handy general methods that fill in the gaps of the JavaScript standard library. They include a \\_.debounce function, that works just like the one shared above.\n>\n> As JS has gotten better and better over the years, these tools have become somewhat redundant. Aside from debouncing and throttling, pretty much everything else I'd want to do is now possible with vanilla JS!\n>\n> Now, you can install lodash and only use the debounce utility, but it'll make your bundle a bit heavier; the debounce utility weights ~2kb, even though the method is only a couple lines, because there's a minimum amount of \"utility glue\" that ships with all lodash utilities.\n>\n> 2kb isn't going to break your budget, but there's another benefit: you're reducing your reliance on third-party code. This debounce function is yours. It lives in your codebase, not in some node_modules folder, and you can modify it as-needed. Feel a sense of ownership over it. You won't have to worry about whether lodash will continue to be maintained.\n\n### Usage\n\n<CodeBlock>\n\n```JavaScript:debounceExample.js\nconst handleMouseMove = debounce((ev) => {\n  // Do stuff with the event!\n}, 250);\n\nwindow.addEventListener('mousemove', handleMouseMove);\n```\n\n</CodeBlock>\n\nIn this example, nothing will happen until the user starts moving the mouse, and then stops moving it for at least 250ms.\n\nNote that this example is focused on vanilla JS. If you're using React, you'll want to wrap your handler in useMemo, so that it doesn't get re-generated on every render. Here's an example that debounces the capturing of the mouse's X coordinate:\n\n<CodeBlock>\n\n```jsx:debounceExample.js\nfunction App() {\n    const [mouseX, setMouseX] = React.useState(null);\n\n    const handleMouseMove = React.useMemo(\n        debounce((ev) => {\n            setMouseX(ev.clientX);\n        }, 250),[]);\n\n    return (\n        <div onMouseMove={handleMouseMove}>\n            Mouse position: {mouseX}\n        </div>\n    );\n}\n```\n\n</CodeBlock>\n\nThis function isn't super easy to digest, especially if you're not used to functional programming! It's 100% OK to use this function without understanding it, but if you're curious, let's pop the hood and see if we can sort it out.\n\nHere's the code again:\n\n<CodeBlock>\n\n```jsx:debounceExample.js\nconst debounce = (callback, wait) => {\n    let timeoutId = null;\n\n    return (...args) => {\n        window.clearTimeout(timeoutId);\n\n        timeoutId = window.setTimeout(() => {\n            callback.apply(null, args);\n        }, wait);\n    };\n}\n```\n\n</CodeBlock>\n\nOur debounce function takes two arguments: a callback function and a duration in milliseconds.\nWe want the debounce function to itself return a function. Functions returning functions always hurts my brain, but it helps when we think about the practical aspects of how it's used:\n\n<CodeBlock>\n\n```jsx:debounceExample.js\nconst debouncedFunction = debounce(function() { ... }, 250)\n\nconsole.log(typeof debouncedFunction); // `function`\n```\n\n</CodeBlock>\n\nHere's how I like to think about it:\n\nYour initial function, the stuff you're actually trying to do, is a piece of hard candy.The debounce function is a piece of factory machinery that wraps that candy in a shiny plastic wrapperThe function that gets returned is your wrapped piece of candy. We've augmented that piece of candy with a wrapper.\n\nNotice that the first line in that function initializes a variable, \"timeoutId\". This line is only executed once. We plan to call our wrapped function many times, but we only call debounce() at the beginning.\n\nWhenever the wrapped function is triggered, two things happen:\n\n1. We cancel any pre-existing timeout\n2. We schedule a new timeout, based on the amount of time indicated by the wait argument. When the timeout expires, we call our callback function with apply, and feed it whatever arguments we have.\n\nThe very first time the user moves the mouse, that first step has no effect; nothing has been scheduled yet! Happily, window.clearTimeout is a very forgiving function; even if there is no timeout, it doesn't complain. It's a “no-op” — it does nothing.\n\nsetTimeout returns a number, a reference to the specific timeout in question. We store that in our timeoutId variable. Because this variable is held outside our wrapped function's scope, it persists.\n\nLet's say the user hasn't finished moving the mouse. A few milliseconds pass, and our wrapper is called again. This time around, timeoutId points to a currently-scheduled timeout, so the first line cancels it. And then we schedule a new one.\n\nIf the user moves the mouse for 1 second, this cycle will repeat dozens of times. Lots of scheduled-and-immediately-cancelled timeouts. But once they stop moving, the cycle stops. The moment 250ms elapses, our timeout fires back, and the code is ultimately run.\n\nThis is a complex sequence! But it works like a charm. Scheduling and cleaning up timeouts is a very quick, low-memory operation, so we don't have to worry much about its cost.\n",
      "code": "var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),y=(s,e)=>{for(var a in e)i(s,a,{get:e[a],enumerable:!0})},c=(s,e,a,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of p(e))!g.call(s,t)&&t!==a&&i(s,t,{get:()=>e[t],enumerable:!(l=u(e,t))||l.enumerable});return s};var b=(s,e,a)=>(a=s!=null?d(m(s)):{},c(e||!s||!s.__esModule?i(a,\"default\",{value:s,enumerable:!0}):a,s)),j=s=>c(i({},\"__esModule\",{value:!0}),s);var r=f((M,o)=>{o.exports=_jsx_runtime});var _={};y(_,{default:()=>v,frontmatter:()=>w});var n=b(r()),w={title:\"Debounce\",published:!0,date:\"2021-10-23\",summary:\"Debouncing is a strategy that lets us improve performance by waiting until a certain amount of time has passed before triggering an event.\",icon:\"js\",tags:[\"Javascript\"]};function h(s){let e=Object.assign({div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",p:\"p\",h4:\"h4\",blockquote:\"blockquote\",ol:\"ol\",li:\"li\"},s.components),{CodeBlock:a}=e;return a||k(\"CodeBlock\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a,{children:[(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"debounce.js\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"debounce\"}),\" = (\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"callback, wait\"}),`) => {\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"let\"}),\" timeoutId = \",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`;\n\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"...args\"}),\") =>\"]}),` {\n        `,(0,n.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"clearTimeout\"}),`(timeoutId);\n\n        timeoutId = `,(0,n.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n            callback.`,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"apply\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`, args);\n        }, wait);\n    };\n\n};\n`]})})]}),`\n`,(0,n.jsx)(e.h3,{id:\"context\",children:\"Context\"}),`\n`,(0,n.jsx)(e.p,{children:`There are many events in JS that trigger super quickly.\nWhen you scroll the page, or resize the window, or move your mouse, the browser captures dozens and dozens of events per second.`}),`\n`,(0,n.jsx)(e.p,{children:`In many cases, you don't need to capture every single intermediate step; you're only interested in capturing the end state (when the user finishes scrolling, or finishes resizing the window).\nDebouncing is a strategy that lets us improve performance by waiting until a certain amount of time has passed before triggering an event. When the user stops triggering the event, our code will run.`}),`\n`,(0,n.jsx)(e.p,{children:\"In some cases, this isn't necessary. But, if any network requests are involved, or if the DOM changes (eg. re-rendering a component), this technique can drastically improve the smoothness of your application.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"just-use-lodash\",children:\"Just use lodash?\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"For a long time, it was standard practice to include a utility library like Underscore or lodash. These libraries provide a bunch of handy general methods that fill in the gaps of the JavaScript standard library. They include a _.debounce function, that works just like the one shared above.\"}),`\n`,(0,n.jsx)(e.p,{children:\"As JS has gotten better and better over the years, these tools have become somewhat redundant. Aside from debouncing and throttling, pretty much everything else I'd want to do is now possible with vanilla JS!\"}),`\n`,(0,n.jsx)(e.p,{children:`Now, you can install lodash and only use the debounce utility, but it'll make your bundle a bit heavier; the debounce utility weights ~2kb, even though the method is only a couple lines, because there's a minimum amount of \"utility glue\" that ships with all lodash utilities.`}),`\n`,(0,n.jsx)(e.p,{children:\"2kb isn't going to break your budget, but there's another benefit: you're reducing your reliance on third-party code. This debounce function is yours. It lives in your codebase, not in some node_modules folder, and you can modify it as-needed. Feel a sense of ownership over it. You won't have to worry about whether lodash will continue to be maintained.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsxs)(a,{children:[(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"debounceExample.js\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" handleMouseMove = \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"debounce\"}),\"(\",(0,n.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"ev\"}),\") =>\"]}),` {\n  `,(0,n.jsx)(e.span,{className:\"hljs-comment\",children:\"// Do stuff with the event!\"}),`\n}, `,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"250\"}),`);\n\n`,(0,n.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"addEventListener\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'mousemove'\"}),`, handleMouseMove);\n`]})})]}),`\n`,(0,n.jsx)(e.p,{children:\"In this example, nothing will happen until the user starts moving the mouse, and then stops moving it for at least 250ms.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Note that this example is focused on vanilla JS. If you're using React, you'll want to wrap your handler in useMemo, so that it doesn't get re-generated on every render. Here's an example that debounces the capturing of the mouse's X coordinate:\"}),`\n`,(0,n.jsxs)(a,{children:[(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"debounceExample.js\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"App\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\"}),`) {\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" [mouseX, setMouseX] = \",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`);\n\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" handleMouseMove = \",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useMemo\"}),`(\n        `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"debounce\"}),\"(\",(0,n.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"ev\"}),\") =>\"]}),` {\n            `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"setMouseX\"}),\"(ev.\",(0,n.jsx)(e.span,{className:\"hljs-property\",children:\"clientX\"}),`);\n        }, `,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"250\"}),`),[]);\n\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n        `,(0,n.jsxs)(e.span,{className:\"xml\",children:[(0,n.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,n.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-attr\",children:\"onMouseMove\"}),\"=\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"{handleMouseMove}\"}),\">\"]}),`\n            Mouse position: {mouseX}\n        `,(0,n.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,n.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]})]}),`\n    );\n}\n`]})})]}),`\n`,(0,n.jsx)(e.p,{children:\"This function isn't super easy to digest, especially if you're not used to functional programming! It's 100% OK to use this function without understanding it, but if you're curious, let's pop the hood and see if we can sort it out.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Here's the code again:\"}),`\n`,(0,n.jsxs)(a,{children:[(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"debounceExample.js\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"debounce\"}),\" = (\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"callback, wait\"}),`) => {\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"let\"}),\" timeoutId = \",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`;\n\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"...args\"}),\") =>\"]}),` {\n        `,(0,n.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"clearTimeout\"}),`(timeoutId);\n\n        timeoutId = `,(0,n.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n            callback.`,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"apply\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`, args);\n        }, wait);\n    };\n}\n`]})})]}),`\n`,(0,n.jsx)(e.p,{children:`Our debounce function takes two arguments: a callback function and a duration in milliseconds.\nWe want the debounce function to itself return a function. Functions returning functions always hurts my brain, but it helps when we think about the practical aspects of how it's used:`}),`\n`,(0,n.jsxs)(a,{children:[(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"debounceExample.js\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" debouncedFunction = \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"debounce\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\"}),\") { ... }, \",(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"250\"}),`)\n\n`,(0,n.jsx)(e.span,{className:\"hljs-variable language_\",children:\"console\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"log\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"typeof\"}),\" debouncedFunction); \",(0,n.jsx)(e.span,{className:\"hljs-comment\",children:\"// `function`\"}),`\n`]})})]}),`\n`,(0,n.jsx)(e.p,{children:\"Here's how I like to think about it:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Your initial function, the stuff you're actually trying to do, is a piece of hard candy.The debounce function is a piece of factory machinery that wraps that candy in a shiny plastic wrapperThe function that gets returned is your wrapped piece of candy. We've augmented that piece of candy with a wrapper.\"}),`\n`,(0,n.jsx)(e.p,{children:'Notice that the first line in that function initializes a variable, \"timeoutId\". This line is only executed once. We plan to call our wrapped function many times, but we only call debounce() at the beginning.'}),`\n`,(0,n.jsx)(e.p,{children:\"Whenever the wrapped function is triggered, two things happen:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"We cancel any pre-existing timeout\"}),`\n`,(0,n.jsx)(e.li,{children:\"We schedule a new timeout, based on the amount of time indicated by the wait argument. When the timeout expires, we call our callback function with apply, and feed it whatever arguments we have.\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"The very first time the user moves the mouse, that first step has no effect; nothing has been scheduled yet! Happily, window.clearTimeout is a very forgiving function; even if there is no timeout, it doesn't complain. It's a \\u201Cno-op\\u201D \\u2014 it does nothing.\"}),`\n`,(0,n.jsx)(e.p,{children:\"setTimeout returns a number, a reference to the specific timeout in question. We store that in our timeoutId variable. Because this variable is held outside our wrapped function's scope, it persists.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Let's say the user hasn't finished moving the mouse. A few milliseconds pass, and our wrapper is called again. This time around, timeoutId points to a currently-scheduled timeout, so the first line cancels it. And then we schedule a new one.\"}),`\n`,(0,n.jsx)(e.p,{children:\"If the user moves the mouse for 1 second, this cycle will repeat dozens of times. Lots of scheduled-and-immediately-cancelled timeouts. But once they stop moving, the cycle stops. The moment 250ms elapses, our timeout fires back, and the code is ultimately run.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is a complex sequence! But it works like a charm. Scheduling and cleaning up timeouts is a very quick, low-memory operation, so we don't have to worry much about its cost.\"})]})}function N(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(h,s)})):h(s)}var v=N;function k(s,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j(_);})();\n;return Component;"
    },
    "_id": "snippets/debounce.mdx",
    "_raw": {
      "sourceFilePath": "snippets/debounce.mdx",
      "sourceFileName": "debounce.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/debounce"
    },
    "type": "Snippet",
    "slug": "/snippets/debounce",
    "slugAsParams": "debounce",
    "stats": {
      "text": "5 min read",
      "minutes": 4.76,
      "time": 285600,
      "words": 952
    }
  },
  {
    "title": "Easier Imports",
    "summary": "Import from folders like /components, /utils or /hooks from @/anywhere in your codebase.",
    "icon": "js",
    "date": "2023-06-10T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript",
      "Typescript"
    ],
    "body": {
      "raw": "\nLet's assume you have a folder structure like this in your project:\n\n<CodeBlock>\n\n```sh:cn.ts\nmy-app /\n── pages /\n│   ├── about.jsx\n│   ├── analytics.jsx\n│   ├── index.jsx\n── hooks /\n│   ├── useHasMounted.js\n│   ├── useIntersectionObserver.js\n│   ├── useMediaQuery.js\n│   ├── usePageView.js\n│   └── useViewCount.js\n├── lib /\n│   ├── constants.js\n│   ├── sortPosts.js\n│   └── utils.js\n```\n\n</CodeBlock>\n\nThis is how your imports will typically look:\n\n<CodeBlock>\n\n```JavaScript:cn.ts\nimport { SortByDate } from '../lib/sortPosts';\n```\n\n</CodeBlock>\n\nAnd it's gonna be even worse if you are importing in a file that is nested deeply.\n\n<CodeBlock>\n\n```JavaScript:cn.ts\nimport { SortByDate } from '../../../lib/sortPosts';\n```\n\n</CodeBlock>\n\nTo solve this, you can add a jsconfig.json (or tsconfig.json if you have a TypeScript project) and then add the following to it.\n\n<CodeBlock>\n\n```JavaScript:cn.ts\n{\n    \"baseUrl\": \".\",\n    \"paths\": {\n        \"@/*\": [\"./*\"]\n    }\n}\n```\n\n</CodeBlock>\n\nThis configuration will now essentially allow you to import folders like @/components, @/utils or @/hooks etc from anywhere in the codebase.\n\nNow your imports will look like this:\n\n<CodeBlock>\n\n```JavaScript:cn.ts\nimport { SortByDate } from '@/lib/sortPosts';\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var l in e)a(n,l,{get:e[l],enumerable:!0})},t=(n,e,l,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!u.call(n,r)&&r!==l&&a(n,r,{get:()=>e[r],enumerable:!(i=p(e,r))||i.enumerable});return n};var N=(n,e,l)=>(l=n!=null?h(j(n)):{},t(e||!n||!n.__esModule?a(l,\"default\",{value:n,enumerable:!0}):l,n)),f=n=>t(a({},\"__esModule\",{value:!0}),n);var c=y((S,o)=>{o.exports=_jsx_runtime});var x={};g(x,{default:()=>v,frontmatter:()=>w});var s=N(c()),w={title:\"Easier Imports\",published:!0,date:\"2023-06-10\",summary:\"Import from folders like /components, /utils or /hooks from @/anywhere in your codebase.\",icon:\"js\",tags:[\"Javascript\",\"Typescript\"]};function d(n){let e=Object.assign({p:\"p\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\"},n.components),{CodeBlock:l}=e;return l||b(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:\"Let's assume you have a folder structure like this in your project:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cn.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:\"hljs language-sh\",children:`my-app /\n\\u2500\\u2500 pages /\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 about.jsx\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 analytics.jsx\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 index.jsx\n\\u2500\\u2500 hooks /\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 useHasMounted.js\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 useIntersectionObserver.js\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 useMediaQuery.js\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 usePageView.js\n\\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 useViewCount.js\n\\u251C\\u2500\\u2500 lib /\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 constants.js\n\\u2502\\xA0\\xA0 \\u251C\\u2500\\u2500 sortPosts.js\n\\u2502\\xA0\\xA0 \\u2514\\u2500\\u2500 utils.js\n`})})]}),`\n`,(0,s.jsx)(e.p,{children:\"This is how your imports will typically look:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cn.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"SortByDate\"}),\" } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'../lib/sortPosts'\"}),`;\n`]})})]}),`\n`,(0,s.jsx)(e.p,{children:\"And it's gonna be even worse if you are importing in a file that is nested deeply.\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cn.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"SortByDate\"}),\" } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'../../../lib/sortPosts'\"}),`;\n`]})})]}),`\n`,(0,s.jsx)(e.p,{children:\"To solve this, you can add a jsconfig.json (or tsconfig.json if you have a TypeScript project) and then add the following to it.\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cn.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[`{\n    `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"baseUrl\"'}),\": \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\".\"'}),`,\n    `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"paths\"'}),`: {\n        `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"@/*\"'}),\": [\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"./*\"'}),`]\n    }\n}\n`]})})]}),`\n`,(0,s.jsx)(e.p,{children:\"This configuration will now essentially allow you to import folders like @/components, @/utils or @/hooks etc from anywhere in the codebase.\"}),`\n`,(0,s.jsx)(e.p,{children:\"Now your imports will look like this:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"cn.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"SortByDate\"}),\" } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'@/lib/sortPosts'\"}),`;\n`]})})]})]})}function k(n={}){let{wrapper:e}=n.components||{};return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(d,n)})):d(n)}var v=k;function b(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f(x);})();\n;return Component;"
    },
    "_id": "snippets/easier-imports.mdx",
    "_raw": {
      "sourceFilePath": "snippets/easier-imports.mdx",
      "sourceFileName": "easier-imports.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/easier-imports"
    },
    "type": "Snippet",
    "slug": "/snippets/easier-imports",
    "slugAsParams": "easier-imports",
    "stats": {
      "text": "1 min read",
      "minutes": 0.895,
      "time": 53700,
      "words": 179
    }
  },
  {
    "title": "Embed a Tweet in .mdx",
    "summary": "Sometimes you just want to add a Tweet to a post. Should be simple, right? With .mdx you have some different choices that are worth considering.",
    "icon": "mdx",
    "date": "2022-02-07T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript",
      "React Component"
    ],
    "body": {
      "raw": "\nSo, you are using Next.js with .mdx to render static pages and you want to embed a Tweet? What if you simply paste in Twitter's \"embed code\" - all done? You can also use the Tweet component from mdx-embed, which is a React component that you can use in your .mdx files. Or, you can roll you own for an even better solution.\n\nLet's explore the options.\n\n<Step number={1} title=\"Simply paste the twitter embed code\" />\n\nIf you simply paste the twitter embed code into your .mdx file, you will get a Tweet. It may not look great, and it will throw errors. Let's fix that.\n\nSince .mdx is a combination of Markdown and JSX we have to follow JSX standards for embedded HTML. So the \"class\" attribute needs to be changed to \"className\". Then \"charset\" needs to be changed to \"charSet\". Then you you need to make sure no browser add-ins are blocking social media trackers, otherwise you will get errors. You also need to make sure your CSP policy allows the Twitter script(s) and other content to be loaded.\n\nUnfortunately, When it works I still see console warnings:\n\n- \"Warning: Did not expect server HTML to contain a &lt;div&gt; in &lt;div&gt;.\"\n- \"Warning: validateDOMNesting(...): &lt;a&gt; cannot appear as a descendant of &lt;a&gt;.\"\n\nIn any case, here it is:\n\n<blockquote class=\"twitter-tweet\">\n  <p lang=\"en\" dir=\"ltr\">\n    Boom! 💥 just finished my first{' '}\n    <a href=\"https://twitter.com/GatsbyJS?ref_src=twsrc%5Etfw\">@gatsbyjs</a>{' '}\n    theme! <br />\n    <br />\n    Introducing... Gatsby Theme GatStats.\n    <br />\n    <br />\n    If you&#39;d like <a href=\"https://twitter.com/hashtag/dataviz?src=hash&amp;ref_src=twsrc%5Etfw\">\n      #dataviz\n    </a> for your <a href=\"https://twitter.com/hashtag/tech?src=hash&amp;ref_src=twsrc%5Etfw\">\n      #tech\n    </a> blog have a look 👀\n    <br />\n    <br />\n    👉 <a href=\"https://t.co/viyC822cqI\">https://t.co/viyC822cqI</a>{' '}\n    <a href=\"https://t.co/98tohJkO8W\">pic.twitter.com/98tohJkO8W</a>\n  </p>\n  &mdash; Paul Scanlon (@PaulieScanlon){' '}\n  <a href=\"https://twitter.com/PaulieScanlon/status/1201514996838141952?ref_src=twsrc%5Etfw\">\n    December 2, 2019\n  </a>\n</blockquote> <script\n  async\n  src=\"https://platform.twitter.com/widgets.js\"\n  charset=\"utf-8\"\n></script>\n\nIf that works for you then you are done. However, With Core Web Vitals becoming one of the biggest factors in search ranking using the classic Twitter embed iframe is not the best solution; it is slow to load and triggers Content Layout Shift (CLS) which hurts your Core Web Vitals score.\n\nThe \"just paste in the embed code\" approach didn't work as well as I hoped. It did not work consistently, it was slow, and I could not figure out how to make it work with Next.js dark mode dynamically.\n\n<Step number={2} title=\"Use a React component in .mdx\" />\n\nEnter [MDX Embed](https://www.mdx-embed.com/?path=/docs/introduction--page) which also gives you the capability of adding **lots** of different embeds in addition to Twitter. It's pretty awesome.\n\nYou just import the pre-built component you need and then use it in your .mdx file. The Tweet component also supports light and dark themes. Here is an example of the dark theme:\n\n<CodeBlock>\n\n```js:example.mdx\nimport { Tweet } from '../node_modules/mdx-embed/dist/components/twitter/tweet';\n\n<Tweet tweetLink=\"PaulieScanlon/status/1201514996838141952\" theme=\"dark\" />\n```\n\n</CodeBlock>\n\nThis seems to work more consistently, and if you don't have light _and_ dark modes it's great. I could not figure out how to change the Tweet's light/dark themes dynamically, and I still had to deal with content layout shift. Hmm... what to do? Would there be a way to get the Tweet and pre-render it to eliminate CLS and make my page load faster?\n\n<Step number={3} title=\"Roll your own custom React tweet component and API\" />\n\nIf you are a \"full control\" kind of person read on. First, let's check out what Lee Robinson, Director of Developer Relations at Vercel, does on his personal blog. He has a Tweets page that is really fast [here](https://leerob.io/tweets). His secret is pre-rendering the tweets and then embedding them in the page. Wait, what!?\n\nHe explains all here:\n\n<YouTube link=\"https://youtu.be/xZ9OzPQORtw\" />\n\nThere is one big drawback to using the approach Lee used - all your tweets need to be \"known\" ahead of time to be pre-rendered. Imagine you have a CMS and people are creating content in the CMS using Markdown/MDX and they wish to add embedded YouTube videos, Tweets, etc. to their posts. You can't really use the same approach as Lee did. Maxime Heckel figured out a way and documented it on [his blog](https://blog.maximeheckel.com/posts/static-tweets-with-mdx-nextjs/). It seemed promising, but did seem a bit \"hacky\" to implement.\n\n### My Plan\n\nI decided to try a middle ground. I will create a component that renders itself on page load - it's **much** faster and works consistently. However I still have CLS to contend with.\n\n1. Since MDX files can use/import React components let's use a custom component. To make this work we need a `<CustomTweet>` component that will be rendered in the browser. This component will accept the Tweet id as a prop, go get the tweet, and then render it. Like this: `<CustomTweet id=\"abcdef123\"/>`\n2. Let's create a custom Next.js API to fetch the tweet. For the component above to retrieve a tweet we can re-use Lee's code and turn it into an API. This will return the Tweet data in JSON format.\n3. Finally we will use a tailwind styled component to render the tweet. I want this component to render a beautiful Tweet, with dynamic light/dark modes. In this case it's our `<Tweet>` component. This is also based off Lee's code.\n\nLet me show you the results first. Here is my version:\n\n<CustomTweet id=\"531834493922189313\" />\n\n### The Code\n\nThe first thing we want to do is create our own custom Tweet API. We will leverage Twitter's v2 REST API and return the Tweet in JSON format based on the Tweet ID. This is directly based on Lee Robinson's code. Here's more info: [Twitter API v2 REST API](https://developer.twitter.com/en/docs/twitter-api/tweets/lookup/quick-start).\n\n<CodeBlock>\n\n```js:/api/tweet/[tweetID].js\nexport default async function handler(req, res) {\n  const { tweetID } = req.query;\n\n  if (!tweetID) {\n    return res.status(400).json({\n      error: 'Please provide a Tweet ID',\n    });\n  }\n\n  // METHOD SWITCH\n  switch (req.method) {\n    case 'GET':\n      return getTweet(tweetID);\n    default:\n      return res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n\n  // GET\n  async function getTweet(tweetID) {\n    const queryParams = new URLSearchParams({\n      ids: [tweetID], // comma separated list of tweet IDs, we use just one here\n      expansions:\n        'author_id,attachments.media_keys,referenced_tweets.id,referenced_tweets.id.author_id',\n      'tweet.fields':\n        'attachments,author_id,public_metrics,created_at,id,in_reply_to_user_id,referenced_tweets,text',\n      'user.fields': 'id,name,profile_image_url,protected,url,username,verified',\n      'media.fields':\n        'duration_ms,height,media_key,preview_image_url,type,url,width,public_metrics',\n    });\n\n    let tweets = {};\n    try {\n      tweets = await fetch(`https://api.twitter.com/2/tweets?${queryParams}`, {\n        headers: {\n          Authorization: `Bearer ${process.env.TWITTER_BEARER_TOKEN}`,\n        },\n      }).then((res) => res.json());\n    } catch (err) {\n      return res.status(400).json(err);\n    }\n\n    const getAuthorInfo = (author_id) => {\n      return tweets.includes.users.find((user) => user.id === author_id);\n    };\n\n    const getReferencedTweets = (mainTweet) => {\n      return (\n        mainTweet?.referenced_tweets?.map((referencedTweet) => {\n          const fullReferencedTweet = tweets.includes.tweets.find(\n            (tweet) => tweet.id === referencedTweet.id\n          );\n\n          return {\n            type: referencedTweet.type,\n            author: getAuthorInfo(fullReferencedTweet.author_id),\n            ...fullReferencedTweet,\n          };\n        }) || []\n      );\n    };\n\n    return tweets.data.reduce((allTweets, tweet) => {\n      const tweetWithAuthor = {\n        ...tweet,\n        media:\n          tweet?.attachments?.media_keys.map((key) =>\n            tweets.includes.media.find((media) => media.media_key === key)\n          ) || [],\n        referenced_tweets: getReferencedTweets(tweet),\n        author: getAuthorInfo(tweet.author_id),\n      };\n      return res.status(200).json(tweetWithAuthor, ...allTweets);\n    }, []);\n  }\n}\n```\n\n</CodeBlock>\n\nThe next thing we want to do is create our own custom Tweet MDX Component. It will call our API and render a Tweet. It's a pretty basic component. This is what we will to pass or import into our .mdx file:\n\n<CodeBlock>\n\n```jsx:CustomTweet.jsx\nimport { useState, useEffect } from 'react';\nimport { BASE_URL } from '../../lib/constants';\nimport { Tweet } from '../Tweet';\n\nexport const CustomTweet = ({ id }) => {y developer\n  let [tweet, setTweet] = useState(null);\n  const URL =\n    process.env.NODE_ENV === 'development'\n      ? `http://localhost:3000/api/tweet/${id}`\n      : `${BASE_URL}/api/tweet/${id}`;\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const data = await fetch(URL).then((res) => res.json());\n      setTweet(data);\n    };\n\n    fetchData();\n  }, [URL]);\n\n  return (\n    <>\n      {tweet && (\n        <div className='md:w-4/5'>\n          <Tweet tweet={tweet} />\n        </div>\n      )}\n    </>\n  );\n};\n```\n\n</CodeBlock>\n\nAnd finally here is the Tweet component. It will take the tweet object and render it. Again, thanks to Lee Robinson's code. However, I've tweaked it a bit to improve the avatar and text styling to make it look a smidge better. Dynamic dark mode for the win! Unfortunately, this approach is super easy to use but doesn't pre-render the tweet so there is still content layout shift.\n\n<CodeBlock>\n\n```jsx:Tweet.jsx\nimport Image from 'next/image';\nimport { format } from 'date-fns';\n\n/**\n * Supports plain text, images, and quote tweets.\n * Styles use !important to override Tailwind .prose inside MDX.\n * Inspiration: https://github.com/leerob/leerob.io/blob/main/lib/twitter.ts\n */\n\nexport const Tweet = ({ tweet }) => {\n  const { text, id, author, media, created_at, public_metrics, referenced_tweets } = tweet;\n  const createdAt = new Date(created_at);\n  const image = author.profile_image_url.replace('_normal', '_200x200'); // higher res\n\n  // construct our tweet URLs to use later\n  const authorUrl = `https://twitter.com/${author.username}`;\n  const likeUrl = `https://twitter.com/intent/like?tweet_id=${id}`;\n  const retweetUrl = `https://twitter.com/intent/retweet?tweet_id=${id}`;\n  const replyUrl = `https://twitter.com/intent/tweet?in_reply_to=${id}`;\n  const tweetUrl = `https://twitter.com/${author.username}/status/${id}`;\n\n  // make embedded URLs clickable\n  const URLify = (string) => {\n    const urls = string.match(/((((https?):\\/\\/)|(w{3}\\.))[\\-\\w@:%_\\+.~#?,&\\/\\/=]+)/g);\n\n    if (urls) {\n      urls.forEach(function (url) {\n        string = string.replace(url, '<a target=\"_blank\" href=\"' + url + '\">' + url + '</a>');\n      });\n    }\n\n    return string;\n  };\n\n  const urlified = URLify(text);\n\n  // make hashtags blue\n  const highlightHashTags = (string) => {\n    const tags = string.match(/(#+[a-zA-Z0-9(_)]{1,})/g);\n\n    if (tags) {\n      tags.forEach(function (tag) {\n        string = string.replace(\n          tag,\n          '<span class=\"text-blue-600 dark:text-blue-300\">' + tag + '</span>'\n        );\n      });\n    }\n\n    return string;\n  };\n\n  const tagified = highlightHashTags(urlified);\n\n  // make @names blue\n  const highlightNames = (string) => {\n    const names = string.match(/(@+[a-zA-Z0-9(_)]{1,})/g);\n\n    if (names) {\n      names.forEach(function (tag) {\n        string = string.replace(\n          tag,\n          '<span class=\"text-blue-600 dark:text-blue-300\">' + tag + '</span>'\n        );\n      });\n    }\n\n    return string;\n  };\n\n  const namified = highlightNames(tagified);\n\n  const quoteTweet = referenced_tweets && referenced_tweets.find((t) => t.type === 'quoted');\n\n  return (\n    <div className='w-full p-4 my-4 border border-gray-300 border-1 rounded-xl tweet dark:border-gray-700'>\n      <div className='flex'>\n        <a className='flex w-12 h-12' href={authorUrl} target='_blank' rel='noopener noreferrer'>\n          <Image\n            alt={author.username}\n            height={48}\n            width={48}\n            src={image}\n            className='rounded-full'\n          />\n        </a>\n        <a\n          href={authorUrl}\n          target='_blank'\n          rel='noopener noreferrer'\n          className='author flex flex-col ml-2 !no-underline text-base'\n        >\n          <span\n            className='flex items-center font-bold !text-gray-900 dark:!text-gray-100 leading-5'\n            title={author.name}\n          >\n            {author.name}\n            {author.verified ? (\n              <svg\n                aria-label='Verified Account'\n                className='inline w-5 h-5 ml-1 text-[#1d9bf0]'\n                viewBox='0 0 24 24'\n              >\n                <g fill='currentColor'>\n                  <path d='M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z' />\n                </g>\n              </svg>\n            ) : null}\n          </span>\n          <span className='!text-gray-500' title={`@${author.username}`}>\n            @{author.username}\n          </span>\n        </a>\n        <a className='ml-auto' href={authorUrl} target='_blank' rel='noopener noreferrer'>\n          <svg\n            aria-label='Twitter Logo'\n            className='w-6 h-6 text-[#1d9bf0]'\n            viewBox='328 355 335 276'\n            xmlns='http://www.w3.org/2000/svg'\n          >\n            <g fill='currentColor'>\n              <path d='M630 425a195 195 0 0 1-299 175 142 142 0 0 0 97-30 70 70 0 0 1-58-47 70 70 0 0 0 31-2 70 70 0 0 1-57-66 70 70 0 0 0 28 5 70 70 0 0 1-18-90 195 195 0 0 0 141 72 67 67 0 0 1 116-62 117 117 0 0 0 43-17 65 65 0 0 1-31 38 117 117 0 0 0 39-11 65 65 0 0 1-32 35Z' />\n            </g>\n          </svg>\n        </a>\n      </div>\n      <div\n        className='mt-4 mb-1 text-xl whitespace-pre-wrap !text-gray-700 dark:!text-gray-300'\n        dangerouslySetInnerHTML={{ __html: namified }}\n      />\n      {media && media.length ? (\n        <div\n          className={\n            media.length === 1\n              ? 'inline-grid grid-cols-1 gap-x-2 gap-y-2 my-2'\n              : 'inline-grid grid-cols-2 gap-x-2 gap-y-2 my-2'\n          }\n        >\n          {media.map((m) => (\n            <Image\n              key={m.media_key}\n              alt={text}\n              height={m.height}\n              width={m.width}\n              src={m.url}\n              className='rounded'\n            />\n          ))}\n        </div>\n      ) : null}\n      {quoteTweet ? <Tweet {...quoteTweet} /> : null}\n      <a\n        className='!text-gray-500 text-sm hover:!underline'\n        href={tweetUrl}\n        target='_blank'\n        rel='noopener noreferrer'\n      >\n        <time title={`Time Posted: ${createdAt.toUTCString()}`} dateTime={createdAt.toISOString()}>\n          {format(createdAt, 'h:mm a - MMM d, y')}\n        </time>\n      </a>\n      <hr className='!mt-2 !mb-2' />\n      <div className='flex !text-gray-700 !text-sm dark:!text-gray-300 mt-2'>\n        <a\n          className='flex items-center mr-4 !text-gray-500 hover:!text-blue-600 transition hover:!underline'\n          href={likeUrl}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          <svg className='mr-2' width='20' height='20' viewBox='0 0 24 24'>\n            <path\n              className='fill-current'\n              d='M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.813-1.148 2.353-2.73 4.644-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.375-7.454 13.11-10.037 13.156H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.035 11.596 8.55 11.658 1.52-.062 8.55-5.917 8.55-11.658 0-2.267-1.822-4.255-3.902-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.015-.03-1.426-2.965-3.955-2.965z'\n            />\n          </svg>\n          <span>{new Number(public_metrics.like_count).toLocaleString()}</span>\n        </a>\n        <a\n          className='flex items-center mr-4 !text-gray-500 hover:!text-blue-600 transition hover:!underline'\n          href={replyUrl}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          <svg className='mr-2' width='20' height='20' viewBox='0 0 24 24'>\n            <path\n              className='fill-current'\n              d='M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.045.286.12.403.143.225.385.347.633.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.368-3.43-7.788-7.8-7.79zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.334-.75-.75-.75h-.395c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z'\n            />\n          </svg>\n          <span>{new Number(public_metrics.reply_count).toLocaleString()}</span>\n        </a>\n        <a\n          className='flex items-center mr-4 !text-gray-500 hover:!text-blue-600 transition hover:!underline'\n          href={retweetUrl}\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          <svg className='mr-2' width='20' height='20' viewBox='0 0 24 24'>\n            <path\n              className='fill-current'\n              d='M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z'\n            />\n          </svg>\n          <span>{new Number(public_metrics.retweet_count).toLocaleString()}</span>\n        </a>\n      </div>\n    </div>\n  );\n};\n\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var o=Object.create;var r=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var w=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var n in e)r(a,n,{get:e[n],enumerable:!0})},i=(a,e,n,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of j(e))!u.call(a,t)&&t!==n&&r(a,t,{get:()=>e[t],enumerable:!(l=N(e,t))||l.enumerable});return a};var y=(a,e,n)=>(n=a!=null?o(g(a)):{},i(e||!a||!a.__esModule?r(n,\"default\",{value:a,enumerable:!0}):n,a)),k=a=>i(r({},\"__esModule\",{value:!0}),a);var m=w((I,d)=>{d.exports=_jsx_runtime});var T={};f(T,{default:()=>x,frontmatter:()=>b});var s=y(m()),b={title:\"Embed a Tweet in .mdx\",published:!0,date:\"2022-02-07\",summary:\"Sometimes you just want to add a Tweet to a post. Should be simple, right? With .mdx you have some different choices that are worth considering.\",icon:\"mdx\",tags:[\"Javascript\",\"React Component\"]};function p(a){let e=Object.assign({p:\"p\",ul:\"ul\",li:\"li\",a:\"a\",strong:\"strong\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",em:\"em\",h3:\"h3\",ol:\"ol\"},a.components),{Step:n,CodeBlock:l,YouTube:t,CustomTweet:h}=e;return l||c(\"CodeBlock\",!0),h||c(\"CustomTweet\",!0),n||c(\"Step\",!0),t||c(\"YouTube\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:`So, you are using Next.js with .mdx to render static pages and you want to embed a Tweet? What if you simply paste in Twitter's \"embed code\" - all done? You can also use the Tweet component from mdx-embed, which is a React component that you can use in your .mdx files. Or, you can roll you own for an even better solution.`}),`\n`,(0,s.jsx)(e.p,{children:\"Let's explore the options.\"}),`\n`,(0,s.jsx)(n,{number:1,title:\"Simply paste the twitter embed code\"}),`\n`,(0,s.jsx)(e.p,{children:\"If you simply paste the twitter embed code into your .mdx file, you will get a Tweet. It may not look great, and it will throw errors. Let's fix that.\"}),`\n`,(0,s.jsx)(e.p,{children:'Since .mdx is a combination of Markdown and JSX we have to follow JSX standards for embedded HTML. So the \"class\" attribute needs to be changed to \"className\". Then \"charset\" needs to be changed to \"charSet\". Then you you need to make sure no browser add-ins are blocking social media trackers, otherwise you will get errors. You also need to make sure your CSP policy allows the Twitter script(s) and other content to be loaded.'}),`\n`,(0,s.jsx)(e.p,{children:\"Unfortunately, When it works I still see console warnings:\"}),`\n`,(0,s.jsxs)(e.ul,{children:[`\n`,(0,s.jsx)(e.li,{children:'\"Warning: Did not expect server HTML to contain a <div> in <div>.\"'}),`\n`,(0,s.jsx)(e.li,{children:'\"Warning: validateDOMNesting(...): <a> cannot appear as a descendant of <a>.\"'}),`\n`]}),`\n`,(0,s.jsx)(e.p,{children:\"In any case, here it is:\"}),`\n`,(0,s.jsxs)(\"blockquote\",{class:\"twitter-tweet\",children:[(0,s.jsxs)(\"p\",{lang:\"en\",dir:\"ltr\",children:[(0,s.jsxs)(e.p,{children:[\"Boom! \\u{1F4A5} just finished my first\",\" \",`\n`,(0,s.jsx)(\"a\",{href:\"https://twitter.com/GatsbyJS?ref_src=twsrc%5Etfw\",children:\"@gatsbyjs\"}),\" \",`\ntheme! `,(0,s.jsx)(\"br\",{})]}),(0,s.jsx)(\"br\",{}),(0,s.jsx)(e.p,{children:\"Introducing... Gatsby Theme GatStats.\"}),(0,s.jsx)(\"br\",{}),(0,s.jsx)(\"br\",{}),(0,s.jsxs)(e.p,{children:[\"If you'd like \",(0,s.jsx)(\"a\",{href:\"https://twitter.com/hashtag/dataviz?src=hash&ref_src=twsrc%5Etfw\",children:`\n#dataviz\n`}),\" for your \",(0,s.jsx)(\"a\",{href:\"https://twitter.com/hashtag/tech?src=hash&ref_src=twsrc%5Etfw\",children:`\n#tech\n`}),\" blog have a look \\u{1F440}\"]}),(0,s.jsx)(\"br\",{}),(0,s.jsx)(\"br\",{}),(0,s.jsxs)(e.p,{children:[\"\\u{1F449} \",(0,s.jsx)(\"a\",{href:\"https://t.co/viyC822cqI\",children:(0,s.jsx)(e.a,{href:\"https://t.co/viyC822cqI\",children:\"https://t.co/viyC822cqI\"})}),\" \",`\n`,(0,s.jsx)(\"a\",{href:\"https://t.co/98tohJkO8W\",children:\"pic.twitter.com/98tohJkO8W\"})]})]}),(0,s.jsxs)(e.p,{children:[\"\\u2014 Paul Scanlon (@PaulieScanlon)\",\" \"]}),(0,s.jsx)(\"a\",{href:\"https://twitter.com/PaulieScanlon/status/1201514996838141952?ref_src=twsrc%5Etfw\",children:(0,s.jsx)(e.p,{children:\"December 2, 2019\"})})]}),`\n`,(0,s.jsx)(\"script\",{async:!0,src:\"https://platform.twitter.com/widgets.js\",charset:\"utf-8\"}),`\n`,(0,s.jsx)(e.p,{children:\"If that works for you then you are done. However, With Core Web Vitals becoming one of the biggest factors in search ranking using the classic Twitter embed iframe is not the best solution; it is slow to load and triggers Content Layout Shift (CLS) which hurts your Core Web Vitals score.\"}),`\n`,(0,s.jsx)(e.p,{children:`The \"just paste in the embed code\" approach didn't work as well as I hoped. It did not work consistently, it was slow, and I could not figure out how to make it work with Next.js dark mode dynamically.`}),`\n`,(0,s.jsx)(n,{number:2,title:\"Use a React component in .mdx\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"Enter \",(0,s.jsx)(e.a,{href:\"https://www.mdx-embed.com/?path=/docs/introduction--page\",children:\"MDX Embed\"}),\" which also gives you the capability of adding \",(0,s.jsx)(e.strong,{children:\"lots\"}),\" of different embeds in addition to Twitter. It's pretty awesome.\"]}),`\n`,(0,s.jsx)(e.p,{children:\"You just import the pre-built component you need and then use it in your .mdx file. The Tweet component also supports light and dark themes. Here is an example of the dark theme:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"example.mdx\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Tweet\"}),\" } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'../node_modules/mdx-embed/dist/components/twitter/tweet'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"xml\",children:(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"Tweet\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"tweetLink\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"PaulieScanlon/status/1201514996838141952\"'}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"theme\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"dark\"'}),\" />\"]})}),`\n`]})})]}),`\n`,(0,s.jsxs)(e.p,{children:[\"This seems to work more consistently, and if you don't have light \",(0,s.jsx)(e.em,{children:\"and\"}),\" dark modes it's great. I could not figure out how to change the Tweet's light/dark themes dynamically, and I still had to deal with content layout shift. Hmm... what to do? Would there be a way to get the Tweet and pre-render it to eliminate CLS and make my page load faster?\"]}),`\n`,(0,s.jsx)(n,{number:3,title:\"Roll your own custom React tweet component and API\"}),`\n`,(0,s.jsxs)(e.p,{children:[`If you are a \"full control\" kind of person read on. First, let's check out what Lee Robinson, Director of Developer Relations at Vercel, does on his personal blog. He has a Tweets page that is really fast `,(0,s.jsx)(e.a,{href:\"https://leerob.io/tweets\",children:\"here\"}),\". His secret is pre-rendering the tweets and then embedding them in the page. Wait, what!?\"]}),`\n`,(0,s.jsx)(e.p,{children:\"He explains all here:\"}),`\n`,(0,s.jsx)(t,{link:\"https://youtu.be/xZ9OzPQORtw\"}),`\n`,(0,s.jsxs)(e.p,{children:[`There is one big drawback to using the approach Lee used - all your tweets need to be \"known\" ahead of time to be pre-rendered. Imagine you have a CMS and people are creating content in the CMS using Markdown/MDX and they wish to add embedded YouTube videos, Tweets, etc. to their posts. You can't really use the same approach as Lee did. Maxime Heckel figured out a way and documented it on `,(0,s.jsx)(e.a,{href:\"https://blog.maximeheckel.com/posts/static-tweets-with-mdx-nextjs/\",children:\"his blog\"}),'. It seemed promising, but did seem a bit \"hacky\" to implement.']}),`\n`,(0,s.jsx)(e.h3,{id:\"my-plan\",children:\"My Plan\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"I decided to try a middle ground. I will create a component that renders itself on page load - it's \",(0,s.jsx)(e.strong,{children:\"much\"}),\" faster and works consistently. However I still have CLS to contend with.\"]}),`\n`,(0,s.jsxs)(e.ol,{children:[`\n`,(0,s.jsxs)(e.li,{children:[\"Since MDX files can use/import React components let's use a custom component. To make this work we need a \",(0,s.jsx)(e.code,{children:\"<CustomTweet>\"}),\" component that will be rendered in the browser. This component will accept the Tweet id as a prop, go get the tweet, and then render it. Like this: \",(0,s.jsx)(e.code,{children:'<CustomTweet id=\"abcdef123\"/>'})]}),`\n`,(0,s.jsx)(e.li,{children:\"Let's create a custom Next.js API to fetch the tweet. For the component above to retrieve a tweet we can re-use Lee's code and turn it into an API. This will return the Tweet data in JSON format.\"}),`\n`,(0,s.jsxs)(e.li,{children:[\"Finally we will use a tailwind styled component to render the tweet. I want this component to render a beautiful Tweet, with dynamic light/dark modes. In this case it's our \",(0,s.jsx)(e.code,{children:\"<Tweet>\"}),\" component. This is also based off Lee's code.\"]}),`\n`]}),`\n`,(0,s.jsx)(e.p,{children:\"Let me show you the results first. Here is my version:\"}),`\n`,(0,s.jsx)(h,{id:\"531834493922189313\"}),`\n`,(0,s.jsx)(e.h3,{id:\"the-code\",children:\"The Code\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"The first thing we want to do is create our own custom Tweet API. We will leverage Twitter's v2 REST API and return the Tweet in JSON format based on the Tweet ID. This is directly based on Lee Robinson's code. Here's more info: \",(0,s.jsx)(e.a,{href:\"https://developer.twitter.com/en/docs/twitter-api/tweets/lookup/quick-start\",children:\"Twitter API v2 REST API\"}),\".\"]}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"/api/tweet/[tweetID].js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"handler\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"req, res\"}),`) {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" { tweetID } = req.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"query\"}),`;\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),` (!tweetID) {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"400\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"json\"}),`({\n      `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"error\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'Please provide a Tweet ID'\"}),`,\n    });\n  }\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// METHOD SWITCH\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"switch\"}),\" (req.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"method\"}),`) {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"case\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'GET'\"}),`:\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getTweet\"}),`(tweetID);\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"default\"}),`:\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"405\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"end\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`Method \",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${req.method}\"}),\" Not Allowed`\"]}),`);\n  }\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// GET\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getTweet\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"tweetID\"}),`) {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" queryParams = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"URLSearchParams\"}),`({\n      `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"ids\"}),\": [tweetID], \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// comma separated list of tweet IDs, we use just one here\"}),`\n      `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"expansions\"}),`:\n        `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'author_id,attachments.media_keys,referenced_tweets.id,referenced_tweets.id.author_id'\"}),`,\n      `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'tweet.fields'\"}),`:\n        `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'attachments,author_id,public_metrics,created_at,id,in_reply_to_user_id,referenced_tweets,text'\"}),`,\n      `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'user.fields'\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'id,name,profile_image_url,protected,url,username,verified'\"}),`,\n      `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'media.fields'\"}),`:\n        `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'duration_ms,height,media_key,preview_image_url,type,url,width,public_metrics'\"}),`,\n    });\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"let\"}),` tweets = {};\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"try\"}),` {\n      tweets = `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`https://api.twitter.com/2/tweets?\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${queryParams}\"}),\"`\"]}),`, {\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"headers\"}),`: {\n          `,(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Authorization\"}),\": \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`Bearer \",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${process.env.TWITTER_BEARER_TOKEN}\"}),\"`\"]}),`,\n        },\n      }).`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"then\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"res\"}),\") =>\"]}),\" res.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"json\"}),`());\n    } `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"catch\"}),` (err) {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"400\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"json\"}),`(err);\n    }\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getAuthorInfo\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"author_id\"}),`) => {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" tweets.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"includes\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"users\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"find\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"user\"}),\") =>\"]}),\" user.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"id\"}),` === author_id);\n    };\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getReferencedTweets\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"mainTweet\"}),`) => {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n        mainTweet?.`,(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"referenced_tweets\"}),\"?.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"map\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"referencedTweet\"}),\") =>\"]}),` {\n          `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" fullReferencedTweet = tweets.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"includes\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"tweets\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"find\"}),`(\n            `,(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"tweet\"}),\") =>\"]}),\" tweet.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"id\"}),\" === referencedTweet.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"id\"}),`\n          );\n\n          `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` {\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"type\"}),\": referencedTweet.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"type\"}),`,\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"author\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getAuthorInfo\"}),\"(fullReferencedTweet.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"author_id\"}),`),\n            ...fullReferencedTweet,\n          };\n        }) || []\n      );\n    };\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" tweets.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"data\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"reduce\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"allTweets, tweet\"}),\") =>\"]}),` {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),` tweetWithAuthor = {\n        ...tweet,\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"media\"}),`:\n          tweet?.`,(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"attachments\"}),\"?.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"media_keys\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"map\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"key\"}),\") =>\"]}),`\n            tweets.`,(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"includes\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"media\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"find\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"media\"}),\") =>\"]}),\" media.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"media_key\"}),` === key)\n          ) || [],\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"referenced_tweets\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getReferencedTweets\"}),`(tweet),\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"author\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getAuthorInfo\"}),\"(tweet.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"author_id\"}),`),\n      };\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"200\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"json\"}),`(tweetWithAuthor, ...allTweets);\n    }, []);\n  }\n}\n`]})})]}),`\n`,(0,s.jsx)(e.p,{children:\"The next thing we want to do is create our own custom Tweet MDX Component. It will call our API and render a Tweet. It's a pretty basic component. This is what we will to pass or import into our .mdx file:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"CustomTweet.jsx\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useState, useEffect } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"BASE_URL\"}),\" } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'../../lib/constants'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Tweet\"}),\" } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'../Tweet'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"CustomTweet\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"{ id }\"}),`) => {y developer\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"let\"}),\" [tweet, setTweet] = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`);\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"URL\"}),` =\n    process.`,(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"NODE_ENV\"}),\" === \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'development'\"}),`\n      ? `,(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`http://localhost:3000/api/tweet/\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${id}\"}),\"`\"]}),`\n      : `,(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${BASE_URL}\"}),\"/api/tweet/\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${id}\"}),\"`\"]}),`;\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"fetchData\"}),\" = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),\" (\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) => {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" data = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"URL\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"then\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"res\"}),\") =>\"]}),\" res.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"json\"}),`());\n      `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"setTweet\"}),`(data);\n    };\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"fetchData\"}),`();\n  }, [`,(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"URL\"}),`]);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,s.jsxs)(e.span,{className:\"xml\",children:[(0,s.jsx)(e.span,{className:\"hljs-tag\",children:\"<>\"}),`\n      {tweet && (\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'md:w-4/5'\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"Tweet\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"tweet\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{tweet}\"}),\" />\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n      )}\n    `,(0,s.jsx)(e.span,{className:\"hljs-tag\",children:\"</>\"})]}),`\n  );\n};\n`]})})]}),`\n`,(0,s.jsx)(e.p,{children:\"And finally here is the Tweet component. It will take the tweet object and render it. Again, thanks to Lee Robinson's code. However, I've tweaked it a bit to improve the avatar and text styling to make it look a smidge better. Dynamic dark mode for the win! Unfortunately, this approach is super easy to use but doesn't pre-render the tweet so there is still content layout shift.\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"Tweet.jsx\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Image\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'next/image'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { format } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'date-fns'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:`/**\n * Supports plain text, images, and quote tweets.\n * Styles use !important to override Tailwind .prose inside MDX.\n * Inspiration: https://github.com/leerob/leerob.io/blob/main/lib/twitter.ts\n */`}),`\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"Tweet\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"{ tweet }\"}),`) => {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),` { text, id, author, media, created_at, public_metrics, referenced_tweets } = tweet;\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" createdAt = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Date\"}),`(created_at);\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" image = author.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"profile_image_url\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"replace\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_normal'\"}),\", \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_200x200'\"}),\"); \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// higher res\"}),`\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// construct our tweet URLs to use later\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" authorUrl = \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`https://twitter.com/\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${author.username}\"}),\"`\"]}),`;\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" likeUrl = \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`https://twitter.com/intent/like?tweet_id=\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${id}\"}),\"`\"]}),`;\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" retweetUrl = \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`https://twitter.com/intent/retweet?tweet_id=\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${id}\"}),\"`\"]}),`;\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" replyUrl = \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`https://twitter.com/intent/tweet?in_reply_to=\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${id}\"}),\"`\"]}),`;\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" tweetUrl = \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`https://twitter.com/\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${author.username}\"}),\"/status/\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${id}\"}),\"`\"]}),`;\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// make embedded URLs clickable\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"URLify\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"string\"}),`) => {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" urls = string.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"match\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-regexp\",children:\"/((((https?):\\\\/\\\\/)|(w{3}\\\\.))[\\\\-\\\\w@:%_\\\\+.~#?,&\\\\/\\\\/=]+)/g\"}),`);\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),` (urls) {\n      urls.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"forEach\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"url\"}),`) {\n        string = string.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"replace\"}),\"(url, \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:`'<a target=\"_blank\" href=\"'`}),\" + url + \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:`'\">'`}),\" + url + \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'</a>'\"}),`);\n      });\n    }\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` string;\n  };\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" urlified = \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"URLify\"}),`(text);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// make hashtags blue\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"highlightHashTags\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"string\"}),`) => {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" tags = string.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"match\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-regexp\",children:\"/(#+[a-zA-Z0-9(_)]{1,})/g\"}),`);\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),` (tags) {\n      tags.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"forEach\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"tag\"}),`) {\n        string = string.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"replace\"}),`(\n          tag,\n          `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:`'<span class=\"text-blue-600 dark:text-blue-300\">'`}),\" + tag + \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'</span>'\"}),`\n        );\n      });\n    }\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` string;\n  };\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" tagified = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"highlightHashTags\"}),`(urlified);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// make @names blue\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"highlightNames\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"string\"}),`) => {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" names = string.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"match\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-regexp\",children:\"/(@+[a-zA-Z0-9(_)]{1,})/g\"}),`);\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),` (names) {\n      names.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"forEach\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"tag\"}),`) {\n        string = string.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"replace\"}),`(\n          tag,\n          `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:`'<span class=\"text-blue-600 dark:text-blue-300\">'`}),\" + tag + \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'</span>'\"}),`\n        );\n      });\n    }\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` string;\n  };\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" namified = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"highlightNames\"}),`(tagified);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" quoteTweet = referenced_tweets && referenced_tweets.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"find\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"t\"}),\") =>\"]}),\" t.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"type\"}),\" === \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'quoted'\"}),`);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,s.jsxs)(e.span,{className:\"xml\",children:[(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'w-full p-4 my-4 border border-gray-300 border-1 rounded-xl tweet dark:border-gray-700'\"}),\">\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex'\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex w-12 h-12'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{authorUrl}\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"Image\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"alt\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{author.username}\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"height\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{48}\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"width\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{48}\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"src\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{image}\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rounded-full'\"}),`\n          />`]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{authorUrl}\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'author flex flex-col ml-2 !no-underline text-base'\"}),`\n        >`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex items-center font-bold !text-gray-900 dark:!text-gray-100 leading-5'\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"title\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{author.name}\"}),`\n          >`]}),`\n            {author.name}\n            {author.verified ? (\n              `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),`\n                `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"aria-label\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'Verified Account'\"}),`\n                `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'inline w-5 h-5 ml-1 text-[#1d9bf0]'\"}),`\n                `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"viewBox\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'0 0 24 24'\"}),`\n              >`]}),`\n                `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"g\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"fill\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'currentColor'\"}),\">\"]}),`\n                  `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"path\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"d\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z'\"}),\" />\"]}),`\n                `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"g\"}),\">\"]}),`\n              `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\">\"]}),`\n            ) : null}\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'!text-gray-500'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"title\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{\"}),\"`@${\",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"author.username\"}),\"}`}>\"]}),`\n            @{author.username}\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'ml-auto'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{authorUrl}\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"aria-label\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'Twitter Logo'\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'w-6 h-6 text-[#1d9bf0]'\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"viewBox\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'328 355 335 276'\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"xmlns\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'http://www.w3.org/2000/svg'\"}),`\n          >`]}),`\n            `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"g\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"fill\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'currentColor'\"}),\">\"]}),`\n              `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"path\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"d\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'M630 425a195 195 0 0 1-299 175 142 142 0 0 0 97-30 70 70 0 0 1-58-47 70 70 0 0 0 31-2 70 70 0 0 1-57-66 70 70 0 0 0 28 5 70 70 0 0 1-18-90 195 195 0 0 0 141 72 67 67 0 0 1 116-62 117 117 0 0 0 43-17 65 65 0 0 1-31 38 117 117 0 0 0 39-11 65 65 0 0 1-32 35Z'\"}),\" />\"]}),`\n            `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"g\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'mt-4 mb-1 text-xl whitespace-pre-wrap !text-gray-700 dark:!text-gray-300'\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"dangerouslySetInnerHTML\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{{\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"__html:\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"namified\"}),` }}\n      />`]}),`\n      {media && media.length ? (\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{\"}),`\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"media.length\"}),\" === \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"1\"}),`\n              ? '`,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"inline-grid\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"grid-cols-1\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"gap-x-2\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"gap-y-2\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"my-2\"}),`'\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\":\"}),\" '\",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"inline-grid\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"grid-cols-2\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"gap-x-2\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"gap-y-2\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"my-2\"}),`'\n          }\n        >`]}),`\n          {media.map((m) => (\n            `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"Image\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"key\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{m.media_key}\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"alt\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{text}\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"height\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{m.height}\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"width\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{m.width}\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"src\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{m.url}\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rounded'\"}),`\n            />`]}),`\n          ))}\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n      ) : null}\n      {quoteTweet ? `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"Tweet\"}),\" {\",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"...quoteTweet\"}),\"} />\"]}),` : null}\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'!text-gray-500 text-sm hover:!underline'\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{tweetUrl}\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),`\n      >`]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"time\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"title\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{\"}),\"`\",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"Time\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"Posted:\"}),\" ${\",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"createdAt.toUTCString\"}),\"()}`} \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"dateTime\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{createdAt.toISOString()}\"}),\">\"]}),`\n          {format(createdAt, 'h:mm a - MMM d, y')}\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"time\"}),\">\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"hr\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'!mt-2 !mb-2'\"}),\" />\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex !text-gray-700 !text-sm dark:!text-gray-300 mt-2'\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex items-center mr-4 !text-gray-500 hover:!text-blue-600 transition hover:!underline'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{likeUrl}\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),`\n        >`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'mr-2'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"width\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'20'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"height\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'20'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"viewBox\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'0 0 24 24'\"}),\">\"]}),`\n            `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"path\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'fill-current'\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"d\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'M12 21.638h-.014C9.403 21.59 1.95 14.856 1.95 8.478c0-3.064 2.525-5.754 5.403-5.754 2.29 0 3.83 1.58 4.646 2.73.813-1.148 2.353-2.73 4.644-2.73 2.88 0 5.404 2.69 5.404 5.755 0 6.375-7.454 13.11-10.037 13.156H12zM7.354 4.225c-2.08 0-3.903 1.988-3.903 4.255 0 5.74 7.035 11.596 8.55 11.658 1.52-.062 8.55-5.917 8.55-11.658 0-2.267-1.822-4.255-3.902-4.255-2.528 0-3.94 2.936-3.952 2.965-.23.562-1.156.562-1.387 0-.015-.03-1.426-2.965-3.955-2.965z'\"}),`\n            />`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),\"{new Number(public_metrics.like_count).toLocaleString()}\",(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex items-center mr-4 !text-gray-500 hover:!text-blue-600 transition hover:!underline'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{replyUrl}\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),`\n        >`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'mr-2'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"width\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'20'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"height\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'20'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"viewBox\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'0 0 24 24'\"}),\">\"]}),`\n            `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"path\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'fill-current'\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"d\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'M14.046 2.242l-4.148-.01h-.002c-4.374 0-7.8 3.427-7.8 7.802 0 4.098 3.186 7.206 7.465 7.37v3.828c0 .108.045.286.12.403.143.225.385.347.633.347.138 0 .277-.038.402-.118.264-.168 6.473-4.14 8.088-5.506 1.902-1.61 3.04-3.97 3.043-6.312v-.017c-.006-4.368-3.43-7.788-7.8-7.79zm3.787 12.972c-1.134.96-4.862 3.405-6.772 4.643V16.67c0-.414-.334-.75-.75-.75h-.395c-3.66 0-6.318-2.476-6.318-5.886 0-3.534 2.768-6.302 6.3-6.302l4.147.01h.002c3.532 0 6.3 2.766 6.302 6.296-.003 1.91-.942 3.844-2.514 5.176z'\"}),`\n            />`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),\"{new Number(public_metrics.reply_count).toLocaleString()}\",(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'flex items-center mr-4 !text-gray-500 hover:!text-blue-600 transition hover:!underline'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{retweetUrl}\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'_blank'\"}),`\n          `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),`\n        >`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'mr-2'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"width\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'20'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"height\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'20'\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"viewBox\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'0 0 24 24'\"}),\">\"]}),`\n            `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"path\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'fill-current'\"}),`\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"d\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'M23.77 15.67c-.292-.293-.767-.293-1.06 0l-2.22 2.22V7.65c0-2.068-1.683-3.75-3.75-3.75h-5.85c-.414 0-.75.336-.75.75s.336.75.75.75h5.85c1.24 0 2.25 1.01 2.25 2.25v10.24l-2.22-2.22c-.293-.293-.768-.293-1.06 0s-.294.768 0 1.06l3.5 3.5c.145.147.337.22.53.22s.383-.072.53-.22l3.5-3.5c.294-.292.294-.767 0-1.06zm-10.66 3.28H7.26c-1.24 0-2.25-1.01-2.25-2.25V6.46l2.22 2.22c.148.147.34.22.532.22s.384-.073.53-.22c.293-.293.293-.768 0-1.06l-3.5-3.5c-.293-.294-.768-.294-1.06 0l-3.5 3.5c-.294.292-.294.767 0 1.06s.767.293 1.06 0l2.22-2.22V16.7c0 2.068 1.683 3.75 3.75 3.75h5.85c.414 0 .75-.336.75-.75s-.337-.75-.75-.75z'\"}),`\n            />`]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"svg\"}),\">\"]}),`\n          `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),\"{new Number(public_metrics.retweet_count).toLocaleString()}\",(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"a\"}),\">\"]}),`\n      `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n    `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]})]}),`\n  );\n};\n\n`]})})]})]})}function _(a={}){let{wrapper:e}=a.components||{};return e?(0,s.jsx)(e,Object.assign({},a,{children:(0,s.jsx)(p,a)})):p(a)}var x=_;function c(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return k(T);})();\n;return Component;"
    },
    "_id": "snippets/embed-tweets-mdx.mdx",
    "_raw": {
      "sourceFilePath": "snippets/embed-tweets-mdx.mdx",
      "sourceFileName": "embed-tweets-mdx.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/embed-tweets-mdx"
    },
    "type": "Snippet",
    "slug": "/snippets/embed-tweets-mdx",
    "slugAsParams": "embed-tweets-mdx",
    "stats": {
      "text": "11 min read",
      "minutes": 10.385,
      "time": 623100,
      "words": 2077
    }
  },
  {
    "title": "Framer Motion",
    "summary": "Animated slide in pane component with Framer Motion",
    "icon": "framer",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\n<Step number={1} title=\"Install Framer Motion\" />\n\n<CodeBlock>\n\n```bash:Terminal\n# If you're using npm\nnpm install framer-motion\n\n# If you're using yarn\n\nyarn add framer-motion\n```\n\n</CodeBlock>\n\n<Step number={2} title=\"Reduce bundle size by using LazyMotion\" />\n\n<CodeBlock>\n\n```Javascript:index.js\nimport { m, LazyMotion, domAnimation, AnimatePresence } from \"framer-motion\";\n```\n\n</CodeBlock>\n\n<Step number={3} title=\"Use AnimatePresence with LazyMotion\" />\n\n<CodeBlock>\n\n```Javascript:index.js\nimport { m, LazyMotion, domAnimation, AnimatePresence } from \"framer-motion\";\n\nconst Home = () => {\nreturn (\n\n<LazyMotion features={domAnimation}>\n  <Container>\n    <AnimatePresence>\n      {/_ Animated Left Pane _/}\n      <m.div\n        key='left-pane'\n        initial={{ x: -500 }}\n        animate={{ x: 0 }}\n        exit={{ x: -500 }}\n        className='hidden justify-center w-1/4 h-full bg-gray-800 rounded-3xl max-h-100 lg:flex'\n      >\n        // Custom component\n      </m.div>\n    </AnimatePresence>\n  </Container>\n</LazyMotion>\n); };\n\nexport default Home;\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var o=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),y=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},i=(a,s,n,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of j(s))!g.call(a,c)&&c!==n&&r(a,c,{get:()=>s[c],enumerable:!(l=p(s,c))||l.enumerable});return a};var f=(a,s,n)=>(n=a!=null?o(N(a)):{},i(s||!a||!a.__esModule?r(n,\"default\",{value:a,enumerable:!0}):n,a)),x=a=>i(r({},\"__esModule\",{value:!0}),a);var m=u((v,t)=>{t.exports=_jsx_runtime});var b={};y(b,{default:()=>M,frontmatter:()=>_});var e=f(m()),_={title:\"Framer Motion\",published:!0,date:\"2021-10-23\",summary:\"Animated slide in pane component with Framer Motion\",icon:\"framer\",tags:[\"Javascript\"]};function h(a){let s=Object.assign({div:\"div\",pre:\"pre\",code:\"code\",span:\"span\"},a.components),{Step:n,CodeBlock:l}=s;return l||d(\"CodeBlock\",!0),n||d(\"Step\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n,{number:1,title:\"Install Framer Motion\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"Terminal\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-bash\",children:[(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"# If you're using npm\"}),`\nnpm install framer-motion\n\n`,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"# If you're using yarn\"}),`\n\nyarn add framer-motion\n`]})})]}),`\n`,(0,e.jsx)(n,{number:2,title:\"Reduce bundle size by using LazyMotion\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-Javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { m, \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"LazyMotion\"}),\", domAnimation, \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"AnimatePresence\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"framer-motion\"'}),`;\n`]})})]}),`\n`,(0,e.jsx)(n,{number:3,title:\"Use AnimatePresence with LazyMotion\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"index.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-Javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { m, \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"LazyMotion\"}),\", domAnimation, \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"AnimatePresence\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"framer-motion\"'}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"Home\"}),\" = (\",(0,e.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n\n`,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"LazyMotion\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"features\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{domAnimation}\"}),\">\"]}),`\n  `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Container\"}),\">\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"AnimatePresence\"}),\">\"]}),`\n      {/_ Animated Left Pane _/}\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"m.div\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"key\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'left-pane'\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"initial\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"x:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"-500\"}),` }}\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"animate\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"x:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"0\"}),` }}\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"exit\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"x:\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"-500\"}),` }}\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'hidden justify-center w-1/4 h-full bg-gray-800 rounded-3xl max-h-100 lg:flex'\"}),`\n      >`]}),`\n        // Custom component\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"m.div\"}),\">\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"AnimatePresence\"}),\">\"]}),`\n  `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Container\"}),\">\"]}),`\n`,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"LazyMotion\"}),\">\"]})]}),`\n); };\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Home\"}),`;\n`]})})]})]})}function w(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(h,a)})):h(a)}var M=w;function d(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return x(b);})();\n;return Component;"
    },
    "_id": "snippets/framer-motion.mdx",
    "_raw": {
      "sourceFilePath": "snippets/framer-motion.mdx",
      "sourceFileName": "framer-motion.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/framer-motion"
    },
    "type": "Snippet",
    "slug": "/snippets/framer-motion",
    "slugAsParams": "framer-motion",
    "stats": {
      "text": "1 min read",
      "minutes": 0.6,
      "time": 36000,
      "words": 120
    }
  },
  {
    "title": "Get the last segment of a URL",
    "summary": "How to get the last segment of a path or URL using JavaScript.",
    "icon": "js",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\nHere's how to get the last segment of a path or URL:\n\n`const lastSegment = path.substring(path.lastIndexOf('/') + 1)`\n\n### How does this work?\n\nThe `path` string contains a path. Like '/Users/Steve/Desktop', for example.\n\nFirst, we identify the index of the last '/' in the path, calling lastIndexOf('/') on the `path` string.\n\nNext, we pass that to the substring() method we call on the same `path` string. This will return a new string that starts from the position of the last '/', + 1 (otherwise we’d also get the '/' back).\n\nYou can make a simple function:\n\n<CodeBlock>\n\n```JavaScript:getLastSegment.js\nconst getLastSegment = (path) => {\n  path.substring(path.lastIndexOf('/') + 1)\n}\n\ngetLastSegment('/Users') // \"users\"\ngetLastSegment('/Users/Flavio') // \"Flavio\"\ngetLastSegment('/Users/Flavio/test.jpg') // \"test.jpg\"\ngetLastSegment('https://flavicopes.com/test') // \"test\"\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),u=(t,e)=>{for(var n in e)l(t,n,{get:e[n],enumerable:!0})},c=(t,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of m(e))!j.call(t,a)&&a!==n&&l(t,a,{get:()=>e[a],enumerable:!(i=p(e,a))||i.enumerable});return t};var N=(t,e,n)=>(n=t!=null?d(g(t)):{},c(e||!t||!t.__esModule?l(n,\"default\",{value:t,enumerable:!0}):n,t)),w=t=>c(l({},\"__esModule\",{value:!0}),t);var h=f((S,r)=>{r.exports=_jsx_runtime});var b={};u(b,{default:()=>v,frontmatter:()=>x});var s=N(h()),x={title:\"Get the last segment of a URL\",published:!0,date:\"2021-10-23\",summary:\"How to get the last segment of a path or URL using JavaScript.\",icon:\"js\",tags:[\"Javascript\"]};function o(t){let e=Object.assign({p:\"p\",code:\"code\",h3:\"h3\",div:\"div\",pre:\"pre\",span:\"span\"},t.components),{CodeBlock:n}=e;return n||L(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:\"Here's how to get the last segment of a path or URL:\"}),`\n`,(0,s.jsx)(e.p,{children:(0,s.jsx)(e.code,{children:\"const lastSegment = path.substring(path.lastIndexOf('/') + 1)\"})}),`\n`,(0,s.jsx)(e.h3,{id:\"how-does-this-work\",children:\"How does this work?\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"The \",(0,s.jsx)(e.code,{children:\"path\"}),\" string contains a path. Like '/Users/Steve/Desktop', for example.\"]}),`\n`,(0,s.jsxs)(e.p,{children:[\"First, we identify the index of the last '/' in the path, calling lastIndexOf('/') on the \",(0,s.jsx)(e.code,{children:\"path\"}),\" string.\"]}),`\n`,(0,s.jsxs)(e.p,{children:[\"Next, we pass that to the substring() method we call on the same \",(0,s.jsx)(e.code,{children:\"path\"}),\" string. This will return a new string that starts from the position of the last '/', + 1 (otherwise we\\u2019d also get the '/' back).\"]}),`\n`,(0,s.jsx)(e.p,{children:\"You can make a simple function:\"}),`\n`,(0,s.jsxs)(n,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"getLastSegment.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getLastSegment\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"path\"}),`) => {\n  path.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"substring\"}),\"(path.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"lastIndexOf\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'/'\"}),\") + \",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"1\"}),`)\n}\n\n`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getLastSegment\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'/Users'\"}),\") \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:'// \"users\"'}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getLastSegment\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'/Users/Flavio'\"}),\") \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:'// \"Flavio\"'}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getLastSegment\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'/Users/Flavio/test.jpg'\"}),\") \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:'// \"test.jpg\"'}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getLastSegment\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'https://flavicopes.com/test'\"}),\") \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:'// \"test\"'}),`\n`]})})]})]})}function _(t={}){let{wrapper:e}=t.components||{};return e?(0,s.jsx)(e,Object.assign({},t,{children:(0,s.jsx)(o,t)})):o(t)}var v=_;function L(t,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+t+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(b);})();\n;return Component;"
    },
    "_id": "snippets/get-last-segment.mdx",
    "_raw": {
      "sourceFilePath": "snippets/get-last-segment.mdx",
      "sourceFileName": "get-last-segment.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/get-last-segment"
    },
    "type": "Snippet",
    "slug": "/snippets/get-last-segment",
    "slugAsParams": "get-last-segment",
    "stats": {
      "text": "1 min read",
      "minutes": 0.61,
      "time": 36600,
      "words": 122
    }
  },
  {
    "title": "Google Analytics API",
    "summary": "Using Google Analytics API to get page data.",
    "icon": "ga",
    "date": "2021-10-21T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\nLet's assume you have Google Analytics setup for your account and you want to display your analytics in your application like [this](/stats). Well Google has an [API](https://googleapis.dev/nodejs/analytics-data/latest/v1beta.BetaAnalyticsDataClient.html) you can use.\n\nYou can call this API from a Next API as follows:\n\n<Step number={1} title='Create a Google Service Account' />\n\n- Go to [Google Developer Console](https://console.cloud.google.com) and create a new project if you haven't already.\n- On the sidebar click on **Credentials** and then **Create Credentials**\n- Select **Service Account** as the credential type.\n- Go back to the **Credentials** page and select **Service Accounts**\n- Select **Keys** tab and then **Add Key** then create a **JSON key**\n- Download and keep this **JSON key** safe.\n\n<Step number={2} title='Enable the Google Analytics Data API' />\n\n- On the sidebar click on **APIs & Services** and **ENABLE APIS AND SERVICES**\n- Search for **Google Analytics Data API** and enable it\n- Go to Analytics dashboard and click on **Admin** -> **Property User Management** -> **Add Users**\n- Add your service account email address (look in the JSON key for the email) and give it **Read and Analyze** access.\n\nThis may be a little confusing but you are just granting the service account you just created access to the Google Analytics Data API so you can use it in your Next app.\n\n<Step number={3} title='Install the @google-analytics/data package' />\n\n- `npm install @google-analytics/data` or `yarn add @google-analytics/data`\n- Set the **client_email**, **client_id** and **private_key** as env variables in your _.env.local_ file\n\n<Step number={4} title='Get the Data (create a Next API)' />\n\n<CodeBlock>\n\n```js\nimport { BetaAnalyticsDataClient } from '@google-analytics/data';\n\nexport default async function handler(req, res) {\n  const analyticsDataClient = new BetaAnalyticsDataClient({\n    credentials: {\n      client_email: process.env.ANALYTICS_CLIENT_EMAIL,\n      private_key: process.env.ANALYTICS_PRIVATE_KEY.replace(/\\\\n/g, '\\n'),\n    },\n    projectId: process.env.ANALYTICS_PROJECT_ID,\n  });\n\n  const propertyId = PROPERTY_ID; // place your property id here available in analytics console.\n  let today = new Date().getTime() - 60 * 60 * 24 * 60 * 1000;\n  let day = new Date(today).getDate();\n  let month = new Date(today).getMonth() + 1;\n  let year = new Date(today).getFullYear();\n\n  let dayFormat = `${year}-${month}-${day}`;\n\n  const totalReport = await analyticsDataClient.runReport({\n    property: 'properties/' + propertyId,\n    dateRanges: [\n      {\n        startDate: dayFormat,\n        endDate: 'today',\n      },\n    ],\n\n    metrics: [\n      {\n        name: 'screenpageViews',\n      },\n      {\n        name: 'engagementRate',\n      },\n      {\n        name: 'totalUsers',\n      },\n    ],\n  });\n\n  return res.status(200).json({\n    pageViews: totalReport[0].rows[0].metricValues[0].value,\n    engagmentRate: totalReport[0].rows[0].metricValues[1].value,\n    totalUsers: totalReport[0].rows[0].metricValues[2].value,\n  });\n}\n```\n\n</CodeBlock>\n\n<Step number={5} title='Show the Data' />\n\nHere's the exact React component I used as linked above. The markup is styled using [Tailwindcss](https://tailwindcss.com/) so that may look unfamiliar, but we just call the Next API using useSWR (which calls the Google Analytics API) and then we show Page Views, Engagement and Users.\n\n<CodeBlock>\n\n```jsx\nimport useSWR from 'swr';\nimport millify from 'millify';\n\nexport const Stats = () => {\n  const fetcher = (...args) => fetch(...args).then((res) => res.json());\n  const { data: stats } = useSWR('/api/stats', fetcher);\n\n  return (\n    <div className='flex flex-col mx-5'>\n      <h1 className='text-4xl md:text-6xl lg:text-7xl font-bold tracking-tighter leading-tight md:leading-none text-center md:text-left my-8'>\n        Analytics\n      </h1>\n\n      <div className='grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 mb-6'>\n        {/* Views */}\n        <div className='flex relative flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'>\n          <h1 className='text-2xl font-black'>Page Views</h1>\n          <span className='text-5xl font-black'>{!stats ? '-' : millify(stats.pageViews)}</span>\n        </div>\n        {/* Engagement */}\n        <div className='flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'>\n          <h1 className='text-2xl font-black'>Engagement Rate</h1>\n          <span className='text-5xl font-black'>\n            {!stats ? '-' : (stats.engagmentRate * 100).toFixed(0) + '%'}\n          </span>\n        </div>\n        {/* Users */}\n        <div className='flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'>\n          <h1 className='text-2xl font-black'>Total Users</h1>\n          <span className='text-5xl font-black'>{!stats ? '-' : millify(stats.totalUsers)}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),u=(e,s)=>{for(var l in s)r(e,l,{get:s[l],enumerable:!0})},t=(e,s,l,n)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of N(s))!g.call(e,c)&&c!==l&&r(e,c,{get:()=>s[c],enumerable:!(n=o(s,c))||n.enumerable});return e};var f=(e,s,l)=>(l=e!=null?p(j(e)):{},t(s||!e||!e.__esModule?r(l,\"default\",{value:e,enumerable:!0}):l,e)),w=e=>t(r({},\"__esModule\",{value:!0}),e);var i=y((v,h)=>{h.exports=_jsx_runtime});var A={};u(A,{default:()=>x,frontmatter:()=>k});var a=f(i()),k={title:\"Google Analytics API\",published:!0,date:\"2021-10-21\",summary:\"Using Google Analytics API to get page data.\",icon:\"ga\",tags:[\"Javascript\"]};function d(e){let s=Object.assign({p:\"p\",a:\"a\",ul:\"ul\",li:\"li\",strong:\"strong\",code:\"code\",em:\"em\",pre:\"pre\",span:\"span\"},e.components),{Step:l,CodeBlock:n}=s;return n||m(\"CodeBlock\",!0),l||m(\"Step\",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:[\"Let's assume you have Google Analytics setup for your account and you want to display your analytics in your application like \",(0,a.jsx)(s.a,{href:\"/stats\",children:\"this\"}),\". Well Google has an \",(0,a.jsx)(s.a,{href:\"https://googleapis.dev/nodejs/analytics-data/latest/v1beta.BetaAnalyticsDataClient.html\",children:\"API\"}),\" you can use.\"]}),`\n`,(0,a.jsx)(s.p,{children:\"You can call this API from a Next API as follows:\"}),`\n`,(0,a.jsx)(l,{number:1,title:\"Create a Google Service Account\"}),`\n`,(0,a.jsxs)(s.ul,{children:[`\n`,(0,a.jsxs)(s.li,{children:[\"Go to \",(0,a.jsx)(s.a,{href:\"https://console.cloud.google.com\",children:\"Google Developer Console\"}),\" and create a new project if you haven't already.\"]}),`\n`,(0,a.jsxs)(s.li,{children:[\"On the sidebar click on \",(0,a.jsx)(s.strong,{children:\"Credentials\"}),\" and then \",(0,a.jsx)(s.strong,{children:\"Create Credentials\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Select \",(0,a.jsx)(s.strong,{children:\"Service Account\"}),\" as the credential type.\"]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Go back to the \",(0,a.jsx)(s.strong,{children:\"Credentials\"}),\" page and select \",(0,a.jsx)(s.strong,{children:\"Service Accounts\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Select \",(0,a.jsx)(s.strong,{children:\"Keys\"}),\" tab and then \",(0,a.jsx)(s.strong,{children:\"Add Key\"}),\" then create a \",(0,a.jsx)(s.strong,{children:\"JSON key\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Download and keep this \",(0,a.jsx)(s.strong,{children:\"JSON key\"}),\" safe.\"]}),`\n`]}),`\n`,(0,a.jsx)(l,{number:2,title:\"Enable the Google Analytics Data API\"}),`\n`,(0,a.jsxs)(s.ul,{children:[`\n`,(0,a.jsxs)(s.li,{children:[\"On the sidebar click on \",(0,a.jsx)(s.strong,{children:\"APIs & Services\"}),\" and \",(0,a.jsx)(s.strong,{children:\"ENABLE APIS AND SERVICES\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Search for \",(0,a.jsx)(s.strong,{children:\"Google Analytics Data API\"}),\" and enable it\"]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Go to Analytics dashboard and click on \",(0,a.jsx)(s.strong,{children:\"Admin\"}),\" -> \",(0,a.jsx)(s.strong,{children:\"Property User Management\"}),\" -> \",(0,a.jsx)(s.strong,{children:\"Add Users\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Add your service account email address (look in the JSON key for the email) and give it \",(0,a.jsx)(s.strong,{children:\"Read and Analyze\"}),\" access.\"]}),`\n`]}),`\n`,(0,a.jsx)(s.p,{children:\"This may be a little confusing but you are just granting the service account you just created access to the Google Analytics Data API so you can use it in your Next app.\"}),`\n`,(0,a.jsx)(l,{number:3,title:\"Install the @google-analytics/data package\"}),`\n`,(0,a.jsxs)(s.ul,{children:[`\n`,(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:\"npm install @google-analytics/data\"}),\" or \",(0,a.jsx)(s.code,{children:\"yarn add @google-analytics/data\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Set the \",(0,a.jsx)(s.strong,{children:\"client_email\"}),\", \",(0,a.jsx)(s.strong,{children:\"client_id\"}),\" and \",(0,a.jsx)(s.strong,{children:\"private_key\"}),\" as env variables in your \",(0,a.jsx)(s.em,{children:\".env.local\"}),\" file\"]}),`\n`]}),`\n`,(0,a.jsx)(l,{number:4,title:\"Get the Data (create a Next API)\"}),`\n`,(0,a.jsx)(n,{children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:\"hljs language-js\",children:[(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"BetaAnalyticsDataClient\"}),\" } \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@google-analytics/data'\"}),`;\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"handler\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"req, res\"}),`) {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" analyticsDataClient = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"BetaAnalyticsDataClient\"}),`({\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"credentials\"}),`: {\n      `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"client_email\"}),\": process.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"ANALYTICS_CLIENT_EMAIL\"}),`,\n      `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"private_key\"}),\": process.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"ANALYTICS_PRIVATE_KEY\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"replace\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-regexp\",children:\"/\\\\\\\\n/g\"}),\", \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'\\\\n'\"}),`),\n    },\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"projectId\"}),\": process.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"ANALYTICS_PROJECT_ID\"}),`,\n  });\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" propertyId = \",(0,a.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"PROPERTY_ID\"}),\"; \",(0,a.jsx)(s.span,{className:\"hljs-comment\",children:\"// place your property id here available in analytics console.\"}),`\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" today = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"().\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getTime\"}),\"() - \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"60\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"60\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"24\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"60\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"1000\"}),`;\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" day = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"(today).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getDate\"}),`();\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" month = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"(today).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getMonth\"}),\"() + \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`;\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" year = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"(today).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getFullYear\"}),`();\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" dayFormat = \",(0,a.jsxs)(s.span,{className:\"hljs-string\",children:[\"`\",(0,a.jsx)(s.span,{className:\"hljs-subst\",children:\"${year}\"}),\"-\",(0,a.jsx)(s.span,{className:\"hljs-subst\",children:\"${month}\"}),\"-\",(0,a.jsx)(s.span,{className:\"hljs-subst\",children:\"${day}\"}),\"`\"]}),`;\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" totalReport = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" analyticsDataClient.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"runReport\"}),`({\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'properties/'\"}),` + propertyId,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"dateRanges\"}),`: [\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"startDate\"}),`: dayFormat,\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"endDate\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'today'\"}),`,\n      },\n    ],\n\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"metrics\"}),`: [\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'screenpageViews'\"}),`,\n      },\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'engagementRate'\"}),`,\n      },\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'totalUsers'\"}),`,\n      },\n    ],\n  });\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"200\"}),\").\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`({\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"pageViews\"}),\": totalReport[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"rows\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"metricValues\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"value\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"engagmentRate\"}),\": totalReport[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"rows\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"metricValues\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"value\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"totalUsers\"}),\": totalReport[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"rows\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"metricValues\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"2\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"value\"}),`,\n  });\n}\n`]})})}),`\n`,(0,a.jsx)(l,{number:5,title:\"Show the Data\"}),`\n`,(0,a.jsxs)(s.p,{children:[\"Here's the exact React component I used as linked above. The markup is styled using \",(0,a.jsx)(s.a,{href:\"https://tailwindcss.com/\",children:\"Tailwindcss\"}),\" so that may look unfamiliar, but we just call the Next API using useSWR (which calls the Google Analytics API) and then we show Page Views, Engagement and Users.\"]}),`\n`,(0,a.jsx)(n,{children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" useSWR \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'swr'\"}),`;\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" millify \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'millify'\"}),`;\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"Stats\"}),\" = (\",(0,a.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetcher\"}),\" = (\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"...args\"}),\") => \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(...args).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"then\"}),\"(\",(0,a.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"res\"}),\") =>\"]}),\" res.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`());\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" { \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"data\"}),\": stats } = \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"useSWR\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'/api/stats'\"}),`, fetcher);\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,a.jsxs)(s.span,{className:\"xml\",children:[(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex flex-col mx-5'\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-4xl md:text-6xl lg:text-7xl font-bold tracking-tighter leading-tight md:leading-none text-center md:text-left my-8'\"}),\">\"]}),`\n        Analytics\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 mb-6'\"}),\">\"]}),`\n        {/* Views */}\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex relative flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-2xl font-black'\"}),\">\"]}),\"Page Views\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-5xl font-black'\"}),\">\"]}),\"{!stats ? '-' : millify(stats.pageViews)}\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n        {/* Engagement */}\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-2xl font-black'\"}),\">\"]}),\"Engagement Rate\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-5xl font-black'\"}),\">\"]}),`\n            {!stats ? '-' : (stats.engagmentRate * 100).toFixed(0) + '%'}\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n        {/* Users */}\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-2xl font-black'\"}),\">\"]}),\"Total Users\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-5xl font-black'\"}),\">\"]}),\"{!stats ? '-' : millify(stats.totalUsers)}\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n    `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]})]}),`\n  );\n};\n`]})})})]})}function b(e={}){let{wrapper:s}=e.components||{};return s?(0,a.jsx)(s,Object.assign({},e,{children:(0,a.jsx)(d,e)})):d(e)}var x=b;function m(e,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(A);})();\n;return Component;"
    },
    "_id": "snippets/google-analytics-api.mdx",
    "_raw": {
      "sourceFilePath": "snippets/google-analytics-api.mdx",
      "sourceFileName": "google-analytics-api.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/google-analytics-api"
    },
    "type": "Snippet",
    "slug": "/snippets/google-analytics-api",
    "slugAsParams": "google-analytics-api",
    "stats": {
      "text": "3 min read",
      "minutes": 2.93,
      "time": 175800,
      "words": 586
    }
  },
  {
    "title": "Google Tag Manager",
    "summary": "Implementing Google Tag Manager in Nextjs.",
    "icon": "next",
    "date": "2021-12-01T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\nLet's cover how to set up Next.JS with Google Analytics using the latest versions (Next.JS 12, Google Tag Manager, and Google Analytics 4).\n\n## Background\n\n[Google Tag Manager](https://tagmanager.google.com) software from Google that allows you to deploy various types of code (tags) to your website. Some good examples of tags would be Google Analytics tracking codes, Google Analytics event codes, Google Ads conversion script and remarketing tags. There are many more types of code that can be added to your website using GTM, including custom codes.\n\nGoogle Tag Manager and Google Analytics explanation:\n\n<YouTube link=\"https://youtu.be/qm28tjEqZXA\" />\n\nGoogle Tag Manager does not replace [Google Analytics](https://analytics.google.com). Instead, it helps you easily add Google Analytics tracking to a website and define rules when each tag fires. In other words Google Tag Manager and Google Analytics work together!\n\nPrior to GTM, GA tracking codes had to be hard-coded by a web developer on each individual page. Having hundreds of events is very difficult when it comes to maintaining/updating them. But Google Tag Manager solves this problem because all your tags are stored in one place – your GTM account.\n\nGoogle Tag Manager also lets you test your tags to make sure they are triggered when you load the right page or click a particular button. Another great benefit: you can change your tags and the way they work without actually changing the source code of your website – instead you just edit tags in GTM user interface and publish changes with a click of a button.\n\nNote in order the setup GTM and GA you will need _both_ a GTM Container ID from your Tag Manager Account (which looks like \"GTM-XXXXXXX\") _and_ a Google Analytics account and property and a measurement ID. A Google Analytics GA4 ID will look like \"G-XXXXXXXXXX\". To add GTM to your Nextjs site you will only need the GTM Container ID - the rest of the configuration is done via the GTM UI.\n\nHere we go:\n\n<Step number={1} title=\"Create a Google Tag Manager Account\" />\n\nCreate an account, or use an existing account, at [Google Tag Manager](tagmanager.google.com). (A new container is created by default, and you can create additional containers within each account.)\n\n> A Tag Manager account represents the topmost level of organization. Typically, only one account is needed per company. A Tag Manager account contains _one or more containers_, and there are specific container types that may be used for websites, AMP pages, Android apps, and iOS apps.\n\n<Step number={2} title=\"Create an Account/Container inside Tag Manager\" />\n\nIn Tag Manager, click Accounts and then Create account.\n\n- Enter an account name and indicate whether you'd like to share data anonymously with Google and others.\n- Enter a descriptive container name and select the type of content: Web, AMP, Android, or iOS. For our purposes choose web..\n- Click Create.\n- Review the Terms of Service and click Yes.\n\nWhen your new container first loads, you will be prompted with the web container installation code snippet. All you need here is the **GTM Container ID**.\n\n<Step number={3} title=\"Install the container in your Nextjs app\" />\n\nThis is surprisingly the simplest step. Next has an example [here](https://github.com/vercel/next.js/tree/canary/examples/with-google-tag-manager). All you have to do is inject the GTM script in your `pages\\_app.js` file using the next/script component.\n\nThe Next example also shows that you can manually fire a page view based on a route change event but that is unnecessary - you should just configure GTM to trigger on a history change event as outlined in step 4 below. All you have to do is configure the code below.\n\n<CodeBlock>\n\n```js:_app.js {1, 9-22} showLineNumbers\nimport Script from 'next/script';\nimport { ThemeProvider } from 'next-themes';\nimport { Layout } from '../components/Layout';\nimport '../styles/index.css';\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <>\n      {/* Google Tag Manager */}\n      <Script\n        id='gtm'\n        strategy='afterInteractive'\n        dangerouslySetInnerHTML={{\n          __html: `\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer', '${process.env.NEXT_PUBLIC_GTM_ACCOUNT}');\n          `,\n        }}\n      />\n      <ThemeProvider attribute='class'>\n        <Layout>\n          <Component {...pageProps} />\n        </Layout>\n      </ThemeProvider>\n    </>\n  );\n}\n```\n\n</CodeBlock>\n\nThat's it! Google Tag Manager is installed in your Nextjs app assuming you have set your envronment variable to your GTM Container ID.\n\n<Step number={4} title=\"Add and publish your tags\" />\n\nThe rest of the work is done by configuring Google Tag Manager. That is the power of GTM - your coding is done - the rest is all configuration. Most Tag Manager implementations start with a Google Analytics page view tag deployment. Here are step by step instructions for [how to deploy a Google Analytics tag](https://support.google.com/tagmanager/answer/6107124).\n\nThere is a significant \"gotcha\" for Nextjs apps - actually all \"Single Page Apps\" (SPAs). That's because of how SPA's work, and not related to Nextjs per se - when you navigate pages in Nextjs the **page view doesn't fire** because the page didn't change! If you'd like to fire GTM correctly on each page navigation, be sure to enable the \"History Change\" trigger, as described [here](https://support.google.com/tagmanager/answer/7679322?hl=en).\n\nYour configuration in GTM should look like this as a bare minumum:\n\n![GTM Setup](https://danstroot.imgix.net/assets/snippets/img/gtm-setup.png)\n\nThat's it! Now if you want to get fancy and show your Google Analytics stats inside your site [check this out!](/snippets/google-analytics-api)\n",
      "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var j=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),N=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},i=(n,e,s,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!y.call(n,l)&&l!==s&&r(n,l,{get:()=>e[l],enumerable:!(t=g(e,l))||t.enumerable});return n};var w=(n,e,s)=>(s=n!=null?p(u(n)):{},i(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),f=n=>i(r({},\"__esModule\",{value:!0}),n);var h=j((v,c)=>{c.exports=_jsx_runtime});var M={};N(M,{default:()=>G,frontmatter:()=>T});var a=w(h()),T={title:\"Google Tag Manager\",published:!0,date:\"2021-12-01\",summary:\"Implementing Google Tag Manager in Nextjs.\",icon:\"next\",tags:[\"Javascript\"]};function d(n){let e=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",em:\"em\",blockquote:\"blockquote\",ul:\"ul\",li:\"li\",strong:\"strong\",code:\"code\",div:\"div\",pre:\"pre\",span:\"span\",img:\"img\"},n.components),{YouTube:s,Step:t,CodeBlock:l}=e;return l||o(\"CodeBlock\",!0),t||o(\"Step\",!0),s||o(\"YouTube\",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.p,{children:\"Let's cover how to set up Next.JS with Google Analytics using the latest versions (Next.JS 12, Google Tag Manager, and Google Analytics 4).\"}),`\n`,(0,a.jsx)(e.h2,{id:\"background\",children:\"Background\"}),`\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.a,{href:\"https://tagmanager.google.com\",children:\"Google Tag Manager\"}),\" software from Google that allows you to deploy various types of code (tags) to your website. Some good examples of tags would be Google Analytics tracking codes, Google Analytics event codes, Google Ads conversion script and remarketing tags. There are many more types of code that can be added to your website using GTM, including custom codes.\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Google Tag Manager and Google Analytics explanation:\"}),`\n`,(0,a.jsx)(s,{link:\"https://youtu.be/qm28tjEqZXA\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"Google Tag Manager does not replace \",(0,a.jsx)(e.a,{href:\"https://analytics.google.com\",children:\"Google Analytics\"}),\". Instead, it helps you easily add Google Analytics tracking to a website and define rules when each tag fires. In other words Google Tag Manager and Google Analytics work together!\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Prior to GTM, GA tracking codes had to be hard-coded by a web developer on each individual page. Having hundreds of events is very difficult when it comes to maintaining/updating them. But Google Tag Manager solves this problem because all your tags are stored in one place \\u2013 your GTM account.\"}),`\n`,(0,a.jsx)(e.p,{children:\"Google Tag Manager also lets you test your tags to make sure they are triggered when you load the right page or click a particular button. Another great benefit: you can change your tags and the way they work without actually changing the source code of your website \\u2013 instead you just edit tags in GTM user interface and publish changes with a click of a button.\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"Note in order the setup GTM and GA you will need \",(0,a.jsx)(e.em,{children:\"both\"}),' a GTM Container ID from your Tag Manager Account (which looks like \"GTM-XXXXXXX\") ',(0,a.jsx)(e.em,{children:\"and\"}),' a Google Analytics account and property and a measurement ID. A Google Analytics GA4 ID will look like \"G-XXXXXXXXXX\". To add GTM to your Nextjs site you will only need the GTM Container ID - the rest of the configuration is done via the GTM UI.']}),`\n`,(0,a.jsx)(e.p,{children:\"Here we go:\"}),`\n`,(0,a.jsx)(t,{number:1,title:\"Create a Google Tag Manager Account\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"Create an account, or use an existing account, at \",(0,a.jsx)(e.a,{href:\"tagmanager.google.com\",children:\"Google Tag Manager\"}),\". (A new container is created by default, and you can create additional containers within each account.)\"]}),`\n`,(0,a.jsxs)(e.blockquote,{children:[`\n`,(0,a.jsxs)(e.p,{children:[\"A Tag Manager account represents the topmost level of organization. Typically, only one account is needed per company. A Tag Manager account contains \",(0,a.jsx)(e.em,{children:\"one or more containers\"}),\", and there are specific container types that may be used for websites, AMP pages, Android apps, and iOS apps.\"]}),`\n`]}),`\n`,(0,a.jsx)(t,{number:2,title:\"Create an Account/Container inside Tag Manager\"}),`\n`,(0,a.jsx)(e.p,{children:\"In Tag Manager, click Accounts and then Create account.\"}),`\n`,(0,a.jsxs)(e.ul,{children:[`\n`,(0,a.jsx)(e.li,{children:\"Enter an account name and indicate whether you'd like to share data anonymously with Google and others.\"}),`\n`,(0,a.jsx)(e.li,{children:\"Enter a descriptive container name and select the type of content: Web, AMP, Android, or iOS. For our purposes choose web..\"}),`\n`,(0,a.jsx)(e.li,{children:\"Click Create.\"}),`\n`,(0,a.jsx)(e.li,{children:\"Review the Terms of Service and click Yes.\"}),`\n`]}),`\n`,(0,a.jsxs)(e.p,{children:[\"When your new container first loads, you will be prompted with the web container installation code snippet. All you need here is the \",(0,a.jsx)(e.strong,{children:\"GTM Container ID\"}),\".\"]}),`\n`,(0,a.jsx)(t,{number:3,title:\"Install the container in your Nextjs app\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"This is surprisingly the simplest step. Next has an example \",(0,a.jsx)(e.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/with-google-tag-manager\",children:\"here\"}),\". All you have to do is inject the GTM script in your \",(0,a.jsx)(e.code,{children:\"pages\\\\_app.js\"}),\" file using the next/script component.\"]}),`\n`,(0,a.jsx)(e.p,{children:\"The Next example also shows that you can manually fire a page view based on a route change event but that is unnecessary - you should just configure GTM to trigger on a history change event as outlined in step 4 below. All you have to do is configure the code below.\"}),`\n`,(0,a.jsxs)(l,{children:[(0,a.jsx)(e.div,{className:\"rehype-code-title\",children:\"_app.js\"}),(0,a.jsx)(e.pre,{children:(0,a.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-title class_\",children:\"Script\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'next/script'\"}),`;\n`,(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,a.jsx)(e.span,{className:\"hljs-title class_\",children:\"ThemeProvider\"}),\" } \",(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'next-themes'\"}),`;\n`,(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,a.jsx)(e.span,{className:\"hljs-title class_\",children:\"Layout\"}),\" } \",(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'../components/Layout'\"}),`;\n`,(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'../styles/index.css'\"}),`;\n\n`,(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-title function_\",children:\"MyApp\"}),\"(\",(0,a.jsx)(e.span,{className:\"hljs-params\",children:\"{ Component, pageProps }\"}),`) {\n  `,(0,a.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,a.jsxs)(e.span,{className:\"xml\",children:[(0,a.jsx)(e.span,{className:\"hljs-tag\",children:\"<>\"}),`\n      {/* Google Tag Manager */}\n      `,(0,a.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(e.span,{className:\"hljs-name\",children:\"Script\"}),`\n        `,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"id\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'gtm'\"}),`\n        `,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"strategy\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'afterInteractive'\"}),`\n        `,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"dangerouslySetInnerHTML\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"{{\"}),`\n          `,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"__html:\"}),\" `\\n            (\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"function\"}),\"(\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"w\"}),\",\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"d\"}),\",\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"s\"}),\",\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"l\"}),\",\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"i\"}),\"){\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"w\"}),\"[\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"l\"}),\"]=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"w[l]||[];w[l].push({\"}),\"'\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"gtm.start\"}),\"'\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\":\"}),`\n            `,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"new\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"Date\"}),\"()\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\".getTime\"}),\"(),\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"event:\"}),\"'\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"gtm.js\"}),\"'});\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"var\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"f\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"d.getElementsByTagName(s)[0],\"}),`\n            `,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"j\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"d.createElement(s),dl\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"l!\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'dataLayer'\"}),\"?'&\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"l\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'+l:'\"}),\"';\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"j.async\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"true;j.src\"}),`=\n            `,(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'https://www.googletagmanager.com/gtm.js?id='\"}),\"+\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"i\"}),\"+\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"dl\"}),\";\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"f.parentNode.insertBefore\"}),\"(\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"j\"}),\",\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"f\"}),`);\n            })(`,(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"window\"}),\",\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"document\"}),\",'\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"script\"}),\"','\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"dataLayer\"}),\"', '${\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"process.env.NEXT_PUBLIC_GTM_ACCOUNT\"}),`}');\n          \\`,\n        }}\n      />`]}),(0,a.jsxs)(e.span,{className:\"xml\",children:[`\n      `,(0,a.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(e.span,{className:\"hljs-name\",children:\"ThemeProvider\"}),\" \",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"attribute\"}),\"=\",(0,a.jsx)(e.span,{className:\"hljs-string\",children:\"'class'\"}),\">\"]}),`\n        `,(0,a.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(e.span,{className:\"hljs-name\",children:\"Layout\"}),\">\"]}),`\n          `,(0,a.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(e.span,{className:\"hljs-name\",children:\"Component\"}),\" {\",(0,a.jsx)(e.span,{className:\"hljs-attr\",children:\"...pageProps\"}),\"} />\"]}),`\n        `,(0,a.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(e.span,{className:\"hljs-name\",children:\"Layout\"}),\">\"]}),`\n      `,(0,a.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(e.span,{className:\"hljs-name\",children:\"ThemeProvider\"}),\">\"]}),`\n    `,(0,a.jsx)(e.span,{className:\"hljs-tag\",children:\"</>\"})]})]}),`\n  );\n}\n`]})})]}),`\n`,(0,a.jsx)(e.p,{children:\"That's it! Google Tag Manager is installed in your Nextjs app assuming you have set your envronment variable to your GTM Container ID.\"}),`\n`,(0,a.jsx)(t,{number:4,title:\"Add and publish your tags\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"The rest of the work is done by configuring Google Tag Manager. That is the power of GTM - your coding is done - the rest is all configuration. Most Tag Manager implementations start with a Google Analytics page view tag deployment. Here are step by step instructions for \",(0,a.jsx)(e.a,{href:\"https://support.google.com/tagmanager/answer/6107124\",children:\"how to deploy a Google Analytics tag\"}),\".\"]}),`\n`,(0,a.jsxs)(e.p,{children:[`There is a significant \"gotcha\" for Nextjs apps - actually all \"Single Page Apps\" (SPAs). That's because of how SPA's work, and not related to Nextjs per se - when you navigate pages in Nextjs the `,(0,a.jsx)(e.strong,{children:\"page view doesn't fire\"}),` because the page didn't change! If you'd like to fire GTM correctly on each page navigation, be sure to enable the \"History Change\" trigger, as described `,(0,a.jsx)(e.a,{href:\"https://support.google.com/tagmanager/answer/7679322?hl=en\",children:\"here\"}),\".\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Your configuration in GTM should look like this as a bare minumum:\"}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://danstroot.imgix.net/assets/snippets/img/gtm-setup.png\",alt:\"GTM Setup\"})}),`\n`,(0,a.jsxs)(e.p,{children:[\"That's it! Now if you want to get fancy and show your Google Analytics stats inside your site \",(0,a.jsx)(e.a,{href:\"/snippets/google-analytics-api\",children:\"check this out!\"})]})]})}function b(n={}){let{wrapper:e}=n.components||{};return e?(0,a.jsx)(e,Object.assign({},n,{children:(0,a.jsx)(d,n)})):d(n)}var G=b;function o(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f(M);})();\n;return Component;"
    },
    "_id": "snippets/google-tag-manager.mdx",
    "_raw": {
      "sourceFilePath": "snippets/google-tag-manager.mdx",
      "sourceFileName": "google-tag-manager.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/google-tag-manager"
    },
    "type": "Snippet",
    "slug": "/snippets/google-tag-manager",
    "slugAsParams": "google-tag-manager",
    "stats": {
      "text": "5 min read",
      "minutes": 4.275,
      "time": 256500,
      "words": 855
    }
  },
  {
    "title": "Nextjs Hotkeys",
    "summary": "Here is the easiest way to implement \"hot keys\" in a Nextjs app using the app router.",
    "icon": "ts",
    "date": "2023-08-29T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript",
      "React Hook",
      "React Component"
    ],
    "body": {
      "raw": "\nHere is the easiest way to implement \"hot keys\" in a Nextjs app. This example is specifically for the new Nextjs app router in Nextjs 13. We will use the Next router and a hook called \"useHotkeys\" from the [Mantine hooks](https://mantine.dev/pages/getting-started/) package.\n\nIn the example below I will use the \"/\" key to navigate to my application's search route from anywhere in my site.\n\n<CodeBlock>\n\n```JavaScript:hotkeys.ts\nuse client'\n\nimport { useRouter } from 'next/navigation'\nimport { useHotkeys } from '@mantine/hooks'\n\nexport const Hotkeys = () => {\n  const router = useRouter()\n  useHotkeys([['/', () => router.push(`/search`)]])\n\n  return null\n}\n```\n\n</CodeBlock>\n\n### Usage\n\nThen simply import the Hotkeys component in your layout, or maybe in your site header component. For simplicity let's just add it to our layout:\n\n<CodeBlock>\n\n```JavaScript:cnExample.tsx\nimport '@/styles/globals.css'\nimport { Hotkeys } from '@/components/Hotkeys'\n\nexport const metadata: Metadata = {\n  title: \"Cool Site\"\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n\n    <html lang=\"en\">\n      <body>\n        <Hotkeys />\n        {children}\n      </body>\n    </html>\n  )\n}\n```\n\n</CodeBlock>\n\nAnd Voila! Instant hotkeys in your app.\n",
      "code": "var Component=(()=>{var ln=Object.create;var D=Object.defineProperty;var un=Object.getOwnPropertyDescriptor;var cn=Object.getOwnPropertyNames;var fn=Object.getPrototypeOf,mn=Object.prototype.hasOwnProperty;var G=(l,t)=>()=>(t||l((t={exports:{}}).exports,t),t.exports),pn=(l,t)=>{for(var m in t)D(l,m,{get:t[m],enumerable:!0})},ye=(l,t,m,g)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let v of cn(t))!mn.call(l,v)&&v!==m&&D(l,v,{get:()=>t[v],enumerable:!(g=un(t,v))||g.enumerable});return l};var _n=(l,t,m)=>(m=l!=null?ln(fn(l)):{},ye(t||!l||!l.__esModule?D(m,\"default\",{value:l,enumerable:!0}):m,l)),bn=l=>ye(D({},\"__esModule\",{value:!0}),l);var Te=G((Tn,Ne)=>{Ne.exports=React});var Ce=G(q=>{\"use strict\";(function(){\"use strict\";var l=Te(),t=Symbol.for(\"react.element\"),m=Symbol.for(\"react.portal\"),g=Symbol.for(\"react.fragment\"),v=Symbol.for(\"react.strict_mode\"),z=Symbol.for(\"react.profiler\"),X=Symbol.for(\"react.provider\"),J=Symbol.for(\"react.context\"),j=Symbol.for(\"react.forward_ref\"),F=Symbol.for(\"react.suspense\"),A=Symbol.for(\"react.suspense_list\"),w=Symbol.for(\"react.memo\"),I=Symbol.for(\"react.lazy\"),we=Symbol.for(\"react.offscreen\"),K=Symbol.iterator,Ve=\"@@iterator\";function ke(e){if(e===null||typeof e!=\"object\")return null;var n=K&&e[K]||e[Ve];return typeof n==\"function\"?n:null}var N=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function p(e){{for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Oe(\"error\",e,r)}}function Oe(e,n,r){{var i=N.ReactDebugCurrentFrame,d=i.getStackAddendum();d!==\"\"&&(n+=\"%s\",r=r.concat([d]));var u=r.map(function(s){return String(s)});u.unshift(\"Warning: \"+n),Function.prototype.apply.call(console[e],console,u)}}var Se=!1,Pe=!1,De=!1,Fe=!1,Ae=!1,Z;Z=Symbol.for(\"react.module.reference\");function Ie(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===g||e===z||Ae||e===v||e===F||e===A||Fe||e===we||Se||Pe||De||typeof e==\"object\"&&e!==null&&(e.$$typeof===I||e.$$typeof===w||e.$$typeof===X||e.$$typeof===J||e.$$typeof===j||e.$$typeof===Z||e.getModuleId!==void 0))}function Me(e,n,r){var i=e.displayName;if(i)return i;var d=n.displayName||n.name||\"\";return d!==\"\"?r+\"(\"+d+\")\":r}function Q(e){return e.displayName||\"Context\"}function h(e){if(e==null)return null;if(typeof e.tag==\"number\"&&p(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case g:return\"Fragment\";case m:return\"Portal\";case z:return\"Profiler\";case v:return\"StrictMode\";case F:return\"Suspense\";case A:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case J:var n=e;return Q(n)+\".Consumer\";case X:var r=e;return Q(r._context)+\".Provider\";case j:return Me(e,e.render,\"ForwardRef\");case w:var i=e.displayName||null;return i!==null?i:h(e.type)||\"Memo\";case I:{var d=e,u=d._payload,s=d._init;try{return h(s(u))}catch{return null}}}return null}var y=Object.assign,E=0,ee,ne,te,re,ae,ie,oe;function se(){}se.__reactDisabledLog=!0;function We(){{if(E===0){ee=console.log,ne=console.info,te=console.warn,re=console.error,ae=console.group,ie=console.groupCollapsed,oe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:se,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}E++}}function Ye(){{if(E--,E===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},e,{value:ee}),info:y({},e,{value:ne}),warn:y({},e,{value:te}),error:y({},e,{value:re}),group:y({},e,{value:ae}),groupCollapsed:y({},e,{value:ie}),groupEnd:y({},e,{value:oe})})}E<0&&p(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var M=N.ReactCurrentDispatcher,W;function V(e,n,r){{if(W===void 0)try{throw Error()}catch(d){var i=d.stack.trim().match(/\\n( *(at )?)/);W=i&&i[1]||\"\"}return`\n`+W+e}}var Y=!1,k;{var $e=typeof WeakMap==\"function\"?WeakMap:Map;k=new $e}function de(e,n){if(!e||Y)return\"\";{var r=k.get(e);if(r!==void 0)return r}var i;Y=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var u;u=M.current,M.current=null,We();try{if(n){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(s,[])}catch(x){i=x}Reflect.construct(e,[],s)}else{try{s.call()}catch(x){i=x}e.call(s.prototype)}}else{try{throw Error()}catch(x){i=x}e()}}catch(x){if(x&&i&&typeof x.stack==\"string\"){for(var o=x.stack.split(`\n`),_=i.stack.split(`\n`),c=o.length-1,f=_.length-1;c>=1&&f>=0&&o[c]!==_[f];)f--;for(;c>=1&&f>=0;c--,f--)if(o[c]!==_[f]){if(c!==1||f!==1)do if(c--,f--,f<0||o[c]!==_[f]){var b=`\n`+o[c].replace(\" at new \",\" at \");return e.displayName&&b.includes(\"<anonymous>\")&&(b=b.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&k.set(e,b),b}while(c>=1&&f>=0);break}}}finally{Y=!1,M.current=u,Ye(),Error.prepareStackTrace=d}var C=e?e.displayName||e.name:\"\",ge=C?V(C):\"\";return typeof e==\"function\"&&k.set(e,ge),ge}function Le(e,n,r){return de(e,!1)}function He(e){var n=e.prototype;return!!(n&&n.isReactComponent)}function O(e,n,r){if(e==null)return\"\";if(typeof e==\"function\")return de(e,He(e));if(typeof e==\"string\")return V(e);switch(e){case F:return V(\"Suspense\");case A:return V(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case j:return Le(e.render);case w:return O(e.type,n,r);case I:{var i=e,d=i._payload,u=i._init;try{return O(u(d),n,r)}catch{}}}return\"\"}var S=Object.prototype.hasOwnProperty,le={},ue=N.ReactDebugCurrentFrame;function P(e){if(e){var n=e._owner,r=O(e.type,e._source,n?n.type:null);ue.setExtraStackFrame(r)}else ue.setExtraStackFrame(null)}function Ue(e,n,r,i,d){{var u=Function.call.bind(S);for(var s in e)if(u(e,s)){var o=void 0;try{if(typeof e[s]!=\"function\"){var _=Error((i||\"React class\")+\": \"+r+\" type `\"+s+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[s]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw _.name=\"Invariant Violation\",_}o=e[s](n,s,i,r,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(c){o=c}o&&!(o instanceof Error)&&(P(d),p(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",i||\"React class\",r,s,typeof o),P(null)),o instanceof Error&&!(o.message in le)&&(le[o.message]=!0,P(d),p(\"Failed %s type: %s\",r,o.message),P(null))}}}var Be=Array.isArray;function $(e){return Be(e)}function Ge(e){{var n=typeof Symbol==\"function\"&&Symbol.toStringTag,r=n&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return r}}function qe(e){try{return ce(e),!1}catch{return!0}}function ce(e){return\"\"+e}function fe(e){if(qe(e))return p(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",Ge(e)),ce(e)}var R=N.ReactCurrentOwner,ze={key:!0,ref:!0,__self:!0,__source:!0},me,pe,L;L={};function Xe(e){if(S.call(e,\"ref\")){var n=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(n&&n.isReactWarning)return!1}return e.ref!==void 0}function Je(e){if(S.call(e,\"key\")){var n=Object.getOwnPropertyDescriptor(e,\"key\").get;if(n&&n.isReactWarning)return!1}return e.key!==void 0}function Ke(e,n){if(typeof e.ref==\"string\"&&R.current&&n&&R.current.stateNode!==n){var r=h(R.current.type);L[r]||(p('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',h(R.current.type),e.ref),L[r]=!0)}}function Ze(e,n){{var r=function(){me||(me=!0,p(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};r.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:r,configurable:!0})}}function Qe(e,n){{var r=function(){pe||(pe=!0,p(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};r.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:r,configurable:!0})}}var en=function(e,n,r,i,d,u,s){var o={$$typeof:t,type:e,key:n,ref:r,props:s,_owner:u};return o._store={},Object.defineProperty(o._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(o,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(o,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:d}),Object.freeze&&(Object.freeze(o.props),Object.freeze(o)),o};function nn(e,n,r,i,d){{var u,s={},o=null,_=null;r!==void 0&&(fe(r),o=\"\"+r),Je(n)&&(fe(n.key),o=\"\"+n.key),Xe(n)&&(_=n.ref,Ke(n,d));for(u in n)S.call(n,u)&&!ze.hasOwnProperty(u)&&(s[u]=n[u]);if(e&&e.defaultProps){var c=e.defaultProps;for(u in c)s[u]===void 0&&(s[u]=c[u])}if(o||_){var f=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;o&&Ze(s,f),_&&Qe(s,f)}return en(e,o,_,d,i,R.current,s)}}var H=N.ReactCurrentOwner,_e=N.ReactDebugCurrentFrame;function T(e){if(e){var n=e._owner,r=O(e.type,e._source,n?n.type:null);_e.setExtraStackFrame(r)}else _e.setExtraStackFrame(null)}var U;U=!1;function B(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===t}function be(){{if(H.current){var e=h(H.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function tn(e){{if(e!==void 0){var n=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),r=e.lineNumber;return`\n\nCheck your code at `+n+\":\"+r+\".\"}return\"\"}}var he={};function rn(e){{var n=be();if(!n){var r=typeof e==\"string\"?e:e.displayName||e.name;r&&(n=`\n\nCheck the top-level render call using <`+r+\">.\")}return n}}function xe(e,n){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var r=rn(n);if(he[r])return;he[r]=!0;var i=\"\";e&&e._owner&&e._owner!==H.current&&(i=\" It was passed a child from \"+h(e._owner.type)+\".\"),T(e),p('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,i),T(null)}}function ve(e,n){{if(typeof e!=\"object\")return;if($(e))for(var r=0;r<e.length;r++){var i=e[r];B(i)&&xe(i,n)}else if(B(e))e._store&&(e._store.validated=!0);else if(e){var d=ke(e);if(typeof d==\"function\"&&d!==e.entries)for(var u=d.call(e),s;!(s=u.next()).done;)B(s.value)&&xe(s.value,n)}}}function an(e){{var n=e.type;if(n==null||typeof n==\"string\")return;var r;if(typeof n==\"function\")r=n.propTypes;else if(typeof n==\"object\"&&(n.$$typeof===j||n.$$typeof===w))r=n.propTypes;else return;if(r){var i=h(n);Ue(r,e.props,\"prop\",i,e)}else if(n.PropTypes!==void 0&&!U){U=!0;var d=h(n);p(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",d||\"Unknown\")}typeof n.getDefaultProps==\"function\"&&!n.getDefaultProps.isReactClassApproved&&p(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function on(e){{for(var n=Object.keys(e.props),r=0;r<n.length;r++){var i=n[r];if(i!==\"children\"&&i!==\"key\"){T(e),p(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",i),T(null);break}}e.ref!==null&&(T(e),p(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),T(null))}}function sn(e,n,r,i,d,u){{var s=Ie(e);if(!s){var o=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(o+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var _=tn(d);_?o+=_:o+=be();var c;e===null?c=\"null\":$(e)?c=\"array\":e!==void 0&&e.$$typeof===t?(c=\"<\"+(h(e.type)||\"Unknown\")+\" />\",o=\" Did you accidentally export a JSX literal instead of a component?\"):c=typeof e,p(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",c,o)}var f=nn(e,n,r,d,u);if(f==null)return f;if(s){var b=n.children;if(b!==void 0)if(i)if($(b)){for(var C=0;C<b.length;C++)ve(b[C],e);Object.freeze&&Object.freeze(b)}else p(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ve(b,e)}return e===g?on(f):an(f),f}}var dn=sn;q.Fragment=g,q.jsxDEV=dn})()});var Re=G((En,Ee)=>{\"use strict\";Ee.exports=Ce()});var yn={};pn(yn,{default:()=>vn,frontmatter:()=>hn});var a=_n(Re()),hn={title:\"Nextjs Hotkeys\",published:!0,date:\"2023-08-29\",summary:'Here is the easiest way to implement \"hot keys\" in a Nextjs app using the app router.',icon:\"ts\",tags:[\"Javascript\",\"React Hook\",\"React Component\"]};function je(l){let t=Object.assign({p:\"p\",a:\"a\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\"},l.components),{CodeBlock:m}=t;return m||gn(\"CodeBlock\",!0,\"19:1-35:13\"),(0,a.jsxDEV)(a.Fragment,{children:[(0,a.jsxDEV)(t.p,{children:['Here is the easiest way to implement \"hot keys\" in a Nextjs app. This example is specifically for the new Nextjs app router in Nextjs 13. We will use the Next router and a hook called \"useHotkeys\" from the ',(0,a.jsxDEV)(t.a,{href:\"https://mantine.dev/pages/getting-started/\",children:\"Mantine hooks\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:15,columnNumber:207},this),\" package.\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:`In the example below I will use the \"/\" key to navigate to my application's search route from anywhere in my site.`},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,a.jsxDEV)(m,{children:[(0,a.jsxDEV)(t.div,{className:\"rehype-code-title\",children:\"hotkeys.ts\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{className:\"hljs language-JavaScript\",children:[\"use client\",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:`'\n\nimport { useRouter } from '`},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\"next/navigation\",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:`'\nimport { useHotkeys } from '`},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\"@mantine/hooks\",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:`'\n\nexport const Hotkeys = () => {\n  const router = useRouter()\n  useHotkeys([['`},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\"/\",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:`', () => router.push(\\`/search\\`)]])\n\n  return null\n}\n`},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:21,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:21,columnNumber:1},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.h3,{id:\"usage\",children:\"Usage\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:\"Then simply import the Hotkeys component in your layout, or maybe in your site header component. For simplicity let's just add it to our layout:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,a.jsxDEV)(m,{children:[(0,a.jsxDEV)(t.div,{className:\"rehype-code-title\",children:\"cnExample.tsx\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),(0,a.jsxDEV)(t.pre,{children:(0,a.jsxDEV)(t.code,{className:\"hljs language-JavaScript\",children:[(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"import\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:\"'@/styles/globals.css'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n`,(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"import\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" { \",(0,a.jsxDEV)(t.span,{className:\"hljs-title class_\",children:\"Hotkeys\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" } \",(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"from\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:\"'@/components/Hotkeys'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n\n`,(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"export\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"const\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-attr\",children:\"metadata\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\": \",(0,a.jsxDEV)(t.span,{className:\"hljs-title class_\",children:\"Metadata\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),` = {\n  `,(0,a.jsxDEV)(t.span,{className:\"hljs-attr\",children:\"title\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\": \",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:'\"Cool Site\"'},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n}\n\n`,(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"export\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"default\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"function\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-title function_\",children:\"RootLayout\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\"(\",(0,a.jsxDEV)(t.span,{className:\"hljs-params\",children:`{\n  children,\n}: {\n  children: React.ReactNode\n}`},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`) {\n  `,(0,a.jsxDEV)(t.span,{className:\"hljs-keyword\",children:\"return\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),` (\n\n    `,(0,a.jsxDEV)(t.span,{className:\"xml\",children:[(0,a.jsxDEV)(t.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsxDEV)(t.span,{className:\"hljs-name\",children:\"html\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" \",(0,a.jsxDEV)(t.span,{className:\"hljs-attr\",children:\"lang\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\"=\",(0,a.jsxDEV)(t.span,{className:\"hljs-string\",children:'\"en\"'},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n      `,(0,a.jsxDEV)(t.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsxDEV)(t.span,{className:\"hljs-name\",children:\"body\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n        `,(0,a.jsxDEV)(t.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsxDEV)(t.span,{className:\"hljs-name\",children:\"Hotkeys\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\" />\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n        {children}\n      `,(0,a.jsxDEV)(t.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsxDEV)(t.span,{className:\"hljs-name\",children:\"body\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n    `,(0,a.jsxDEV)(t.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsxDEV)(t.span,{className:\"hljs-name\",children:\"html\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this),`\n  )\n}\n`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:43,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:43,columnNumber:1},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,a.jsxDEV)(t.p,{children:\"And Voila! Instant hotkeys in your app.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:70,columnNumber:1},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\",lineNumber:1,columnNumber:1},this)}function xn(l={}){let{wrapper:t}=l.components||{};return t?(0,a.jsxDEV)(t,Object.assign({},l,{children:(0,a.jsxDEV)(je,l,void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this)}),void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx\"},this):je(l)}var vn=xn;function gn(l,t,m){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+l+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(m?\"\\nIt\\u2019s referenced in your code at `\"+m+\"` in `/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-ca14930d-d27d-4d99-a83f-e266f5ec7ab5.mdx`\":\"\"))}return bn(yn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
    },
    "_id": "snippets/hotkeys.mdx",
    "_raw": {
      "sourceFilePath": "snippets/hotkeys.mdx",
      "sourceFileName": "hotkeys.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/hotkeys"
    },
    "type": "Snippet",
    "slug": "/snippets/hotkeys",
    "slugAsParams": "hotkeys",
    "stats": {
      "text": "1 min read",
      "minutes": 0.895,
      "time": 53700,
      "words": 179
    }
  },
  {
    "title": "Infinite Scroll",
    "summary": "This is a clean, understandable way to implement an infinite scroll in a React/Next application. Cheers!",
    "icon": "react",
    "date": "2021-12-23T00:00:00.000Z",
    "published": false,
    "tags": [
      "Javascript",
      "React Component"
    ],
    "body": {
      "raw": "\nThis is a simple example of how to implement an infinite scrolling application in React. What we are doing is tracking if an image is visible in the viewport (actually the image **before** the last image ). When it is visible, increment the page count - which in turn will kick off another API call and get more images.\n\nA fully working codebase is [here](https://github.com/dstroot/react-infinite-scroll), and deployed on Netlify [here](). In this example we are using images from\n\n<Step number={1} title='The \"driver\" function' />\n\nThis simple function drives our \"infinite scroll\". If the visible image in the viewport is the next to last image, then increment the page (which kicks off another API call as you will see in the next step).\n\n<CodeBlock>\n\n```javascript\nconst onIsVisible = (index) => {\n  if (index === images.length - 1) {\n    setPage((page) => page + 1);\n  }\n};\n```\n\n</CodeBlock>\n\n<Step number={2} title='When the page changes run the effect and get more photos!' />\n\nThis effect is run each time a page changes (is incremented). It will fetch more photos from the API and concatenate them to our images array.\n\n<CodeBlock>\n\n```javascript\nuseEffect(() => {\n  const fetchPhotos = async (page) => {\n    setLoading(true);\n    try {\n      const data = await fetch(`/api/photos?page=${page}`);\n      const morePhotos = await data.json();\n      setImages((photos) => {\n        return photos.concat(morePhotos); // notice concatination for infinite scroll\n      });\n    } catch (e) {\n      setError(true);\n    }\n    setLoading(false);\n  };\n  fetchPhotos(page);\n}, [page]); // if the page changes run the effect\n```\n\n</CodeBlock>\n\n<Step number={3} title='Map the array of images' />\n\nThis puts it all together. Get some images, and as the user scrolls down, when the next to last image is visible, get more images and concatenate them to our images array. This will cause React to update the DOM with the new images.\n\n<CodeBlock>\n\n```javascript\nimport React, { useEffect } from 'react';\nimport { ImageContainer } from './components/ImageContainer';\nimport './App.css';\n\nfunction App() {\n  const [loading, setLoading] = React.useState(false);\n  const [images, setImages] = React.useState([]);\n  const [error, setError] = React.useState(false);\n  const [page, setPage] = React.useState(1);\n\n  // This is our \"infinite scroll\".  If the visible image is the next\n  // to last image, then increment the page, which kicks off another API call\n  const onIsVisible = (index) => {\n    if (index === images.length - 1) {\n      setPage((page) => page + 1);\n    }\n  };\n\n  const checkForError = (response) => {\n    if (!response.ok) throw Error(response.statusText);\n    return response;\n  };\n\n  useEffect(() => {\n    const fetchPhotos = async (page) => {\n      setLoading(true);\n      try {\n        const result = await fetch(`/.netlify/functions/photos?page=${page}`);\n        const photoResult = await checkForError(result).json();\n        setImages((photos) => {\n          return photos.concat(photoResult); // notice concatination for infinite scroll\n        });\n      } catch (e) {\n        setError(true);\n      }\n      setLoading(false);\n    };\n    fetchPhotos(page);\n  }, [page]); // if \"page\" changes run effect\n\n  return (\n    <div className='app'>\n      <div className='container'>\n        {error && <div>Error occured. Please refresh page and try again.</div>}\n        {images.map((res, index) => {\n          return (\n            <div key={`${res.id}-${index}`} className='wrapper'>\n              <ImageContainer\n                src={res.urls.regular}\n                thumb={res.urls.thumb}\n                height={res.height}\n                width={res.width}\n                alt={res.alt_description}\n                url={res.links.html}\n                onIsVisible={() => onIsVisible(index)}\n              />\n            </div>\n          );\n        })}\n        {loading && <div>Loading...</div>}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n```\n\n</CodeBlock>\n\n<CodeBlock>\n\n```javascript\nimport React from 'react';\nimport { Image } from '../Image';\nimport useIntersectionObserver from '../../hooks/use-intersection-observer';\nimport './image-container.css';\n\nexport const ImageContainer = ({ src, thumb, height, width, alt, url, onIsVisible }) => {\n  const ref = React.useRef();\n  const [isVisible, setIsVisible] = React.useState(false);\n\n  useIntersectionObserver({\n    target: ref,\n    onIntersect: ([{ isIntersecting }], observerElement) => {\n      if (isIntersecting) {\n        if (!isVisible) {\n          onIsVisible();\n          setIsVisible(true);\n        }\n        observerElement.unobserve(ref.current);\n      }\n    },\n  });\n\n  const aspectRatio = (height / width) * 100;\n\n  return (\n    <a\n      href={url}\n      ref={ref}\n      rel='noopener noreferrer'\n      target='_BLANK'\n      className='image-container'\n      style={{ paddingBottom: `${aspectRatio}%` }}\n    >\n      {isVisible && <Image src={src} thumb={thumb} alt={alt} />}\n    </a>\n  );\n};\n```\n\n</CodeBlock>\n\n<CodeBlock>\n\n```javascript\nimport { useEffect } from 'react';\n\n/**\nThe Intersection Observer API allows you to configure a callback that is called whenever \none element, called the target, intersects either the device viewport or a specified \nelement; for the purpose of this API, this is called the root element or root. \n\nrootMargin: Margin around the root. Serves to grow or shrink each side of the root \nelement's bounding box before computing intersections. \n\nthreshold: at what percentage of the target's visibility the observer's callback \nshould be executed\n */\n\nconst useIntersectionObserver = ({\n  target,\n  onIntersect, // callback\n  threshold = 0.2, // when 20% visible\n  rootMargin = '0px', // don't adjust viewport margin\n}) => {\n  useEffect(() => {\n    if (!target) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold,\n    });\n\n    // Once you have created the observer, you need to give it a target element to watch\n    const current = target.current;\n    observer.observe(current);\n\n    // clean up our observer\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\n\nexport default useIntersectionObserver;\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var m=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),f=(a,s)=>{for(var n in s)r(a,n,{get:s[n],enumerable:!0})},t=(a,s,n,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of j(s))!g.call(a,c)&&c!==n&&r(a,c,{get:()=>s[c],enumerable:!(l=p(s,c))||l.enumerable});return a};var w=(a,s,n)=>(n=a!=null?m(N(a)):{},t(s||!a||!a.__esModule?r(n,\"default\",{value:a,enumerable:!0}):n,a)),y=a=>t(r({},\"__esModule\",{value:!0}),a);var h=u((x,i)=>{i.exports=_jsx_runtime});var v={};f(v,{default:()=>_,frontmatter:()=>k});var e=w(h()),k={title:\"Infinite Scroll\",summary:\"This is a clean, understandable way to implement an infinite scroll in a React/Next application. Cheers!\",date:\"2021-12-23\",published:!1,icon:\"react\",tags:[\"Javascript\",\"React Component\"]};function o(a){let s=Object.assign({p:\"p\",strong:\"strong\",a:\"a\",pre:\"pre\",code:\"code\",span:\"span\"},a.components),{Step:n,CodeBlock:l}=s;return l||d(\"CodeBlock\",!0),n||d(\"Step\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.p,{children:[\"This is a simple example of how to implement an infinite scrolling application in React. What we are doing is tracking if an image is visible in the viewport (actually the image \",(0,e.jsx)(s.strong,{children:\"before\"}),\" the last image ). When it is visible, increment the page count - which in turn will kick off another API call and get more images.\"]}),`\n`,(0,e.jsxs)(s.p,{children:[\"A fully working codebase is \",(0,e.jsx)(s.a,{href:\"https://github.com/dstroot/react-infinite-scroll\",children:\"here\"}),\", and deployed on Netlify \",(0,e.jsx)(s.a,{href:\"\",children:\"here\"}),\". In this example we are using images from\"]}),`\n`,(0,e.jsx)(n,{number:1,title:'The \"driver\" function'}),`\n`,(0,e.jsx)(s.p,{children:'This simple function drives our \"infinite scroll\". If the visible image in the viewport is the next to last image, then increment the page (which kicks off another API call as you will see in the next step).'}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"onIsVisible\"}),\" = (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"index\"}),`) => {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (index === images.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"length\"}),\" - \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`) {\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setPage\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"page\"}),\") =>\"]}),\" page + \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`);\n  }\n};\n`]})})}),`\n`,(0,e.jsx)(n,{number:2,title:\"When the page changes run the effect and get more photos!\"}),`\n`,(0,e.jsx)(s.p,{children:\"This effect is run each time a page changes (is incremented). It will fetch more photos from the API and concatenate them to our images array.\"}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetchPhotos\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"page\"}),`) => {\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setLoading\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"true\"}),`);\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"try\"}),` {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" data = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-string\",children:[\"`/api/photos?page=\",(0,e.jsx)(s.span,{className:\"hljs-subst\",children:\"${page}\"}),\"`\"]}),`);\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" morePhotos = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" data.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`();\n      `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setImages\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"photos\"}),\") =>\"]}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" photos.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"concat\"}),\"(morePhotos); \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// notice concatination for infinite scroll\"}),`\n      });\n    } `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"catch\"}),` (e) {\n      `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setError\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"true\"}),`);\n    }\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setLoading\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`);\n  };\n  `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetchPhotos\"}),`(page);\n}, [page]); `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// if the page changes run the effect\"}),`\n`]})})}),`\n`,(0,e.jsx)(n,{number:3,title:\"Map the array of images\"}),`\n`,(0,e.jsx)(s.p,{children:\"This puts it all together. Get some images, and as the user scrolls down, when the next to last image is visible, get more images and concatenate them to our images array. This will cause React to update the DOM with the new images.\"}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\", { useEffect } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"ImageContainer\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'./components/ImageContainer'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'./App.css'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"App\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [loading, setLoading] = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`);\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [images, setImages] = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useState\"}),`([]);\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [error, setError] = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`);\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [page, setPage] = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`);\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:'// This is our \"infinite scroll\".  If the visible image is the next'}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// to last image, then increment the page, which kicks off another API call\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"onIsVisible\"}),\" = (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"index\"}),`) => {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (index === images.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"length\"}),\" - \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`) {\n      `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setPage\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"page\"}),\") =>\"]}),\" page + \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`);\n    }\n  };\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"checkForError\"}),\" = (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"response\"}),`) => {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (!response.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"ok\"}),\") \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"throw\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Error\"}),\"(response.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"statusText\"}),`);\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` response;\n  };\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetchPhotos\"}),\" = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"page\"}),`) => {\n      `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setLoading\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"true\"}),`);\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"try\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" result = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-string\",children:[\"`/.netlify/functions/photos?page=\",(0,e.jsx)(s.span,{className:\"hljs-subst\",children:\"${page}\"}),\"`\"]}),`);\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" photoResult = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"checkForError\"}),\"(result).\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`();\n        `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setImages\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"photos\"}),\") =>\"]}),` {\n          `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" photos.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"concat\"}),\"(photoResult); \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// notice concatination for infinite scroll\"}),`\n        });\n      } `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"catch\"}),` (e) {\n        `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setError\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"true\"}),`);\n      }\n      `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setLoading\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`);\n    };\n    `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetchPhotos\"}),`(page);\n  }, [page]); `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:'// if \"page\" changes run effect'}),`\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'app'\"}),\">\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'container'\"}),\">\"]}),`\n        {error && `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),\"Error occured. Please refresh page and try again.\",(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`}\n        {images.map((res, index) => {\n          return (\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"key\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{\"}),\"`${\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"res.id\"}),\"}\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"-\"}),\"${\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"index\"}),\"}`} \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'wrapper'\"}),\">\"]}),`\n              `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"ImageContainer\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"src\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{res.urls.regular}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"thumb\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{res.urls.thumb}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"height\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{res.height}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"width\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{res.width}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"alt\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{res.alt_description}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"url\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{res.links.html}\"}),`\n                `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onIsVisible\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{()\"}),\" =>\"]}),` onIsVisible(index)}\n              />\n            `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n          );\n        })}\n        {loading && `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),\"Loading...\",(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`}\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]})]}),`\n  );\n}\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"App\"}),`;\n`]})})}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Image\"}),\" } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'../Image'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" useIntersectionObserver \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'../../hooks/use-intersection-observer'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'./image-container.css'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"ImageContainer\"}),\" = (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"{ src, thumb, height, width, alt, url, onIsVisible }\"}),`) => {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" ref = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useRef\"}),`();\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [isVisible, setIsVisible] = \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`);\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useIntersectionObserver\"}),`({\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"target\"}),`: ref,\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"onIntersect\"}),\": \",(0,e.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"[{ isIntersecting }], observerElement\"}),\") =>\"]}),` {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),` (isIntersecting) {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),` (!isVisible) {\n          `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"onIsVisible\"}),`();\n          `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"setIsVisible\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"true\"}),`);\n        }\n        observerElement.`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"unobserve\"}),\"(ref.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"current\"}),`);\n      }\n    },\n  });\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" aspectRatio = (height / width) * \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"100\"}),`;\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"a\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{url}\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"ref\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{ref}\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'noopener noreferrer'\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"target\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'_BLANK'\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'image-container'\"}),`\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"style\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"paddingBottom:\"}),\" `${\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"aspectRatio\"}),\"}%` }}\\n    >\"]}),`\n      {isVisible && `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Image\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"src\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{src}\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"thumb\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{thumb}\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"alt\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"{alt}\"}),\" />\"]}),`}\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"a\"}),\">\"]})]}),`\n  );\n};\n`]})})}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useEffect } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:`/**\nThe Intersection Observer API allows you to configure a callback that is called whenever \none element, called the target, intersects either the device viewport or a specified \nelement; for the purpose of this API, this is called the root element or root. \n\nrootMargin: Margin around the root. Serves to grow or shrink each side of the root \nelement's bounding box before computing intersections. \n\nthreshold: at what percentage of the target's visibility the observer's callback \nshould be executed\n */`}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useIntersectionObserver\"}),\" = (\",(0,e.jsxs)(s.span,{className:\"hljs-params\",children:[`{\n  target,\n  onIntersect, // callback\n  threshold = `,(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"0.2\"}),\", // when \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"20\"}),`% visible\n  rootMargin = `,(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'0px'\"}),\", // don\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:`'t adjust viewport margin\n}) => {\n  useEffect(() => {\n    if (!target) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold,\n    });\n\n    // Once you have created the observer, you need to give it a target element to watch\n    const current = target.current;\n    observer.observe(current);\n\n    // clean up our observer\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\n\nexport default useIntersectionObserver;\n`})]})]})})})]})}function b(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(o,a)})):o(a)}var _=b;function d(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return y(v);})();\n;return Component;"
    },
    "_id": "snippets/infinite-scroll.mdx",
    "_raw": {
      "sourceFilePath": "snippets/infinite-scroll.mdx",
      "sourceFileName": "infinite-scroll.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/infinite-scroll"
    },
    "type": "Snippet",
    "slug": "/snippets/infinite-scroll",
    "slugAsParams": "infinite-scroll",
    "stats": {
      "text": "4 min read",
      "minutes": 3.84,
      "time": 230400,
      "words": 768
    }
  },
  {
    "title": "useIntersectionObserver",
    "summary": "The Intersection Observer API allows you to configure a callback that is called whenever an element intersects either the device viewport.",
    "icon": "react",
    "date": "2021-10-19T00:00:00.000Z",
    "published": true,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\nThe Intersection Observer API allows you to configure a callback that is called whenever an element, called the target, intersects either the device viewport or a specified element; for the purpose of this API, this is called the root element or root.\n\n- rootMargin: Margin around the root. Serves to grow or shrink each side of the root element's bounding box before computing intersections.\n- threshold: at what percentage of the target's visibility the observer's callback should be executed.\n\n<CodeBlock>\n\n```js\nimport { useEffect } from 'react';\n\nconst useIntersectionObserver = ({\n  target,\n  onIntersect, // callback\n  threshold = 0.2, // when 20% visible\n  rootMargin = '0px', // don't adjust viewport margin\n}) => {\n  useEffect(() => {\n    if (!target) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold,\n    });\n\n    // Once you have created the observer, you need to give it a target element to watch\n    const current = target.current;\n    observer.observe(current);\n\n    // clean up our observer\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\n\nexport default useIntersectionObserver;\n```\n\n</CodeBlock>\n\n<CodeBlock>\n\n```jsx\n<GitGist\n  gistURL={\n    'https://gist.githubusercontent.com/dstroot/94c152da31201f41ee8b550442ddbc0b/raw/3a23e00f7c861fe9d36d9e12289a6904ce2ad15e/useIntersectionObserver.js'\n  }\n/>\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),f=(t,e)=>{for(var r in e)o(t,r,{get:e[r],enumerable:!0})},a=(t,e,r,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of p(e))!b.call(t,s)&&s!==r&&o(t,s,{get:()=>e[s],enumerable:!(c=u(e,s))||c.enumerable});return t};var v=(t,e,r)=>(r=t!=null?d(m(t)):{},a(e||!t||!t.__esModule?o(r,\"default\",{value:t,enumerable:!0}):r,t)),j=t=>a(o({},\"__esModule\",{value:!0}),t);var i=g((O,l)=>{l.exports=_jsx_runtime});var y={};f(y,{default:()=>N,frontmatter:()=>w});var n=v(i()),w={title:\"useIntersectionObserver\",published:!0,date:\"2021-10-19\",summary:\"The Intersection Observer API allows you to configure a callback that is called whenever an element intersects either the device viewport.\",icon:\"react\",tags:[\"React Hook\"]};function h(t){let e=Object.assign({p:\"p\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\",span:\"span\"},t.components),{CodeBlock:r}=e;return r||k(\"CodeBlock\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"The Intersection Observer API allows you to configure a callback that is called whenever an element, called the target, intersects either the device viewport or a specified element; for the purpose of this API, this is called the root element or root.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"rootMargin: Margin around the root. Serves to grow or shrink each side of the root element's bounding box before computing intersections.\"}),`\n`,(0,n.jsx)(e.li,{children:\"threshold: at what percentage of the target's visibility the observer's callback should be executed.\"}),`\n`]}),`\n`,(0,n.jsx)(r,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useEffect } \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useIntersectionObserver\"}),\" = (\",(0,n.jsxs)(e.span,{className:\"hljs-params\",children:[`{\n  target,\n  onIntersect, // callback\n  threshold = `,(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"0.2\"}),\", // when \",(0,n.jsx)(e.span,{className:\"hljs-number\",children:\"20\"}),`% visible\n  rootMargin = `,(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'0px'\"}),\", // don\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:`'t adjust viewport margin\n}) => {\n  useEffect(() => {\n    if (!target) {\n      return;\n    }\n\n    const observer = new IntersectionObserver(onIntersect, {\n      rootMargin,\n      threshold,\n    });\n\n    // Once you have created the observer, you need to give it a target element to watch\n    const current = target.current;\n    observer.observe(current);\n\n    // clean up our observer\n    return () => {\n      observer.unobserve(current);\n    };\n  });\n};\n\nexport default useIntersectionObserver;\n`})]})]})})}),`\n`,(0,n.jsx)(r,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-jsx\",children:[\"<\",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"GitGist\"}),`\n  gistURL={\n    `,(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'https://gist.githubusercontent.com/dstroot/94c152da31201f41ee8b550442ddbc0b/raw/3a23e00f7c861fe9d36d9e12289a6904ce2ad15e/useIntersectionObserver.js'\"}),`\n  }\n/>\n`]})})})]})}function x(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(h,t)})):h(t)}var N=x;function k(t,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+t+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j(y);})();\n;return Component;"
    },
    "_id": "snippets/intersection-observer.mdx",
    "_raw": {
      "sourceFilePath": "snippets/intersection-observer.mdx",
      "sourceFileName": "intersection-observer.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/intersection-observer"
    },
    "type": "Snippet",
    "slug": "/snippets/intersection-observer",
    "slugAsParams": "intersection-observer",
    "stats": {
      "text": "1 min read",
      "minutes": 0.895,
      "time": 53700,
      "words": 179
    }
  },
  {
    "title": "Parsing MDX files",
    "summary": "Compile and bundler MDX files with mdx-bundler",
    "icon": "mdx",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\nMDX is an extension of Markdown that allows you to import and write JSX in your markdown documents.\n\nMarkdown can be used for creating web pages, documents or any text that needs to be transformed into other formats like For web applications, Markdown needs to be transformed into HTML. But, Using Markdown you can only use HTML elements.\n\nMDX is an extension of Markdown that allows you to import and write JSX in your markdown documents. So, MDX takes the format a step further and allows us to include our own custom React components!\n\nToday, MDX Bundler is arguably the best option for processing MDX in a Nextjs applicattion. mdx-bundler uses [esbuild](https://esbuild.github.io/), so it's VERY fast and supports TypeScript files (for the dependencies of your MDX files). It also uses [xdm](https://wooorm.com/xdm/) which is a more modern and powerful MDX compiler with no extra runtime requirements.\n\nHere we go -\n\n<Step number={1} title={'Install the dependencies for mdx-bundler'} />\n\n<CodeBlock>\n\n```bash:Terminal\n# If you're using npm\nnpm install mdx-bundler esbuild\n\n# If you're using yarn\nyarn add mdx-bundler esbuild\n```\n\n</CodeBlock>\n\n<Step number={2} title={'Create a directory with MDX files'} />\n\n<CodeBlock>\n\n```bash:Terminal\n\\posts\n  \\file-1.mdx\n  \\file-2.mdx\n  \\file-3.mdx\n```\n\n</CodeBlock>\n\n<Step number={3} title='Install necessary Plugins' />\n\n<CodeBlock>\n\n```bash:Terminal\n# If you're using npm\nnpm install reading-time gray-matter rehype-slug rehype-code-titles rehype-autolink-headings rehype-prism-plus\n\n# If you're using yarn\n\nyarn add reading-time gray-matter rehype-slug rehype-code-titles rehype-autolink-headings rehype-prism-plus\n\n```\n\n</CodeBlock>\n\n- [reading-time](https://www.npmjs.com/package/reading-time) Estimate an article's reading time\n- [gray-matter](https://www.npmjs.com/package/gray-matter/v/0.5.2) Extend front-matter metadata\n- [rehype-slug](https://www.npmjs.com/package/rehype-slug) Plugin to add id's to headings\n- [rehype-code-titles](https://github.com/rockchalkwushock/rehype-code-titles) Plugin to add titles for code blocks\n- [rehype-prism-plus](https://www.npmjs.com/package/rehype-prism-plus/v/1.0.0) Plugin to add code highlighting\n- [rehype-autolink-headings](https://www.npmjs.com/package/rehype-autolink-headings) Plugin to automatically add link to headings\n\n<Step number={4} title='Parse all MDX files' />\n\n<CodeBlock>\n\n```Javascript:mdx.js\nimport matter from 'gray-matter';\nimport readingTime from 'reading-time';\nimport { join } from 'path';\nimport { bundleMDX } from 'mdx-bundler';\nimport { readdirSync, readFileSync } from 'fs';\n\n/* Rehype Plugins */\nimport rehypeSlug from 'rehype-slug';\nimport rehypeCodeTitles from 'rehype-code-titles';\nimport rehypeAutolinkHeadings from 'rehype-autolink-headings';\nimport rehypePrism from 'rehype-prism-plus';\n\nexport async function getFiles() {\n  return readdirSync(join(process.cwd(), 'posts'));\n}\n\nexport async function getFileBySlug(slug) {\n  const source = readFileSync(\n    join(process.cwd(), 'posts', `${slug}.mdx`),\n    'utf8'\n  );\n\n  const { code, frontmatter } = await bundleMDX(source, {\n    xdmOptions(options) {\n      options.rehypePlugins = [\n\n        // some good and popular plugins\n        ...(options?.rehypePlugins ?? []),\n        rehypeSlug,\n        rehypeCodeTitles,\n        rehypePrism,\n        [\n          rehypeAutolinkHeadings,\n          {\n            properties: {\n              className: ['heading_title']\n            }\n          }\n        ]\n      ];\n      return options;\n    }\n  });\n\n  return {\n    code,\n    frontMatter: {\n      wordCount: source.split(/\\s+/gu).length,\n      readingTime: readingTime(source),\n      slug: slug || null,\n      ...frontmatter\n    }\n  };\n}\n\nexport async function getAllFilesFrontMatter() {\n  const files = readdirSync(join(process.cwd(), 'posts'));\n\n  return files.reduce((allPosts, postSlug) => {\n    const source = readFileSync(\n      join(process.cwd(), 'posts', postSlug),\n      'utf8'\n    );\n    const { data } = matter(source);\n\n    return [\n      {\n        ...data,\n        slug: postSlug.replace('.mdx', ''),\n        readingTime: readingTime(source)\n      },\n      ...allPosts\n    ];\n  }, []);\n}\n```\n\n</CodeBlock>\n\n### Resources\n\n- [Comparison of MDX integration strategies](https://dev.to/tylerlwsmith/quick-comparison-of-mdx-integration-strategies-with-next-js-1kcm)\n- [Use MDX Bundler with Nextjs](https://dipeshwagle.com/blog/use-mdx-bundler-next-js)\n- [MDX Bundler and Nextjs](https://www.iamyadav.com/blogs/use-mdx-bundler-with-next-js)\n",
      "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),N=(n,e)=>{for(var l in e)i(n,l,{get:e[l],enumerable:!0})},t=(n,e,l,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!g.call(n,r)&&r!==l&&i(n,r,{get:()=>e[r],enumerable:!(a=m(e,r))||a.enumerable});return n};var f=(n,e,l)=>(l=n!=null?p(j(n)):{},t(e||!n||!n.__esModule?i(l,\"default\",{value:n,enumerable:!0}):l,n)),w=n=>t(i({},\"__esModule\",{value:!0}),n);var h=y((X,c)=>{c.exports=_jsx_runtime});var _={};N(_,{default:()=>b,frontmatter:()=>k});var s=f(h()),k={title:\"Parsing MDX files\",published:!0,date:\"2021-10-23\",summary:\"Compile and bundler MDX files with mdx-bundler\",icon:\"mdx\",tags:[\"Javascript\"]};function d(n){let e=Object.assign({p:\"p\",a:\"a\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",ul:\"ul\",li:\"li\",h3:\"h3\"},n.components),{Step:l,CodeBlock:a}=e;return a||o(\"CodeBlock\",!0),l||o(\"Step\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.p,{children:\"MDX is an extension of Markdown that allows you to import and write JSX in your markdown documents.\"}),`\n`,(0,s.jsx)(e.p,{children:\"Markdown can be used for creating web pages, documents or any text that needs to be transformed into other formats like For web applications, Markdown needs to be transformed into HTML. But, Using Markdown you can only use HTML elements.\"}),`\n`,(0,s.jsx)(e.p,{children:\"MDX is an extension of Markdown that allows you to import and write JSX in your markdown documents. So, MDX takes the format a step further and allows us to include our own custom React components!\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"Today, MDX Bundler is arguably the best option for processing MDX in a Nextjs applicattion. mdx-bundler uses \",(0,s.jsx)(e.a,{href:\"https://esbuild.github.io/\",children:\"esbuild\"}),\", so it's VERY fast and supports TypeScript files (for the dependencies of your MDX files). It also uses \",(0,s.jsx)(e.a,{href:\"https://wooorm.com/xdm/\",children:\"xdm\"}),\" which is a more modern and powerful MDX compiler with no extra runtime requirements.\"]}),`\n`,(0,s.jsx)(e.p,{children:\"Here we go -\"}),`\n`,(0,s.jsx)(l,{number:1,title:\"Install the dependencies for mdx-bundler\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"Terminal\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-bash\",children:[(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"# If you're using npm\"}),`\nnpm install mdx-bundler esbuild\n\n`,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"# If you're using yarn\"}),`\nyarn add mdx-bundler esbuild\n`]})})]}),`\n`,(0,s.jsx)(l,{number:2,title:\"Create a directory with MDX files\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"Terminal\"}),(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:\"hljs language-bash\",children:`\\\\posts\n  \\\\file-1.mdx\n  \\\\file-2.mdx\n  \\\\file-3.mdx\n`})})]}),`\n`,(0,s.jsx)(l,{number:3,title:\"Install necessary Plugins\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"Terminal\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-bash\",children:[(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"# If you're using npm\"}),`\nnpm install reading-time gray-matter rehype-slug rehype-code-titles rehype-autolink-headings rehype-prism-plus\n\n`,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"# If you're using yarn\"}),`\n\nyarn add reading-time gray-matter rehype-slug rehype-code-titles rehype-autolink-headings rehype-prism-plus\n\n`]})})]}),`\n`,(0,s.jsxs)(e.ul,{children:[`\n`,(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:\"https://www.npmjs.com/package/reading-time\",children:\"reading-time\"}),\" Estimate an article's reading time\"]}),`\n`,(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:\"https://www.npmjs.com/package/gray-matter/v/0.5.2\",children:\"gray-matter\"}),\" Extend front-matter metadata\"]}),`\n`,(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:\"https://www.npmjs.com/package/rehype-slug\",children:\"rehype-slug\"}),\" Plugin to add id's to headings\"]}),`\n`,(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:\"https://github.com/rockchalkwushock/rehype-code-titles\",children:\"rehype-code-titles\"}),\" Plugin to add titles for code blocks\"]}),`\n`,(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:\"https://www.npmjs.com/package/rehype-prism-plus/v/1.0.0\",children:\"rehype-prism-plus\"}),\" Plugin to add code highlighting\"]}),`\n`,(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:\"https://www.npmjs.com/package/rehype-autolink-headings\",children:\"rehype-autolink-headings\"}),\" Plugin to automatically add link to headings\"]}),`\n`]}),`\n`,(0,s.jsx)(l,{number:4,title:\"Parse all MDX files\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"mdx.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-Javascript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" matter \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'gray-matter'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" readingTime \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'reading-time'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { join } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'path'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { bundleMDX } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'mdx-bundler'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { readdirSync, readFileSync } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'fs'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"/* Rehype Plugins */\"}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" rehypeSlug \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rehype-slug'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" rehypeCodeTitles \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rehype-code-titles'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" rehypeAutolinkHeadings \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rehype-autolink-headings'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" rehypePrism \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rehype-prism-plus'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getFiles\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"readdirSync\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"join\"}),\"(process.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"cwd\"}),\"(), \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'posts'\"}),`));\n}\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getFileBySlug\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"slug\"}),`) {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" source = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"readFileSync\"}),`(\n    `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"join\"}),\"(process.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"cwd\"}),\"(), \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'posts'\"}),\", \",(0,s.jsxs)(e.span,{className:\"hljs-string\",children:[\"`\",(0,s.jsx)(e.span,{className:\"hljs-subst\",children:\"${slug}\"}),\".mdx`\"]}),`),\n    `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'utf8'\"}),`\n  );\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" { code, frontmatter } = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"bundleMDX\"}),`(source, {\n    `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"xdmOptions\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"options\"}),`) {\n      options.`,(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"rehypePlugins\"}),` = [\n\n        `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// some good and popular plugins\"}),`\n        ...(options?.`,(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"rehypePlugins\"}),` ?? []),\n        rehypeSlug,\n        rehypeCodeTitles,\n        rehypePrism,\n        [\n          rehypeAutolinkHeadings,\n          {\n            `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"properties\"}),`: {\n              `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"className\"}),\": [\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'heading_title'\"}),`]\n            }\n          }\n        ]\n      ];\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` options;\n    }\n  });\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` {\n    code,\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"frontMatter\"}),`: {\n      `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"wordCount\"}),\": source.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"split\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-regexp\",children:\"/\\\\s+/gu\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"length\"}),`,\n      `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"readingTime\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"readingTime\"}),`(source),\n      `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"slug\"}),\": slug || \",(0,s.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`,\n      ...frontmatter\n    }\n  };\n}\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getAllFilesFrontMatter\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" files = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"readdirSync\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"join\"}),\"(process.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"cwd\"}),\"(), \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'posts'\"}),`));\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" files.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"reduce\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"allPosts, postSlug\"}),\") =>\"]}),` {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" source = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"readFileSync\"}),`(\n      `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"join\"}),\"(process.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"cwd\"}),\"(), \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'posts'\"}),`, postSlug),\n      `,(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'utf8'\"}),`\n    );\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" { data } = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"matter\"}),`(source);\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` [\n      {\n        ...data,\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"slug\"}),\": postSlug.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"replace\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'.mdx'\"}),\", \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"''\"}),`),\n        `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"readingTime\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"readingTime\"}),`(source)\n      },\n      ...allPosts\n    ];\n  }, []);\n}\n`]})})]}),`\n`,(0,s.jsx)(e.h3,{id:\"resources\",children:\"Resources\"}),`\n`,(0,s.jsxs)(e.ul,{children:[`\n`,(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:\"https://dev.to/tylerlwsmith/quick-comparison-of-mdx-integration-strategies-with-next-js-1kcm\",children:\"Comparison of MDX integration strategies\"})}),`\n`,(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:\"https://dipeshwagle.com/blog/use-mdx-bundler-next-js\",children:\"Use MDX Bundler with Nextjs\"})}),`\n`,(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:\"https://www.iamyadav.com/blogs/use-mdx-bundler-with-next-js\",children:\"MDX Bundler and Nextjs\"})}),`\n`]})]})}function x(n={}){let{wrapper:e}=n.components||{};return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(d,n)})):d(n)}var b=x;function o(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(_);})();\n;return Component;"
    },
    "_id": "snippets/mdx-bundler.mdx",
    "_raw": {
      "sourceFilePath": "snippets/mdx-bundler.mdx",
      "sourceFileName": "mdx-bundler.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/mdx-bundler"
    },
    "type": "Snippet",
    "slug": "/snippets/mdx-bundler",
    "slugAsParams": "mdx-bundler",
    "stats": {
      "text": "3 min read",
      "minutes": 2.4,
      "time": 144000,
      "words": 480
    }
  },
  {
    "title": "Next.js 13 NavLink Component",
    "summary": "This snippet shows how to create a custom NavLink component in Next.js 13 that extends the built-in Link component to add CSS classNames when the href attribute matches the current URL.",
    "icon": "next",
    "date": "2022-12-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\nI have been experimenting with Next.js 13, and the new `/app` folder for routing. For a good user experience I wanted to highlight the active link in the navigation menu. Like so:\n\n![Active Menu Item](https://danstroot.imgix.net/assets/snippets/img/menu.jpg)\n\nTo make this work I extended the Next.js Link component to add specific CSS classNames to a menu item when the href attribute matches the current URL. I created a custom \"NavLink\" component like so.\n\n<Step number={1} title=\"Create a Custom NavLink Component\" />\n\nThis is the NavLink component, by default the \"active\" classNames are added when the href matches the start of the URL pathname. You can use the `exact` property to change it to an exact match with the whole URL pathname.\n\nNote this code must run client side so we need to add the `\"use client\";` directive. Also note we are importing from `next/navigation`.\n\n<CodeBlock>\n\n```js\n'use client'\n\n/*\n\nNavLink: by default the active class is added when the href matches the start of the URL pathname.\nUse the exact property to change it to an exact match with the whole URL pathname.\n\n*/\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\n\nexport const NavLink = ({ href, exact, children, ...props }) => {\n  const pathname = usePathname()\n  const active = ' font-bold'\n  const isActive = exact ? pathname === href : pathname.startsWith(href)\n\n  if (isActive) {\n    props.className += active\n  }\n\n  return (\n    <Link href={href} {...props}>\n      {children}\n    </Link>\n  )\n}\n```\n\n</CodeBlock>\n\n<Step number={2} title=\"Use the Custom NavLink Component\" />\n\nHere is a quick example of how to use the custom NavLink component in a Next.js app. You basically use it as a direct replacement for the `next/link` component with the one addition of the `exact` parameter if you want to match to the _exact_ url when highlighting the active menu component. Cheers!\n\n<CodeBlock>\n\n```js\n<NavLink href=\"/\" exact className=\"text-grey-dark hover:text-grey-darker\">\n  Home\n</NavLink>\n```\n\n</CodeBlock>\n\n### References\n\n- [Next.js 13 Upgrade Guide](https://beta.nextjs.org/docs/upgrade-guide)\n",
      "code": "var Component=(()=>{var m=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var g=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),f=(s,e)=>{for(var t in e)i(s,t,{get:e[t],enumerable:!0})},h=(s,e,t,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of u(e))!j.call(s,c)&&c!==t&&i(s,c,{get:()=>e[c],enumerable:!(a=p(e,c))||a.enumerable});return s};var x=(s,e,t)=>(t=s!=null?m(N(s)):{},h(e||!s||!s.__esModule?i(t,\"default\",{value:s,enumerable:!0}):t,s)),k=s=>h(i({},\"__esModule\",{value:!0}),s);var r=g((_,l)=>{l.exports=_jsx_runtime});var L={};f(L,{default:()=>y,frontmatter:()=>w});var n=x(r()),w={title:\"Next.js 13 NavLink Component\",published:!0,date:\"2022-12-23\",summary:\"This snippet shows how to create a custom NavLink component in Next.js 13 that extends the built-in Link component to add CSS classNames when the href attribute matches the current URL.\",icon:\"next\",tags:[\"Javascript\"]};function o(s){let e=Object.assign({p:\"p\",code:\"code\",img:\"img\",pre:\"pre\",span:\"span\",em:\"em\",h3:\"h3\",ul:\"ul\",li:\"li\",a:\"a\"},s.components),{Step:t,CodeBlock:a}=e;return a||d(\"CodeBlock\",!0),t||d(\"Step\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I have been experimenting with Next.js 13, and the new \",(0,n.jsx)(e.code,{children:\"/app\"}),\" folder for routing. For a good user experience I wanted to highlight the active link in the navigation menu. Like so:\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://danstroot.imgix.net/assets/snippets/img/menu.jpg\",alt:\"Active Menu Item\"})}),`\n`,(0,n.jsx)(e.p,{children:'To make this work I extended the Next.js Link component to add specific CSS classNames to a menu item when the href attribute matches the current URL. I created a custom \"NavLink\" component like so.'}),`\n`,(0,n.jsx)(t,{number:1,title:\"Create a Custom NavLink Component\"}),`\n`,(0,n.jsxs)(e.p,{children:['This is the NavLink component, by default the \"active\" classNames are added when the href matches the start of the URL pathname. You can use the ',(0,n.jsx)(e.code,{children:\"exact\"}),\" property to change it to an exact match with the whole URL pathname.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Note this code must run client side so we need to add the \",(0,n.jsx)(e.code,{children:'\"use client\";'}),\" directive. Also note we are importing from \",(0,n.jsx)(e.code,{children:\"next/navigation\"}),\".\"]}),`\n`,(0,n.jsx)(a,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'use client'\"}),`\n\n`,(0,n.jsx)(e.span,{className:\"hljs-comment\",children:`/*\n\nNavLink: by default the active class is added when the href matches the start of the URL pathname.\nUse the exact property to change it to an exact match with the whole URL pathname.\n\n*/`}),`\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"Link\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'next/link'\"}),`\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { usePathname } \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'next/navigation'\"}),`\n\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"NavLink\"}),\" = (\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"{ href, exact, children, ...props }\"}),`) => {\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" pathname = \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"usePathname\"}),`()\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" active = \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"' font-bold'\"}),`\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" isActive = exact ? pathname === href : pathname.\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"startsWith\"}),`(href)\n\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),` (isActive) {\n    props.`,(0,n.jsx)(e.span,{className:\"hljs-property\",children:\"className\"}),` += active\n  }\n\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,n.jsxs)(e.span,{className:\"xml\",children:[(0,n.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,n.jsx)(e.span,{className:\"hljs-name\",children:\"Link\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"{href}\"}),\" {\",(0,n.jsx)(e.span,{className:\"hljs-attr\",children:\"...props\"}),\"}>\"]}),`\n      {children}\n    `,(0,n.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,n.jsx)(e.span,{className:\"hljs-name\",children:\"Link\"}),\">\"]})]}),`\n  )\n}\n`]})})}),`\n`,(0,n.jsx)(t,{number:2,title:\"Use the Custom NavLink Component\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here is a quick example of how to use the custom NavLink component in a Next.js app. You basically use it as a direct replacement for the \",(0,n.jsx)(e.code,{children:\"next/link\"}),\" component with the one addition of the \",(0,n.jsx)(e.code,{children:\"exact\"}),\" parameter if you want to match to the \",(0,n.jsx)(e.em,{children:\"exact\"}),\" url when highlighting the active menu component. Cheers!\"]}),`\n`,(0,n.jsx)(a,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-js\",children:[\"<\",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"NavLink\"}),\" href=\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"/\"'}),\" exact className=\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:'\"text-grey-dark hover:text-grey-darker\"'}),`>\n  `,(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"Home\"}),`\n</`,(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"NavLink\"}),`>\n`]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://beta.nextjs.org/docs/upgrade-guide\",children:\"Next.js 13 Upgrade Guide\"})}),`\n`]})]})}function v(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(o,s)})):o(s)}var y=v;function d(s,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return k(L);})();\n;return Component;"
    },
    "_id": "snippets/nextjs-navlink-component.mdx",
    "_raw": {
      "sourceFilePath": "snippets/nextjs-navlink-component.mdx",
      "sourceFileName": "nextjs-navlink-component.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/nextjs-navlink-component"
    },
    "type": "Snippet",
    "slug": "/snippets/nextjs-navlink-component",
    "slugAsParams": "nextjs-navlink-component",
    "stats": {
      "text": "2 min read",
      "minutes": 1.595,
      "time": 95700,
      "words": 319
    }
  },
  {
    "title": "Async/await functions in parallel",
    "summary": "To speed up our code lets look at some ways to run promises in parallel. This can be useful when performing multiple database queries to render a web page and you want to run the queries in parallel rather than seqentially.",
    "icon": "js",
    "date": "2023-07-07T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\n### Context\n\nMultiple `await` calls will execute one after the other rather than in parallel. For example:\n\n<CodeBlock>\n\n```JavaScript:await.js\nconst someResult = await someCall();\nconst anotherResult = await anotherCall();\n```\n\n</CodeBlock>\n\nHere `anotherCall()` will be called only when `someCall()` is completed. What if you want to execute them in parallel? \n\nHere's the simplest approach:\n\n<CodeBlock>\n\n```JavaScript:parallel.js\nconst [someResult, anotherResult] = await Promise.all([someCall(), anotherCall()]);\n```\n\n</CodeBlock>\n\nNote that `Promise.all` fails fast, which means that as soon as one of the promises supplied to it rejects, then the entire thing rejects. On the other hand, it will allow all the promises in it to run without blocking each other, but will prevent the execution to continue until ALL are resolved successfully.\n\nFor extra credit - here is a way to run many tasks in parallel and process the results individually as the tasks complete. I think it's pretty elegant.\n\n<CodeBlock>\n\n```JavaScript:tasks.js\nfunction wait(ms, data) {\n    console.log('Starting task:', data, ms);\n    return new Promise(resolve => setTimeout(resolve, ms, data));\n}\n\n// run these in parallel, process results individually\nvar tasks = [\n    async () => {\n        var result = await wait(1000, 'burrito');\n        // do something with result\n        console.log(result);\n    },\n    async () => {\n        var result = await wait(500, 'taco');\n        // do something with result\n        console.log(result);\n    },\n    async () => {\n        var result = await wait(5000, 'tostada');\n        // do something with result\n        console.log(result);\n    }\n]\n\nawait Promise.all(tasks.map(p => p()));\nconsole.log('done');\n```\n\n</CodeBlock>\n\nThere results should look as follows:\n\n<CodeBlock>\n\n```JavaScript:results.js\nStarting task: burrito 1000\nStarting task: taco 500\nStarting task: tostada 5000\ntaco\nburrito\ntostada\ndone\n```\n\n</CodeBlock>\n\n## References\n\n[Understanding Node.js Async Flows: Parallel, Serial, Waterfall and Queues](https://medium.com/velotio-perspectives/understanding-node-js-async-flows-parallel-serial-waterfall-and-queues-6f9c4badbc17)",
      "code": "var Component=(()=>{var d=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var l in e)t(a,l,{get:e[l],enumerable:!0})},r=(a,e,l,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of m(e))!j.call(a,n)&&n!==l&&t(a,n,{get:()=>e[n],enumerable:!(c=p(e,n))||c.enumerable});return a};var g=(a,e,l)=>(l=a!=null?d(u(a)):{},r(e||!a||!a.__esModule?t(l,\"default\",{value:a,enumerable:!0}):l,a)),f=a=>r(t({},\"__esModule\",{value:!0}),a);var h=N((C,i)=>{i.exports=_jsx_runtime});var b={};w(b,{default:()=>k,frontmatter:()=>y});var s=g(h()),y={title:\"Async/await functions in parallel\",published:!0,date:\"2023-07-07\",summary:\"To speed up our code lets look at some ways to run promises in parallel. This can be useful when performing multiple database queries to render a web page and you want to run the queries in parallel rather than seqentially.\",icon:\"js\",tags:[\"Javascript\"]};function o(a){let e=Object.assign({h3:\"h3\",p:\"p\",code:\"code\",div:\"div\",pre:\"pre\",span:\"span\",h2:\"h2\",a:\"a\"},a.components),{CodeBlock:l}=e;return l||v(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h3,{id:\"context\",children:\"Context\"}),`\n`,(0,s.jsxs)(e.p,{children:[\"Multiple \",(0,s.jsx)(e.code,{children:\"await\"}),\" calls will execute one after the other rather than in parallel. For example:\"]}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"await.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" someResult = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"someCall\"}),`();\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" anotherResult = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"anotherCall\"}),`();\n`]})})]}),`\n`,(0,s.jsxs)(e.p,{children:[\"Here \",(0,s.jsx)(e.code,{children:\"anotherCall()\"}),\" will be called only when \",(0,s.jsx)(e.code,{children:\"someCall()\"}),\" is completed. What if you want to execute them in parallel?\"]}),`\n`,(0,s.jsx)(e.p,{children:\"Here's the simplest approach:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"parallel.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" [someResult, anotherResult] = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Promise\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"all\"}),\"([\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"someCall\"}),\"(), \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"anotherCall\"}),`()]);\n`]})})]}),`\n`,(0,s.jsxs)(e.p,{children:[\"Note that \",(0,s.jsx)(e.code,{children:\"Promise.all\"}),\" fails fast, which means that as soon as one of the promises supplied to it rejects, then the entire thing rejects. On the other hand, it will allow all the promises in it to run without blocking each other, but will prevent the execution to continue until ALL are resolved successfully.\"]}),`\n`,(0,s.jsx)(e.p,{children:\"For extra credit - here is a way to run many tasks in parallel and process the results individually as the tasks complete. I think it's pretty elegant.\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"tasks.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"wait\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"ms, data\"}),`) {\n    `,(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"console\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"log\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'Starting task:'\"}),`, data, ms);\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Promise\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"resolve\"}),\" =>\"]}),\" \",(0,s.jsx)(e.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),`(resolve, ms, data));\n}\n\n`,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// run these in parallel, process results individually\"}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"var\"}),` tasks = [\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),` () => {\n        `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"var\"}),\" result = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"wait\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"1000\"}),\", \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'burrito'\"}),`);\n        `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// do something with result\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"console\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"log\"}),`(result);\n    },\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),` () => {\n        `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"var\"}),\" result = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"wait\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"500\"}),\", \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'taco'\"}),`);\n        `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// do something with result\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"console\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"log\"}),`(result);\n    },\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"async\"}),` () => {\n        `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"var\"}),\" result = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"wait\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"5000\"}),\", \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'tostada'\"}),`);\n        `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// do something with result\"}),`\n        `,(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"console\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"log\"}),`(result);\n    }\n]\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Promise\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"all\"}),\"(tasks.\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"map\"}),\"(\",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"p\"}),\" =>\"]}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"p\"}),`()));\n`,(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"console\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"log\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'done'\"}),`);\n`]})})]}),`\n`,(0,s.jsx)(e.p,{children:\"There results should look as follows:\"}),`\n`,(0,s.jsxs)(l,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"results.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Starting\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"task\"}),\": burrito \",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"1000\"}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Starting\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"task\"}),\": taco \",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"500\"}),`\n`,(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Starting\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"task\"}),\": tostada \",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"5000\"}),`\ntaco\nburrito\ntostada\ndone\n`]})})]}),`\n`,(0,s.jsx)(e.h2,{id:\"references\",children:\"References\"}),`\n`,(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:\"https://medium.com/velotio-perspectives/understanding-node-js-async-flows-parallel-serial-waterfall-and-queues-6f9c4badbc17\",children:\"Understanding Node.js Async Flows: Parallel, Serial, Waterfall and Queues\"})})]})}function _(a={}){let{wrapper:e}=a.components||{};return e?(0,s.jsx)(e,Object.assign({},a,{children:(0,s.jsx)(o,a)})):o(a)}var k=_;function v(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f(b);})();\n;return Component;"
    },
    "_id": "snippets/parallel.mdx",
    "_raw": {
      "sourceFilePath": "snippets/parallel.mdx",
      "sourceFileName": "parallel.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/parallel"
    },
    "type": "Snippet",
    "slug": "/snippets/parallel",
    "slugAsParams": "parallel",
    "stats": {
      "text": "2 min read",
      "minutes": 1.365,
      "time": 81900,
      "words": 273
    }
  },
  {
    "title": "Adding Syntax Highlighting in Nextjs",
    "summary": "If you want to show example code on a page in Nextjs you will help your readers by implemeting some form of syntax highlighting. Here's how.",
    "icon": "js",
    "date": "2021-12-03T00:00:00.000Z",
    "published": false,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\n## Adding highlighting in a markdown-based blog\n\n<Step number={1} title='Add syntax highlights to markdown code' />\n\nIf you are using something like Remark you can simply add remark-prism to your markdown processing as follows.\n\n<CodeBlock>\n\n```JavaScript:markdownToHTML.js {4, 18} showLineNumbers\nimport { remark } from 'remark';\nimport html from 'remark-html';\nimport gfm from 'remark-gfm';\nimport prism from 'remark-prism';\nimport emoji from 'remark-emoji';\n\n/*\nUsing remark to convert markdown to HTML:\n  - prism for code syntax highlighting\n  - gfm for tables\n  - emoji\n*/\n\nexport async function markdownToHTML(markdown) {\n  const result = await remark()\n    .use(html, { sanitize: false })\n    .use(gfm)\n    .use(prism)\n    .use(emoji)\n    .process(markdown);\n  return result.toString();\n}\n```\n\n</CodeBlock>\n\n<Step number={2} title='Add css' />\n\nThen, make sure you load a prism css theme to actually colorize your code.\n\n<CodeBlock>\n\n```JavaScript:/pages/_app.js {1} showLineNumbers\nimport 'prismjs/themes/prism-tomorrow.css';\nimport '../styles/index.css';\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Component {...pageProps} />\n  );\n}\n\n```\n\n</CodeBlock>\n\n### Adding highlighting to HTML directly\n\nIn this case we will be moving some of the work from the server to the client\n\n<Step number={1} title='Install prism js using npm / yarn' />\n\n```Shell\nnpm i prismjs\nyarn add prismjs\n```\n\nPrismjs also provides TypeScript support, `npm i @types/prismjs` or yarn add `@types/prismjs`\n\n<Step number={1} title='Use prismjs on your page' />\n\nImport prismjs into your blog page and highlight all.\nThe next step is just import prismjs into your codes and call the highlightAll function in your useEffect / componentDidMount.\n\n<CodeBlock>\n\n```Javascript:/pages/page.js\nimport Prism from 'prismjs';\nimport \"prismjs/components/prism-java\"; // if you need a specific language\nimport 'prismjs/themes/prism-tomorrow.css'; // css theme\n\nexport default function Index() {\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') { // don't run on server\n        Prism.highlightAll();\n    }\n  }, []);\n\n  return (\n    <pre class=\"language-javascript\" >\n      <code>\n        function getFullName (user) {\n          const fullName = user.firstName + user.lastName;\n\n          return fullName;\n        }\n      </code>\n    </pre>\n  );\n}\n```\n\n</CodeBlock>\n\nIt will automatically select the code blocks and will highlight them all. Note, you must have your code in the format above.\n\n#### References\n\n- [Prismjs](https://prismjs.com/)\n",
      "code": "var Component=(()=>{var o=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var u=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),y=(n,s)=>{for(var a in s)i(n,a,{get:s[a],enumerable:!0})},c=(n,s,a,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let r of j(s))!N.call(n,r)&&r!==a&&i(n,r,{get:()=>s[r],enumerable:!(l=p(s,r))||l.enumerable});return n};var f=(n,s,a)=>(a=n!=null?o(g(n)):{},c(s||!n||!n.__esModule?i(a,\"default\",{value:n,enumerable:!0}):a,n)),w=n=>c(i({},\"__esModule\",{value:!0}),n);var t=u((M,h)=>{h.exports=_jsx_runtime});var b={};y(b,{default:()=>_,frontmatter:()=>k});var e=f(t()),k={title:\"Adding Syntax Highlighting in Nextjs\",summary:\"If you want to show example code on a page in Nextjs you will help your readers by implemeting some form of syntax highlighting. Here's how.\",date:\"2021-12-03\",published:!1,icon:\"js\",tags:[\"Javascript\"]};function m(n){let s=Object.assign({h2:\"h2\",p:\"p\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",h4:\"h4\",ul:\"ul\",li:\"li\",a:\"a\"},n.components),{Step:a,CodeBlock:l}=s;return l||d(\"CodeBlock\",!0),a||d(\"Step\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.h2,{id:\"adding-highlighting-in-a-markdown-based-blog\",children:\"Adding highlighting in a markdown-based blog\"}),`\n`,(0,e.jsx)(a,{number:1,title:\"Add syntax highlights to markdown code\"}),`\n`,(0,e.jsx)(s.p,{children:\"If you are using something like Remark you can simply add remark-prism to your markdown processing as follows.\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"markdownToHTML.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-JavaScript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { remark } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" html \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-html'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" gfm \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-gfm'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" prism \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-prism'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" emoji \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-emoji'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:`/*\nUsing remark to convert markdown to HTML:\n  - prism for code syntax highlighting\n  - gfm for tables\n  - emoji\n*/`}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"markdownToHTML\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"markdown\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" result = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"remark\"}),`()\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),\"(html, { \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"sanitize\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),` })\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),`(gfm)\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),`(prism)\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),`(emoji)\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"process\"}),`(markdown);\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" result.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"toString\"}),`();\n}\n`]})})]}),`\n`,(0,e.jsx)(a,{number:2,title:\"Add css\"}),`\n`,(0,e.jsx)(s.p,{children:\"Then, make sure you load a prism css theme to actually colorize your code.\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"/pages/_app.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-JavaScript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'prismjs/themes/prism-tomorrow.css'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'../styles/index.css'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"MyApp\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"{ Component, pageProps }\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsx)(s.span,{className:\"xml\",children:(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Component\"}),\" {\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"...pageProps\"}),\"} />\"]})}),`\n  );\n}\n\n`]})})]}),`\n`,(0,e.jsx)(s.h3,{id:\"adding-highlighting-to-html-directly\",children:\"Adding highlighting to HTML directly\"}),`\n`,(0,e.jsx)(s.p,{children:\"In this case we will be moving some of the work from the server to the client\"}),`\n`,(0,e.jsx)(a,{number:1,title:\"Install prism js using npm / yarn\"}),`\n`,(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-Shell\",children:`npm i prismjs\nyarn add prismjs\n`})}),`\n`,(0,e.jsxs)(s.p,{children:[\"Prismjs also provides TypeScript support, \",(0,e.jsx)(s.code,{children:\"npm i @types/prismjs\"}),\" or yarn add \",(0,e.jsx)(s.code,{children:\"@types/prismjs\"})]}),`\n`,(0,e.jsx)(a,{number:1,title:\"Use prismjs on your page\"}),`\n`,(0,e.jsx)(s.p,{children:`Import prismjs into your blog page and highlight all.\nThe next step is just import prismjs into your codes and call the highlightAll function in your useEffect / componentDidMount.`}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"/pages/page.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-Javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Prism\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'prismjs'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"prismjs/components/prism-java\"'}),\"; \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// if you need a specific language\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'prismjs/themes/prism-tomorrow.css'\"}),\"; \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// css theme\"}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"Index\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\"}),`) {\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"typeof\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable language_\",children:\"window\"}),\" !== \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'undefined'\"}),\") { \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// don't run on server\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Prism\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"highlightAll\"}),`();\n    }\n  }, []);\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"pre\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"class\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"language-javascript\"'}),\" >\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"code\"}),\">\"]}),`\n        function getFullName (user) {\n          const fullName = user.firstName + user.lastName;\n\n          return fullName;\n        }\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"code\"}),\">\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"pre\"}),\">\"]})]}),`\n  );\n}\n`]})})]}),`\n`,(0,e.jsx)(s.p,{children:\"It will automatically select the code blocks and will highlight them all. Note, you must have your code in the format above.\"}),`\n`,(0,e.jsx)(s.h4,{id:\"references\",children:\"References\"}),`\n`,(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://prismjs.com/\",children:\"Prismjs\"})}),`\n`]})]})}function x(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(m,n)})):m(n)}var _=x;function d(n,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(b);})();\n;return Component;"
    },
    "_id": "snippets/prismjs-syntax-highlighting.mdx",
    "_raw": {
      "sourceFilePath": "snippets/prismjs-syntax-highlighting.mdx",
      "sourceFileName": "prismjs-syntax-highlighting.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/prismjs-syntax-highlighting"
    },
    "type": "Snippet",
    "slug": "/snippets/prismjs-syntax-highlighting",
    "slugAsParams": "prismjs-syntax-highlighting",
    "stats": {
      "text": "2 min read",
      "minutes": 1.67,
      "time": 100200,
      "words": 334
    }
  },
  {
    "title": "React Hooks",
    "summary": "I have documented some React hooks I find useful but there are many, many hooks out there. Here are some great React Hooks resources. Cheers!",
    "icon": "react",
    "date": "2021-12-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript",
      "React Hook"
    ],
    "body": {
      "raw": "\nThere are many React hooks I find very useful and rather than documenting the ones I frequently use I thought it's easier (and better) to just provide some links here to some great collections and hooks I use frequently.\n\n## React Hooks I often Use\n\n- useBoolean\n- useToggle\n- useHasMounted\n- useIntersectionObserver\n- useHookForm\n\n### References\n\n- [useHooks](https://usehooks.com/)\n- [React Hook Form](https://www.npmjs.com/package/react-hook-form)\n- [Rehooks](https://github.com/rehooks)\n- [React Recipes](https://github.com/craig1123/react-recipes)\n- [Awesome React Hooks](https://github.com/rehooks/awesome-react-hooks)\n- [React Typescript Hooks](https://usehooks-ts.com/)\n- [Mantine Hooks](https://mantine.dev/hooks/)\n",
      "code": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),g=(t,e)=>{for(var o in e)s(t,o,{get:e[o],enumerable:!0})},c=(t,e,o,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!f.call(t,r)&&r!==o&&s(t,r,{get:()=>e[r],enumerable:!(h=u(e,r))||h.enumerable});return t};var R=(t,e,o)=>(o=t!=null?d(k(t)):{},c(e||!t||!t.__esModule?s(o,\"default\",{value:t,enumerable:!0}):o,t)),H=t=>c(s({},\"__esModule\",{value:!0}),t);var a=p((_,i)=>{i.exports=_jsx_runtime});var y={};g(y,{default:()=>x,frontmatter:()=>b});var n=R(a()),b={title:\"React Hooks\",summary:\"I have documented some React hooks I find useful but there are many, many hooks out there. Here are some great React Hooks resources. Cheers!\",date:\"2021-12-23\",published:!0,icon:\"react\",tags:[\"Javascript\",\"React Hook\"]};function l(t){let e=Object.assign({p:\"p\",h2:\"h2\",ul:\"ul\",li:\"li\",h3:\"h3\",a:\"a\"},t.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"There are many React hooks I find very useful and rather than documenting the ones I frequently use I thought it's easier (and better) to just provide some links here to some great collections and hooks I use frequently.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"react-hooks-i-often-use\",children:\"React Hooks I often Use\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"useBoolean\"}),`\n`,(0,n.jsx)(e.li,{children:\"useToggle\"}),`\n`,(0,n.jsx)(e.li,{children:\"useHasMounted\"}),`\n`,(0,n.jsx)(e.li,{children:\"useIntersectionObserver\"}),`\n`,(0,n.jsx)(e.li,{children:\"useHookForm\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://usehooks.com/\",children:\"useHooks\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/react-hook-form\",children:\"React Hook Form\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/rehooks\",children:\"Rehooks\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/craig1123/react-recipes\",children:\"React Recipes\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/rehooks/awesome-react-hooks\",children:\"Awesome React Hooks\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://usehooks-ts.com/\",children:\"React Typescript Hooks\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://mantine.dev/hooks/\",children:\"Mantine Hooks\"})}),`\n`]})]})}function j(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,Object.assign({},t,{children:(0,n.jsx)(l,t)})):l(t)}var x=j;return H(y);})();\n;return Component;"
    },
    "_id": "snippets/react-hooks.mdx",
    "_raw": {
      "sourceFilePath": "snippets/react-hooks.mdx",
      "sourceFileName": "react-hooks.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/react-hooks"
    },
    "type": "Snippet",
    "slug": "/snippets/react-hooks",
    "slugAsParams": "react-hooks",
    "stats": {
      "text": "1 min read",
      "minutes": 0.395,
      "time": 23700,
      "words": 79
    }
  },
  {
    "title": "Recursive Timeout",
    "summary": "Recursive timeout function that can be used for timed events.",
    "icon": "timer",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\n<CodeBlock>\n\n```js:snippet.js\nimport { useState, useRef, useEffect, useCallback } from 'react';\n\nexport default function RecursiveTimeout(callback, delay) {\n  const [isRunning, setIsRunning] = useState(false);\n  const stop = useCallback(() => setIsRunning(false), [setIsRunning]);\n  const play = useCallback(() => setIsRunning(true), [setIsRunning]);\n  const savedCallback = useRef(callback);\n\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (!isRunning) return;\n    let id = 0;\n\n    const tick = () => {\n      if (!isRunning) return clearTimeout(id);\n      savedCallback.current();\n      requestAnimationFrame(() => (id = setTimeout(tick, delay)));\n    };\n    requestAnimationFrame(() => (id = setTimeout(tick, delay)));\n\n    return () => {\n      if (id) clearTimeout(id);\n      stop();\n    };\n  }, [isRunning, delay, stop]);\n\n  return { play, stop };\n}\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var o=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var p=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var N=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),f=(e,s)=>{for(var a in s)c(e,a,{get:s[a],enumerable:!0})},t=(e,s,a,i)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let l of u(s))!j.call(e,l)&&l!==a&&c(e,l,{get:()=>s[l],enumerable:!(i=m(s,l))||i.enumerable});return e};var k=(e,s,a)=>(a=e!=null?o(p(e)):{},t(s||!e||!e.__esModule?c(a,\"default\",{value:e,enumerable:!0}):a,e)),y=e=>t(c({},\"__esModule\",{value:!0}),e);var h=N((v,r)=>{r.exports=_jsx_runtime});var R={};f(R,{default:()=>w,frontmatter:()=>_});var n=k(h()),_={title:\"Recursive Timeout\",published:!0,date:\"2021-10-23\",summary:\"Recursive timeout function that can be used for timed events.\",icon:\"timer\",tags:[\"React Hook\"]};function d(e){let s=Object.assign({div:\"div\",pre:\"pre\",code:\"code\",span:\"span\"},e.components),{CodeBlock:a}=s;return a||g(\"CodeBlock\",!0),(0,n.jsxs)(a,{children:[(0,n.jsx)(s.div,{className:\"rehype-code-title\",children:\"snippet.js\"}),(0,n.jsx)(s.pre,{children:(0,n.jsxs)(s.code,{className:\"hljs language-js\",children:[(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useState, useRef, useEffect, useCallback } \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n\n`,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"RecursiveTimeout\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-params\",children:\"callback, delay\"}),`) {\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" [isRunning, setIsRunning] = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`);\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" stop = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useCallback\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"setIsRunning\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`), [setIsRunning]);\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" play = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useCallback\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"setIsRunning\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-literal\",children:\"true\"}),`), [setIsRunning]);\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" savedCallback = \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useRef\"}),`(callback);\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    savedCallback.`,(0,n.jsx)(s.span,{className:\"hljs-property\",children:\"current\"}),` = callback;\n  }, [callback]);\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (!isRunning) \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),`;\n    `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" id = \",(0,n.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),`;\n\n    `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"tick\"}),\" = (\",(0,n.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n      `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (!isRunning) \",(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-built_in\",children:\"clearTimeout\"}),`(id);\n      savedCallback.`,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"current\"}),`();\n      `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"requestAnimationFrame\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),\" (id = \",(0,n.jsx)(s.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),`(tick, delay)));\n    };\n    `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"requestAnimationFrame\"}),\"(\",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),\" (id = \",(0,n.jsx)(s.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),`(tick, delay)));\n\n    `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,n.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n      `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (id) \",(0,n.jsx)(s.span,{className:\"hljs-built_in\",children:\"clearTimeout\"}),`(id);\n      `,(0,n.jsx)(s.span,{className:\"hljs-title function_\",children:\"stop\"}),`();\n    };\n  }, [isRunning, delay, stop]);\n\n  `,(0,n.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` { play, stop };\n}\n`]})})]})}function b(e={}){let{wrapper:s}=e.components||{};return s?(0,n.jsx)(s,Object.assign({},e,{children:(0,n.jsx)(d,e)})):d(e)}var w=b;function g(e,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return y(R);})();\n;return Component;"
    },
    "_id": "snippets/recursive-timeout.mdx",
    "_raw": {
      "sourceFilePath": "snippets/recursive-timeout.mdx",
      "sourceFileName": "recursive-timeout.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/recursive-timeout"
    },
    "type": "Snippet",
    "slug": "/snippets/recursive-timeout",
    "slugAsParams": "recursive-timeout",
    "stats": {
      "text": "1 min read",
      "minutes": 0.515,
      "time": 30900,
      "words": 103
    }
  },
  {
    "title": "SEO",
    "summary": "Adding SEO using a wrapper container",
    "icon": "seo",
    "date": "2021-10-19T00:00:00.000Z",
    "published": true,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\nUse this wrapper _Container_ component in the HOC\n\n<CodeBlock>\n\n```jsx\nimport Head from 'next/head'\nimport { useRouter } from 'next/router'\n\nimport Footer from '@/components/Footer'\nimport Navbar from '@/components/Navbar'\n\nfunction Container(props) {\n  const { children, ...customMeta } = props\n  const router = useRouter()\n\n  const meta = {\n    title: 'Title ...',\n    description: 'Summary ...',\n    image: 'Page image ...',\n    type: 'website',\n    ...customMeta,\n  }\n\n  return (\n    <>\n      <Head>\n        <title>{meta.title}</title>\n        <meta name=\"robots\" content=\"follow, index\" />\n        <meta content={meta.description} name=\"description\" />\n        <meta property=\"og:url\" content={`Base url ... ${router.asPath}`} />\n        <link rel=\"canonical\" href={`Base url ... ${router.asPath}`} />\n        <meta property=\"og:type\" content={meta.type} />\n        <meta property=\"og:site_name\" content=\"Learn NextJS\" />\n        <meta property=\"og:description\" content={meta.description} />\n        <meta property=\"og:title\" content={meta.title} />\n        <meta property=\"og:image\" content={meta.image} />\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:site\" content=\"@learnnextjs\" />\n        <meta name=\"twitter:title\" content={meta.title} />\n        <meta name=\"twitter.description\" content={meta.description} />\n        <meta name=\"twitter:image\" content={meta.image} />\n        {meta.data && (\n          <meta property=\"article:published_time\" content={meta.date} />\n        )}\n      </Head>\n      <Navbar />\n      <main>{children}</main>\n      <Footer />\n    </>\n  )\n}\n\nexport default Container\n```\n\n</CodeBlock>\n\nUsage in a Dynamic route\n\n<CodeBlock>\n\n```jsx\nimport { useMemo } from 'react'\nimport BlogLayout from '@/layouts/Blog'\nimport { getMDXComponent } from 'mdx-bundler/client'\n\nimport { getFileBySlug, getFiles } from '@/lib/mdx'\nimport MDXComponent from '@/components/MDXComponents'\n\nexport default function BlogSlug({ code, frontMatter }) {\n  const Component = useMemo(() => getMDXComponent(code), [code])\n\n  return (\n    <BlogLayout matter={frontMatter}>\n      <Component components={{ ...MDXComponent }} />\n    </BlogLayout>\n  )\n}\n\nexport async function getStaticPaths() {\n  const posts = await getFiles('posts')\n\n  return {\n    paths: posts.map((p) => ({\n      params: { slug: p.replace(/\\.mdx/, '') },\n    })),\n    fallback: false,\n  }\n}\n\nexport async function getStaticProps({ params }) {\n  const post = await getFileBySlug(params.slug, 'posts')\n\n  return { props: { ...post } }\n}\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var o=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var g=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),u=(n,s)=>{for(var e in s)c(n,e,{get:s[e],enumerable:!0})},t=(n,s,e,r)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let l of o(s))!N.call(n,l)&&l!==e&&c(n,l,{get:()=>s[l],enumerable:!(r=d(s,l))||r.enumerable});return n};var y=(n,s,e)=>(e=n!=null?p(j(n)):{},t(s||!n||!n.__esModule?c(e,\"default\",{value:n,enumerable:!0}):e,n)),w=n=>t(c({},\"__esModule\",{value:!0}),n);var i=g((b,h)=>{h.exports=_jsx_runtime});var C={};u(C,{default:()=>_,frontmatter:()=>k});var a=y(i()),k={title:\"SEO\",published:!0,date:\"2021-10-19\",summary:\"Adding SEO using a wrapper container\",icon:\"seo\",tags:[\"React Hook\"]};function m(n){let s=Object.assign({p:\"p\",em:\"em\",pre:\"pre\",code:\"code\",span:\"span\"},n.components),{CodeBlock:e}=s;return e||x(\"CodeBlock\",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:[\"Use this wrapper \",(0,a.jsx)(s.em,{children:\"Container\"}),\" component in the HOC\"]}),`\n`,(0,a.jsx)(e,{children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Head\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'next/head'\"}),`\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useRouter } \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'next/router'\"}),`\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Footer\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@/components/Footer'\"}),`\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Navbar\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@/components/Navbar'\"}),`\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"Container\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"props\"}),`) {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),` { children, ...customMeta } = props\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" router = \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"useRouter\"}),`()\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),` meta = {\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"title\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'Title ...'\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"description\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'Summary ...'\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"image\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'Page image ...'\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"type\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'website'\"}),`,\n    ...customMeta,\n  }\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,a.jsxs)(s.span,{className:\"xml\",children:[(0,a.jsx)(s.span,{className:\"hljs-tag\",children:\"<>\"}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"Head\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"title\"}),\">\"]}),\"{meta.title}\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"title\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"robots\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"follow, index\"'}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.description}\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"description\"'}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"og:url\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{\"}),\"`\",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"Base\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"url\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"...\"}),\" ${\",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"router.asPath\"}),\"}`} />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"link\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"rel\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"canonical\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"href\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{\"}),\"`\",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"Base\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"url\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"...\"}),\" ${\",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"router.asPath\"}),\"}`} />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"og:type\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.type}\"}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"og:site_name\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"Learn NextJS\"'}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"og:description\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.description}\"}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"og:title\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.title}\"}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"og:image\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.image}\"}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"twitter:card\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"summary_large_image\"'}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"twitter:site\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"@learnnextjs\"'}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"twitter:title\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.title}\"}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"twitter.description\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.description}\"}),\" />\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"twitter:image\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.image}\"}),\" />\"]}),`\n        {meta.data && (\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"meta\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:'\"article:published_time\"'}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"content\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{meta.date}\"}),\" />\"]}),`\n        )}\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"Head\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"Navbar\"}),\" />\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"main\"}),\">\"]}),\"{children}\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"main\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"Footer\"}),\" />\"]}),`\n    `,(0,a.jsx)(s.span,{className:\"hljs-tag\",children:\"</>\"})]}),`\n  )\n}\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Container\"}),`\n`]})})}),`\n`,(0,a.jsx)(s.p,{children:\"Usage in a Dynamic route\"}),`\n`,(0,a.jsx)(e,{children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useMemo } \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'react'\"}),`\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"BlogLayout\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@/layouts/Blog'\"}),`\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { getMDXComponent } \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'mdx-bundler/client'\"}),`\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { getFileBySlug, getFiles } \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@/lib/mdx'\"}),`\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"MDXComponent\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@/components/MDXComponents'\"}),`\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"BlogSlug\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"{ code, frontMatter }\"}),`) {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Component\"}),\" = \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"useMemo\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getMDXComponent\"}),`(code), [code])\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,a.jsxs)(s.span,{className:\"xml\",children:[(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"BlogLayout\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"matter\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{frontMatter}\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"Component\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"components\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"{{\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"...MDXComponent\"}),\" }} />\"]}),`\n    `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"BlogLayout\"}),\">\"]})]}),`\n  )\n}\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getStaticPaths\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\"}),`) {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" posts = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getFiles\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'posts'\"}),`)\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` {\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"paths\"}),\": posts.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"map\"}),\"(\",(0,a.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"p\"}),\") =>\"]}),` ({\n      `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"params\"}),\": { \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"slug\"}),\": p.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"replace\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-regexp\",children:\"/\\\\.mdx/\"}),\", \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"''\"}),`) },\n    })),\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"fallback\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),`,\n  }\n}\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getStaticProps\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"{ params }\"}),`) {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" post = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getFileBySlug\"}),\"(params.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"slug\"}),\", \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'posts'\"}),`)\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" { \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"props\"}),`: { ...post } }\n}\n`]})})})]})}function f(n={}){let{wrapper:s}=n.components||{};return s?(0,a.jsx)(s,Object.assign({},n,{children:(0,a.jsx)(m,n)})):m(n)}var _=f;function x(n,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(C);})();\n;return Component;"
    },
    "_id": "snippets/seo.mdx",
    "_raw": {
      "sourceFilePath": "snippets/seo.mdx",
      "sourceFileName": "seo.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/seo"
    },
    "type": "Snippet",
    "slug": "/snippets/seo",
    "slugAsParams": "seo",
    "stats": {
      "text": "2 min read",
      "minutes": 1.31,
      "time": 78600,
      "words": 262
    }
  },
  {
    "title": "Simple Analytics",
    "summary": "Sometimes you want to roll your own analytics and track something simple like page views without adding any trackers to your site. Many people block trackers and this allows you to collect simple stats without them.",
    "icon": "react",
    "date": "2021-10-19T00:00:00.000Z",
    "published": false,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\n<Step number={1} title='How to increment a page view counter' />\n\nLet's assume you have a blog with different blog pages. Ideally you want to call an API each time a specific page is viewed to increment a page counter. For example, the useEffect function below will call an API. The API will read the slug in in the URL and increment a page view counter with a key of that slug. In this case it waits 5 seconds before firing so if people don't really read the page it won't fire. One of the nice things about building your own metrics is you have full control. In addition, your users that block trackers like Google analytics will still be recorded.\n\n<CodeBlock>\n\n```js\n// Note: StrictMode renders components twice (in dev, not production) in order to\n// detect problems with your code. If you are running in dev and seeing this trigger\n// twice that could be the reason.\n\nuseEffect(() => {\n  setTimeout(() => {\n    // Use `navigator.sendBeacon()` if available, falling back to `fetch()`.\n    (navigator.sendBeacon && navigator.sendBeacon(`/api/views/${encodeURIComponent(slug)}`)) ||\n      fetch(`/api/views/${encodeURIComponent(slug)}`, { method: 'POST' });\n  }, 5000); // register a page view after 5s\n}, [slug]);\n```\n\n</CodeBlock>\n\n<Step number={2} title='Create the API' />\n\nIn this example we are using Next.js so creating an API is pretty simple. We can use the same endpoint to increment stats (via the POST method) and to retrieve stats (via the GET method).\n\n<CodeBlock>\n\n```js\nimport { get, upd } from '../../../lib/dynamodb';\nlet params = { TableName: process.env.TABLE_NAME };\n\nexport default async function handler(req, res) {\n  const { slug } = req.query;\n\n  if (!slug) {\n    return res.status(400).json({\n      error: \"Please provide a value for 'slug'\",\n    });\n  }\n\n  // METHOD SWITCH\n  switch (req.method) {\n    case 'GET':\n      return getSlugCount(slug);\n    case 'POST':\n      return IncrementSlugCount(slug);\n    default:\n      return res.status(405).end(`Method ${req.method} Not Allowed`);\n  }\n\n  // GET\n  async function getSlugCount(slug) {\n    params = {\n      ...params,\n      Key: {\n        slug: slug,\n      },\n    };\n\n    try {\n      const data = await get(params);\n      if (data.Item) {\n        return res.status(200).json(data.Item);\n      } else {\n        return res.status(404).json({ result: 'not found' });\n      }\n    } catch (err) {\n      return res.status(400).json(err);\n    }\n  }\n\n  // POST\n  async function IncrementSlugCount(slug) {\n    params = {\n      ...params,\n      Key: {\n        slug: slug,\n      },\n      UpdateExpression: 'SET viewCount = if_not_exists(viewCount, :initial) + :incr',\n      ExpressionAttributeValues: {\n        ':initial': 0,\n        ':incr': 1,\n      },\n      ReturnValues: 'UPDATED_NEW',\n    };\n\n    try {\n      const data = await upd(params);\n      return res.status(201).json({ result: 'success', data: data.Attributes });\n    } catch (err) {\n      return res.status(400).json(err);\n    }\n  }\n}\n```\n\n</CodeBlock>\n\n```jsx\nimport { useEffect } from 'react';\nimport Script from 'next/script';\nimport { useRouter } from 'next/router';\nimport { GTM_ID, pageview } from '../lib/gtm';\n\nexport const pageview = (url) => {\n  window.dataLayer.push({\n    event: 'pageview',\n    page: url,\n  });\n};\n\nfunction MyApp({ Component, pageProps }) {\n  const router = useRouter();\n  useEffect(() => {\n    router.events.on('routeChangeComplete', pageview);\n    return () => {\n      router.events.off('routeChangeComplete', pageview);\n    };\n  }, [router.events]);\n}\n```\n",
      "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var g=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),y=(n,s)=>{for(var a in s)r(n,a,{get:s[a],enumerable:!0})},t=(n,s,a,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of j(s))!N.call(n,c)&&c!==a&&r(n,c,{get:()=>s[c],enumerable:!(l=m(s,c))||l.enumerable});return n};var w=(n,s,a)=>(a=n!=null?p(u(n)):{},t(s||!n||!n.__esModule?r(a,\"default\",{value:n,enumerable:!0}):a,n)),f=n=>t(r({},\"__esModule\",{value:!0}),n);var h=g((C,i)=>{i.exports=_jsx_runtime});var v={};y(v,{default:()=>b,frontmatter:()=>k});var e=w(h()),k={title:\"Simple Analytics\",published:!1,date:\"2021-10-19\",summary:\"Sometimes you want to roll your own analytics and track something simple like page views without adding any trackers to your site. Many people block trackers and this allows you to collect simple stats without them.\",icon:\"react\",tags:[\"React Hook\"]};function d(n){let s=Object.assign({p:\"p\",pre:\"pre\",code:\"code\",span:\"span\"},n.components),{Step:a,CodeBlock:l}=s;return l||o(\"CodeBlock\",!0),a||o(\"Step\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a,{number:1,title:\"How to increment a page view counter\"}),`\n`,(0,e.jsx)(s.p,{children:\"Let's assume you have a blog with different blog pages. Ideally you want to call an API each time a specific page is viewed to increment a page counter. For example, the useEffect function below will call an API. The API will read the slug in in the URL and increment a page view counter with a key of that slug. In this case it waits 5 seconds before firing so if people don't really read the page it won't fire. One of the nice things about building your own metrics is you have full control. In addition, your users that block trackers like Google analytics will still be recorded.\"}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-js\",children:[(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// Note: StrictMode renders components twice (in dev, not production) in order to\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// detect problems with your code. If you are running in dev and seeing this trigger\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// twice that could be the reason.\"}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n  `,(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// Use `navigator.sendBeacon()` if available, falling back to `fetch()`.\"}),`\n    (navigator.`,(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"sendBeacon\"}),\" && navigator.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"sendBeacon\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-string\",children:[\"`/api/views/\",(0,e.jsxs)(s.span,{className:\"hljs-subst\",children:[\"${\",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"encodeURIComponent\"}),\"(slug)}\"]}),\"`\"]}),`)) ||\n      `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-string\",children:[\"`/api/views/\",(0,e.jsxs)(s.span,{className:\"hljs-subst\",children:[\"${\",(0,e.jsx)(s.span,{className:\"hljs-built_in\",children:\"encodeURIComponent\"}),\"(slug)}\"]}),\"`\"]}),\", { \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"method\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'POST'\"}),` });\n  }, `,(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"5000\"}),\"); \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// register a page view after 5s\"}),`\n}, [slug]);\n`]})})}),`\n`,(0,e.jsx)(a,{number:2,title:\"Create the API\"}),`\n`,(0,e.jsx)(s.p,{children:\"In this example we are using Next.js so creating an API is pretty simple. We can use the same endpoint to increment stats (via the POST method) and to retrieve stats (via the GET method).\"}),`\n`,(0,e.jsx)(l,{children:(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-js\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { get, upd } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'../../../lib/dynamodb'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" params = { \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"TableName\"}),\": process.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"TABLE_NAME\"}),` };\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"handler\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"req, res\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" { slug } = req.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"query\"}),`;\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),` (!slug) {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"400\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`({\n      `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"error\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:`\"Please provide a value for 'slug'\"`}),`,\n    });\n  }\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// METHOD SWITCH\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"switch\"}),\" (req.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"method\"}),`) {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"case\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'GET'\"}),`:\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"getSlugCount\"}),`(slug);\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"case\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'POST'\"}),`:\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"IncrementSlugCount\"}),`(slug);\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"default\"}),`:\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"405\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"end\"}),\"(\",(0,e.jsxs)(s.span,{className:\"hljs-string\",children:[\"`Method \",(0,e.jsx)(s.span,{className:\"hljs-subst\",children:\"${req.method}\"}),\" Not Allowed`\"]}),`);\n  }\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// GET\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"getSlugCount\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"slug\"}),`) {\n    params = {\n      ...params,\n      `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Key\"}),`: {\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"slug\"}),`: slug,\n      },\n    };\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"try\"}),` {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" data = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"get\"}),`(params);\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (data.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Item\"}),`) {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"200\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),\"(data.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Item\"}),`);\n      } `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"else\"}),` {\n        `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"404\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),\"({ \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"result\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'not found'\"}),` });\n      }\n    } `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"catch\"}),` (err) {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"400\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`(err);\n    }\n  }\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// POST\"}),`\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"IncrementSlugCount\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"slug\"}),`) {\n    params = {\n      ...params,\n      `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Key\"}),`: {\n        `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"slug\"}),`: slug,\n      },\n      `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"UpdateExpression\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'SET viewCount = if_not_exists(viewCount, :initial) + :incr'\"}),`,\n      `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"ExpressionAttributeValues\"}),`: {\n        `,(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"':initial'\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),`,\n        `,(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"':incr'\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`,\n      },\n      `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"ReturnValues\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'UPDATED_NEW'\"}),`,\n    };\n\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"try\"}),` {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" data = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"upd\"}),`(params);\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"201\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),\"({ \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"result\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'success'\"}),\", \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"data\"}),\": data.\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"Attributes\"}),` });\n    } `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"catch\"}),` (err) {\n      `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-number\",children:\"400\"}),\").\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`(err);\n    }\n  }\n}\n`]})})}),`\n`,(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useEffect } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Script\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'next/script'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useRouter } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'next/router'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,e.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"GTM_ID\"}),\", pageview } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'../lib/gtm'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"pageview\"}),\" = (\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"url\"}),`) => {\n  `,(0,e.jsx)(s.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"dataLayer\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"push\"}),`({\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"event\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'pageview'\"}),`,\n    `,(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"page\"}),`: url,\n  });\n};\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"MyApp\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"{ Component, pageProps }\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" router = \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useRouter\"}),`();\n  `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    router.`,(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"events\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"on\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'routeChangeComplete'\"}),`, pageview);\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n      router.`,(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"events\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"off\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'routeChangeComplete'\"}),`, pageview);\n    };\n  }, [router.`,(0,e.jsx)(s.span,{className:\"hljs-property\",children:\"events\"}),`]);\n}\n`]})})]})}function _(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(d,n)})):d(n)}var b=_;function o(n,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return f(v);})();\n;return Component;"
    },
    "_id": "snippets/simple-analytics.mdx",
    "_raw": {
      "sourceFilePath": "snippets/simple-analytics.mdx",
      "sourceFileName": "simple-analytics.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/simple-analytics"
    },
    "type": "Snippet",
    "slug": "/snippets/simple-analytics",
    "slugAsParams": "simple-analytics",
    "stats": {
      "text": "3 min read",
      "minutes": 2.34,
      "time": 140400,
      "words": 468
    }
  },
  {
    "title": "Test Title Which is REALLY Long Because it Keeps Going",
    "summary": "You are contributing value, whether you like it not, when you make your code public. Training machine learning models on publicly available data is considered fair use across the machine learning community. The models gain insight and accuracy from the public collective intelligence. The only way to extract value back out is to use Copilot yourself.",
    "icon": "js",
    "date": "2021-10-23T00:00:00.000Z",
    "published": false,
    "tags": [
      "Javascript",
      "React Hook"
    ],
    "body": {
      "raw": "\n## Test Title\n\nThis page tests out several rendering functions\n\n### Test title with some regular markdown\n\n[GitHub](https://github.com/) (owned by [Microsoft](https://www.microsoft.com/en-us/)), has partnered with [OpenAI](https://openai.com/) to create an AI tool called [Copilot](https://copilot.github.com/) that **writes code for you**. It is a plugin to [Visual Studio Code](https://code.visualstudio.com/) which auto-generates code based on the contents of the current file, and your current cursor location.\n\nOpen AI developed [Codex](https://arxiv.org/abs/2107.03374), a deep neural network language model that translates natural language into code, and Codex is integrated with Copilot. Side note: _OpenAI runs on Microsoft Azure_.\n\nOpenAI's Codex was trained on publicly available source code and natural language, so it understands **both programming and human languages**. Codex is an API-driven service that has many more capabilities, which developers can explore — and build into their own apps — when OpenAI opens access to Codex later this year (2021).\n\n### Test Image\n\n![Copilot Diagram](https://danstroot.imgix.net/assets/blog/img/copilot3.jpg)\n\n### Test Table\n\n| Scale item                                                                                     |   F1 |  F2 |  F3 |\n| ---------------------------------------------------------------------------------------------- | ---: | --: | --: |\n| 1. Evidence must be presented to support decisions made. (1) (R)                               | 0.79 |     |     |\n| 2. People often make assertions that they cannot support. (1)                                  | 0.61 |     |     |\n| 3. It is easy to get access to the data I need to make good decisions. (1) (R)                 | 0.62 |     |     |\n| 4. When making decisions we place more emphasis on evidence than on personal opinions. (1) (R) | 0.79 |     |     |\n\n### Test Emoji\n\n:checkered_flag:\n\n<p>👋 Hi, I love emojis a lot 🤓</p>\n\n### Test Links\n\n[External Link](https://news.ycombinator.com/news)\n\n[Internal Link](/)\n\n### Step 1\n\n<Step number={1} title={'Install the dependencies for mdx-bundler'} />\n\n### Test Block Quote\n\n> “Insist on yourself; never imitate. Your own gift you can offer with the cumulative force of a whole life's cultivation, but of the adopted talent of another, you have only an extemporaneous, half possession.”\n>\n> <cite>&mdash; Ralph Waldo Emerson</cite>\n\n### Test YouTube Embed\n\n<YouTube link=\"https://youtu.be/FHwnrYm0mNc\" />\n\n### Test Tweet Embed\n\n<CustomTweet id=\"1201514996838141952\" />\n\n### Test Gist Embed\n\n### Regular Code Block\n\n<CodeBlock>\n\n```JavaScript:debounce.js {1,4-7} showLineNumbers\nconst debounce = (callback, wait) => {\n    let timeoutId = null;\n\n    return (...args) => {\n        window.clearTimeout(timeoutId);\n\n        timeoutId = window.setTimeout(() => {\n            callback.apply(null, args);\n        }, wait);\n    };\n\n};\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var i in e)r(n,i,{get:e[i],enumerable:!0})},c=(n,e,i,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of g(e))!f.call(n,a)&&a!==i&&r(n,a,{get:()=>e[a],enumerable:!(l=m(e,a))||l.enumerable});return n};var k=(n,e,i)=>(i=n!=null?p(b(n)):{},c(e||!n||!n.__esModule?r(i,\"default\",{value:n,enumerable:!0}):i,n)),j=n=>c(r({},\"__esModule\",{value:!0}),n);var h=w((C,d)=>{d.exports=_jsx_runtime});var I={};y(I,{default:()=>x,frontmatter:()=>v});var t=k(h()),v={title:\"Test Title Which is REALLY Long Because it Keeps Going\",summary:\"You are contributing value, whether you like it not, when you make your code public. Training machine learning models on publicly available data is considered fair use across the machine learning community. The models gain insight and accuracy from the public collective intelligence. The only way to extract value back out is to use Copilot yourself.\",date:\"2021-10-23\",published:!1,icon:\"js\",tags:[\"Javascript\",\"React Hook\"]};function u(n){let e=Object.assign({h2:\"h2\",p:\"p\",h3:\"h3\",a:\"a\",strong:\"strong\",em:\"em\",img:\"img\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",tbody:\"tbody\",td:\"td\",blockquote:\"blockquote\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\"},n.components),{Step:i,YouTube:l,CustomTweet:a,CodeBlock:s}=e;return s||o(\"CodeBlock\",!0),a||o(\"CustomTweet\",!0),i||o(\"Step\",!0),l||o(\"YouTube\",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.h2,{id:\"test-title\",children:\"Test Title\"}),`\n`,(0,t.jsx)(e.p,{children:\"This page tests out several rendering functions\"}),`\n`,(0,t.jsx)(e.h3,{id:\"test-title-with-some-regular-markdown\",children:\"Test title with some regular markdown\"}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:\"https://github.com/\",children:\"GitHub\"}),\" (owned by \",(0,t.jsx)(e.a,{href:\"https://www.microsoft.com/en-us/\",children:\"Microsoft\"}),\"), has partnered with \",(0,t.jsx)(e.a,{href:\"https://openai.com/\",children:\"OpenAI\"}),\" to create an AI tool called \",(0,t.jsx)(e.a,{href:\"https://copilot.github.com/\",children:\"Copilot\"}),\" that \",(0,t.jsx)(e.strong,{children:\"writes code for you\"}),\". It is a plugin to \",(0,t.jsx)(e.a,{href:\"https://code.visualstudio.com/\",children:\"Visual Studio Code\"}),\" which auto-generates code based on the contents of the current file, and your current cursor location.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Open AI developed \",(0,t.jsx)(e.a,{href:\"https://arxiv.org/abs/2107.03374\",children:\"Codex\"}),\", a deep neural network language model that translates natural language into code, and Codex is integrated with Copilot. Side note: \",(0,t.jsx)(e.em,{children:\"OpenAI runs on Microsoft Azure\"}),\".\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"OpenAI's Codex was trained on publicly available source code and natural language, so it understands \",(0,t.jsx)(e.strong,{children:\"both programming and human languages\"}),\". Codex is an API-driven service that has many more capabilities, which developers can explore \\u2014 and build into their own apps \\u2014 when OpenAI opens access to Codex later this year (2021).\"]}),`\n`,(0,t.jsx)(e.h3,{id:\"test-image\",children:\"Test Image\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://danstroot.imgix.net/assets/blog/img/copilot3.jpg\",alt:\"Copilot Diagram\"})}),`\n`,(0,t.jsx)(e.h3,{id:\"test-table\",children:\"Test Table\"}),`\n`,(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:\"Scale item\"}),(0,t.jsx)(e.th,{align:\"right\",children:\"F1\"}),(0,t.jsx)(e.th,{align:\"right\",children:\"F2\"}),(0,t.jsx)(e.th,{align:\"right\",children:\"F3\"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:\"1. Evidence must be presented to support decisions made. (1) (R)\"}),(0,t.jsx)(e.td,{align:\"right\",children:\"0.79\"}),(0,t.jsx)(e.td,{align:\"right\"}),(0,t.jsx)(e.td,{align:\"right\"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:\"2. People often make assertions that they cannot support. (1)\"}),(0,t.jsx)(e.td,{align:\"right\",children:\"0.61\"}),(0,t.jsx)(e.td,{align:\"right\"}),(0,t.jsx)(e.td,{align:\"right\"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:\"3. It is easy to get access to the data I need to make good decisions. (1) (R)\"}),(0,t.jsx)(e.td,{align:\"right\",children:\"0.62\"}),(0,t.jsx)(e.td,{align:\"right\"}),(0,t.jsx)(e.td,{align:\"right\"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:\"4. When making decisions we place more emphasis on evidence than on personal opinions. (1) (R)\"}),(0,t.jsx)(e.td,{align:\"right\",children:\"0.79\"}),(0,t.jsx)(e.td,{align:\"right\"}),(0,t.jsx)(e.td,{align:\"right\"})]})]})]}),`\n`,(0,t.jsx)(e.h3,{id:\"test-emoji\",children:\"Test Emoji\"}),`\n`,(0,t.jsx)(e.p,{children:\":checkered_flag:\"}),`\n`,(0,t.jsx)(\"p\",{children:\"\\u{1F44B} Hi, I love emojis a lot \\u{1F913}\"}),`\n`,(0,t.jsx)(e.h3,{id:\"test-links\",children:\"Test Links\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://news.ycombinator.com/news\",children:\"External Link\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"/\",children:\"Internal Link\"})}),`\n`,(0,t.jsx)(e.h3,{id:\"step-1\",children:\"Step 1\"}),`\n`,(0,t.jsx)(i,{number:1,title:\"Install the dependencies for mdx-bundler\"}),`\n`,(0,t.jsx)(e.h3,{id:\"test-block-quote\",children:\"Test Block Quote\"}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsx)(e.p,{children:\"\\u201CInsist on yourself; never imitate. Your own gift you can offer with the cumulative force of a whole life's cultivation, but of the adopted talent of another, you have only an extemporaneous, half possession.\\u201D\"}),`\n`,(0,t.jsx)(\"cite\",{children:\"\\u2014 Ralph Waldo Emerson\"}),`\n`]}),`\n`,(0,t.jsx)(e.h3,{id:\"test-youtube-embed\",children:\"Test YouTube Embed\"}),`\n`,(0,t.jsx)(l,{link:\"https://youtu.be/FHwnrYm0mNc\"}),`\n`,(0,t.jsx)(e.h3,{id:\"test-tweet-embed\",children:\"Test Tweet Embed\"}),`\n`,(0,t.jsx)(a,{id:\"1201514996838141952\"}),`\n`,(0,t.jsx)(e.h3,{id:\"test-gist-embed\",children:\"Test Gist Embed\"}),`\n`,(0,t.jsx)(e.h3,{id:\"regular-code-block\",children:\"Regular Code Block\"}),`\n`,(0,t.jsxs)(s,{children:[(0,t.jsx)(e.div,{className:\"rehype-code-title\",children:\"debounce.js\"}),(0,t.jsx)(e.pre,{children:(0,t.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,t.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,t.jsx)(e.span,{className:\"hljs-title function_\",children:\"debounce\"}),\" = (\",(0,t.jsx)(e.span,{className:\"hljs-params\",children:\"callback, wait\"}),`) => {\n    `,(0,t.jsx)(e.span,{className:\"hljs-keyword\",children:\"let\"}),\" timeoutId = \",(0,t.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`;\n\n    `,(0,t.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,t.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,t.jsx)(e.span,{className:\"hljs-params\",children:\"...args\"}),\") =>\"]}),` {\n        `,(0,t.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,t.jsx)(e.span,{className:\"hljs-built_in\",children:\"clearTimeout\"}),`(timeoutId);\n\n        timeoutId = `,(0,t.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,t.jsx)(e.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),\"(\",(0,t.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n            callback.`,(0,t.jsx)(e.span,{className:\"hljs-title function_\",children:\"apply\"}),\"(\",(0,t.jsx)(e.span,{className:\"hljs-literal\",children:\"null\"}),`, args);\n        }, wait);\n    };\n\n};\n`]})})]})]})}function T(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,Object.assign({},n,{children:(0,t.jsx)(u,n)})):u(n)}var x=T;function o(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j(I);})();\n;return Component;"
    },
    "_id": "snippets/test.mdx",
    "_raw": {
      "sourceFilePath": "snippets/test.mdx",
      "sourceFileName": "test.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/test"
    },
    "type": "Snippet",
    "slug": "/snippets/test",
    "slugAsParams": "test",
    "stats": {
      "text": "2 min read",
      "minutes": 1.89,
      "time": 113400,
      "words": 378
    }
  },
  {
    "title": "useHasMounted",
    "summary": "When dealing with a server-side rendered application it can be useful to know when you are rendering on the client.",
    "icon": "js",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\n### Why\n\nWhen dealing with a server-side rendered application (through frameworks like Gatsby or Next, or any sort of SSR setup), it can be useful to know whether you're rendering on the server or the client.\n\nThe trick here is that `useEffect` only triggers on the client side _inside_ the browser. Smart right?\n\n### Usage\n\n<CodeBlock>\n\n```js\nconst hasMounted = useHasMounted()\n\nif (hasMounted) {\n  // do stuff\n}\n```\n\n</CodeBlock>\n\n### Code\n\n<CodeBlock>\n\n```javascript:useHasMounted.js\nimport { useState, useEffect } from 'react';\n\nexport const useHasMounted = () => {\n  const [hasMounted, setHasMounted] = useState(false);\n  useEffect(() => {\n    setHasMounted(true);\n  }, []);\n\nreturn hasMounted;\n};\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var f=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),N=(s,e)=>{for(var t in e)r(s,t,{get:e[t],enumerable:!0})},c=(s,e,t,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of p(e))!j.call(s,a)&&a!==t&&r(s,a,{get:()=>e[a],enumerable:!(l=u(e,a))||l.enumerable});return s};var g=(s,e,t)=>(t=s!=null?h(m(s)):{},c(e||!s||!s.__esModule?r(t,\"default\",{value:s,enumerable:!0}):t,s)),w=s=>c(r({},\"__esModule\",{value:!0}),s);var o=f((v,i)=>{i.exports=_jsx_runtime});var _={};N(_,{default:()=>M,frontmatter:()=>y});var n=g(o()),y={title:\"useHasMounted\",published:!0,date:\"2021-10-23\",summary:\"When dealing with a server-side rendered application it can be useful to know when you are rendering on the client.\",icon:\"js\",tags:[\"React Hook\"]};function d(s){let e=Object.assign({h3:\"h3\",p:\"p\",code:\"code\",em:\"em\",pre:\"pre\",span:\"span\",div:\"div\"},s.components),{CodeBlock:t}=e;return t||x(\"CodeBlock\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h3,{id:\"why\",children:\"Why\"}),`\n`,(0,n.jsx)(e.p,{children:\"When dealing with a server-side rendered application (through frameworks like Gatsby or Next, or any sort of SSR setup), it can be useful to know whether you're rendering on the server or the client.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The trick here is that \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" only triggers on the client side \",(0,n.jsx)(e.em,{children:\"inside\"}),\" the browser. Smart right?\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsx)(t,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" hasMounted = \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useHasMounted\"}),`()\n\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),` (hasMounted) {\n  `,(0,n.jsx)(e.span,{className:\"hljs-comment\",children:\"// do stuff\"}),`\n}\n`]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"code\",children:\"Code\"}),`\n`,(0,n.jsxs)(t,{children:[(0,n.jsx)(e.div,{className:\"rehype-code-title\",children:\"useHasMounted.js\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-javascript\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useState, useEffect } \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useHasMounted\"}),\" = (\",(0,n.jsx)(e.span,{className:\"hljs-params\"}),`) => {\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" [hasMounted, setHasMounted] = \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"false\"}),`);\n  `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"setHasMounted\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"true\"}),`);\n  }, []);\n\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` hasMounted;\n};\n`]})})]})]})}function k(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(d,s)})):d(s)}var M=k;function x(s,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(_);})();\n;return Component;"
    },
    "_id": "snippets/use-has-mounted.mdx",
    "_raw": {
      "sourceFilePath": "snippets/use-has-mounted.mdx",
      "sourceFileName": "use-has-mounted.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/use-has-mounted"
    },
    "type": "Snippet",
    "slug": "/snippets/use-has-mounted",
    "slugAsParams": "use-has-mounted",
    "stats": {
      "text": "1 min read",
      "minutes": 0.52,
      "time": 31200,
      "words": 104
    }
  },
  {
    "title": "useMediaQuery",
    "summary": "useMediaQuery is a react hook that makes testing for media query matches in your code easier and simpler. ",
    "icon": "js",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\n### Code\n\n<CodeBlock>\n\n```JavaScript:useMediaQuery.js\nimport { useState, useEffect } from 'react';\n\nexport const useMediaQuery = query => {\n  const [state, setState] = useState(false);\n\n  useEffect(\n    () => {\n      let mounted = true;\n\n      // Returns a MediaQueryList object\n      const mql = window.matchMedia(query);\n      const onChange = () => {\n        if (!mounted) return;\n        setState(!!mql.matches);\n      };\n\n      mql.addListener(onChange);\n      setState(mql.matches);\n\n      // clean up\n      return () => {\n        mounted = false;\n        mql.removeListener(onChange);\n      };\n    },\n    [query]\n  );\n\n  return state;\n};\n```\n\n</CodeBlock>\n\n### Context\n\nIf you have a special case, when you need to get media query result inside you react app (for example, you want to show different components on mobile and desktop) this is the way to do so.\n\n### Usage\n\n<CodeBlock>\n\n```jsx:useMediaQueryExample.jsx\nconst EffecfulComponent = () => {\n  const result = useMediaQuery(`screen and (max-width: 400px)`);\n  return <span>{result.toString()}</span>;\n};\n\nconst biggerThan400 = useMediaQuery(`(min-width: 400px)`);\n\nreturn <div>\n    {biggerThan400 && <button>SomeButton</button>}\n</div>\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var o=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var N=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var a in e)c(n,a,{get:e[a],enumerable:!0})},r=(n,e,a,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of p(e))!j.call(n,l)&&l!==a&&c(n,l,{get:()=>e[l],enumerable:!(t=m(e,l))||t.enumerable});return n};var f=(n,e,a)=>(a=n!=null?o(u(n)):{},r(e||!n||!n.__esModule?c(a,\"default\",{value:n,enumerable:!0}):a,n)),g=n=>r(c({},\"__esModule\",{value:!0}),n);var h=N((v,i)=>{i.exports=_jsx_runtime});var M={};y(M,{default:()=>x,frontmatter:()=>w});var s=f(h()),w={title:\"useMediaQuery\",published:!0,date:\"2021-10-23\",summary:\"useMediaQuery is a react hook that makes testing for media query matches in your code easier and simpler. \",icon:\"js\",tags:[\"React Hook\"]};function d(n){let e=Object.assign({h3:\"h3\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",p:\"p\"},n.components),{CodeBlock:a}=e;return a||_(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h3,{id:\"code\",children:\"Code\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"useMediaQuery.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useState, useEffect } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'react'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useMediaQuery\"}),` = query => {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" [state, setState] = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useState\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-literal\",children:\"false\"}),`);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useEffect\"}),`(\n    `,(0,s.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"let\"}),\" mounted = \",(0,s.jsx)(e.span,{className:\"hljs-literal\",children:\"true\"}),`;\n\n      `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// Returns a MediaQueryList object\"}),`\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" mql = \",(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"matchMedia\"}),`(query);\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"onChange\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) => {\n        `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),\" (!mounted) \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),`;\n        `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"setState\"}),\"(!!mql.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"matches\"}),`);\n      };\n\n      mql.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"addListener\"}),`(onChange);\n      `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"setState\"}),\"(mql.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"matches\"}),`);\n\n      `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// clean up\"}),`\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n        mounted = `,(0,s.jsx)(e.span,{className:\"hljs-literal\",children:\"false\"}),`;\n        mql.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"removeListener\"}),`(onChange);\n      };\n    },\n    [query]\n  );\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` state;\n};\n`]})})]}),`\n`,(0,s.jsx)(e.h3,{id:\"context\",children:\"Context\"}),`\n`,(0,s.jsx)(e.p,{children:\"If you have a special case, when you need to get media query result inside you react app (for example, you want to show different components on mobile and desktop) this is the way to do so.\"}),`\n`,(0,s.jsx)(e.h3,{id:\"usage\",children:\"Usage\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"useMediaQueryExample.jsx\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"EffecfulComponent\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) => {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" result = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useMediaQuery\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"`screen and (max-width: 400px)`\"}),`);\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsxs)(e.span,{className:\"xml\",children:[(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),\"{result.toString()}\",(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"span\"}),\">\"]})]}),`;\n};\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" biggerThan400 = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useMediaQuery\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"`(min-width: 400px)`\"}),`);\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsxs)(e.span,{className:\"xml\",children:[(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n    {biggerThan400 && `,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"button\"}),\">\"]}),\"SomeButton\",(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"button\"}),\">\"]}),`}\n`,(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"div\"}),\">\"]})]}),`\n`]})})]})]})}function k(n={}){let{wrapper:e}=n.components||{};return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(d,n)})):d(n)}var x=k;function _(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return g(M);})();\n;return Component;"
    },
    "_id": "snippets/use-media-query.mdx",
    "_raw": {
      "sourceFilePath": "snippets/use-media-query.mdx",
      "sourceFileName": "use-media-query.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/use-media-query"
    },
    "type": "Snippet",
    "slug": "/snippets/use-media-query",
    "slugAsParams": "use-media-query",
    "stats": {
      "text": "1 min read",
      "minutes": 0.725,
      "time": 43500,
      "words": 145
    }
  },
  {
    "title": "usePrefersReducedMotion",
    "summary": "Some people do not prefer animations, and for some motion can be harmful. The prefers-reduced-motion CSS media query allows us to disable animations.",
    "icon": "react",
    "date": "2021-10-23T00:00:00.000Z",
    "published": true,
    "tags": [
      "React Hook"
    ],
    "body": {
      "raw": "\n<CodeBlock>\n\n```JavaScript:usePrefersReducedMotion.js\nconst QUERY = '(prefers-reduced-motion: no-preference)';\nconst isRenderingOnServer = typeof window === 'undefined';\n\nconst getInitialState = () => {\n  // For our initial server render, we won't know if the user\n  // prefers reduced motion, but it doesn't matter. This value\n  // will be overwritten on the client, before any animations\n  // occur.\n  return isRenderingOnServer ? true : !window.matchMedia(QUERY).matches;\n};\n\nfunction usePrefersReducedMotion() {\n  const [prefersReducedMotion, setPrefersReducedMotion] = React.useState(\n    getInitialState\n  );\n\n  React.useEffect(() => {\n    const mediaQueryList = window.matchMedia(QUERY);\n    const listener = (event) => {\n      setPrefersReducedMotion(!event.matches);\n    };\n\n    if (mediaQueryList.addEventListener) {\n      mediaQueryList.addEventListener('change', listener);\n    } else {\n      mediaQueryList.addListener(listener);\n    }\n\n    return () => {\n      if (mediaQueryList.removeEventListener) {\n        mediaQueryList.removeEventListener('change', listener);\n      } else {\n        mediaQueryList.removeListener(listener);\n      }\n    };\n  }, []);\n\n  return prefersReducedMotion;\n}\n```\n\n</CodeBlock>\n\n### Context\n\nSome people don't prefer animations, and for some motion can be harmful. The prefers-reduced-motion CSS media query allows us to disable animations. For animations that are entirely in CSS (eg. CSS transitions, CSS keyframe animations), this is all you need.\n\nWhat about for our animations in JavaScript, though? For example, when we use a library like React Spring or Framer Motion? We need to manage it ourselves, and this hook helps.\n\n### Usage\n\n<CodeBlock>\n\n```jsx:prefersReducedMotionExample.jsx\nimport { useSpring, animated } from 'react-spring';\n\nconst Box = ({ isBig }) => {\n  const prefersReducedMotion = usePrefersReducedMotion();\n\n  const styles = useSpring({\n    width: 100,\n    height: 100,\n    background: 'rebeccapurple',\n    transform: isBig ? 'scale(2)' : 'scale(1)',\n    immediate: prefersReducedMotion,\n  });\n\n  return <animated.div style={styles}>Box!</animated.div>;\n};\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var o=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var N=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var a in e)r(n,a,{get:e[a],enumerable:!0})},c=(n,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of p(e))!j.call(n,l)&&l!==a&&r(n,l,{get:()=>e[l],enumerable:!(i=m(e,l))||i.enumerable});return n};var y=(n,e,a)=>(a=n!=null?o(u(n)):{},c(e||!n||!n.__esModule?r(a,\"default\",{value:n,enumerable:!0}):a,n)),g=n=>c(r({},\"__esModule\",{value:!0}),n);var d=N((R,t)=>{t.exports=_jsx_runtime});var b={};f(b,{default:()=>k,frontmatter:()=>w});var s=y(d()),w={title:\"usePrefersReducedMotion\",published:!0,date:\"2021-10-23\",summary:\"Some people do not prefer animations, and for some motion can be harmful. The prefers-reduced-motion CSS media query allows us to disable animations.\",icon:\"react\",tags:[\"React Hook\"]};function h(n){let e=Object.assign({div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",p:\"p\"},n.components),{CodeBlock:a}=e;return a||v(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"usePrefersReducedMotion.js\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"QUERY\"}),\" = \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'(prefers-reduced-motion: no-preference)'\"}),`;\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" isRenderingOnServer = \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"typeof\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\" === \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'undefined'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"getInitialState\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) => {\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// For our initial server render, we won't know if the user\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// prefers reduced motion, but it doesn't matter. This value\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// will be overwritten on the client, before any animations\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"// occur.\"}),`\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" isRenderingOnServer ? \",(0,s.jsx)(e.span,{className:\"hljs-literal\",children:\"true\"}),\" : !\",(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"matchMedia\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"QUERY\"}),\").\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"matches\"}),`;\n};\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"usePrefersReducedMotion\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\"}),`) {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" [prefersReducedMotion, setPrefersReducedMotion] = \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useState\"}),`(\n    getInitialState\n  );\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"React\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" mediaQueryList = \",(0,s.jsx)(e.span,{className:\"hljs-variable language_\",children:\"window\"}),\".\",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"matchMedia\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-variable constant_\",children:\"QUERY\"}),`);\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"listener\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"event\"}),`) => {\n      `,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"setPrefersReducedMotion\"}),\"(!event.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"matches\"}),`);\n    };\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),\" (mediaQueryList.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"addEventListener\"}),`) {\n      mediaQueryList.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"addEventListener\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'change'\"}),`, listener);\n    } `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"else\"}),` {\n      mediaQueryList.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"addListener\"}),`(listener);\n    }\n\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n      `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),\" (mediaQueryList.\",(0,s.jsx)(e.span,{className:\"hljs-property\",children:\"removeEventListener\"}),`) {\n        mediaQueryList.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"removeEventListener\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'change'\"}),`, listener);\n      } `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"else\"}),` {\n        mediaQueryList.`,(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"removeListener\"}),`(listener);\n      }\n    };\n  }, []);\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),` prefersReducedMotion;\n}\n`]})})]}),`\n`,(0,s.jsx)(e.h3,{id:\"context\",children:\"Context\"}),`\n`,(0,s.jsx)(e.p,{children:\"Some people don't prefer animations, and for some motion can be harmful. The prefers-reduced-motion CSS media query allows us to disable animations. For animations that are entirely in CSS (eg. CSS transitions, CSS keyframe animations), this is all you need.\"}),`\n`,(0,s.jsx)(e.p,{children:\"What about for our animations in JavaScript, though? For example, when we use a library like React Spring or Framer Motion? We need to manage it ourselves, and this hook helps.\"}),`\n`,(0,s.jsx)(e.h3,{id:\"usage\",children:\"Usage\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"prefersReducedMotionExample.jsx\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-jsx\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { useSpring, animated } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'react-spring'\"}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"Box\"}),\" = (\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"{ isBig }\"}),`) => {\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" prefersReducedMotion = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"usePrefersReducedMotion\"}),`();\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" styles = \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"useSpring\"}),`({\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"width\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"100\"}),`,\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"height\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"100\"}),`,\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"background\"}),\": \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'rebeccapurple'\"}),`,\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"transform\"}),\": isBig ? \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'scale(2)'\"}),\" : \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"'scale(1)'\"}),`,\n    `,(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"immediate\"}),`: prefersReducedMotion,\n  });\n\n  `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsxs)(e.span,{className:\"xml\",children:[(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"<\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"animated.div\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-attr\",children:\"style\"}),\"=\",(0,s.jsx)(e.span,{className:\"hljs-string\",children:\"{styles}\"}),\">\"]}),\"Box!\",(0,s.jsxs)(e.span,{className:\"hljs-tag\",children:[\"</\",(0,s.jsx)(e.span,{className:\"hljs-name\",children:\"animated.div\"}),\">\"]})]}),`;\n};\n`]})})]})]})}function _(n={}){let{wrapper:e}=n.components||{};return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(h,n)})):h(n)}var k=_;function v(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return g(b);})();\n;return Component;"
    },
    "_id": "snippets/use-prefers-reduced-motion.mdx",
    "_raw": {
      "sourceFilePath": "snippets/use-prefers-reduced-motion.mdx",
      "sourceFileName": "use-prefers-reduced-motion.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/use-prefers-reduced-motion"
    },
    "type": "Snippet",
    "slug": "/snippets/use-prefers-reduced-motion",
    "slugAsParams": "use-prefers-reduced-motion",
    "stats": {
      "text": "2 min read",
      "minutes": 1.195,
      "time": 71700,
      "words": 239
    }
  },
  {
    "title": "Wait",
    "summary": "Sometimes when you are testing, or playing around, you just want to simulate some delay. Here's a simple way to do just that.",
    "icon": "js",
    "date": "2022-12-31T00:00:00.000Z",
    "published": true,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\n<CodeBlock>\n\n```JavaScript:timeout.ts\nexport function timeout(delay: number) {\n    return new Promise( res => setTimeout(res, delay) );\n}\n```\n\n</CodeBlock>\n\n### Context\n\nSometimes when you are building something you want to see how it works with a little delay. I use this for playing with, or testing, React suspense. \n\n### Usage\n\n<CodeBlock>\n\n```JavaScript:waitExample.ts\nimport { timeout } from \"../lib/timeout\";\n\nawait timeout(1000); //for 1 sec delay\n```\n\n</CodeBlock>\n",
      "code": "var Component=(()=>{var h=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var a in e)l(n,a,{get:e[a],enumerable:!0})},r=(n,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of p(e))!j.call(n,t)&&t!==a&&l(n,t,{get:()=>e[t],enumerable:!(i=m(e,t))||i.enumerable});return n};var N=(n,e,a)=>(a=n!=null?h(u(n)):{},r(e||!n||!n.__esModule?l(a,\"default\",{value:n,enumerable:!0}):a,n)),g=n=>r(l({},\"__esModule\",{value:!0}),n);var o=y((C,c)=>{c.exports=_jsx_runtime});var b={};w(b,{default:()=>_,frontmatter:()=>f});var s=N(o()),f={title:\"Wait\",published:!0,date:\"2022-12-31\",summary:\"Sometimes when you are testing, or playing around, you just want to simulate some delay. Here's a simple way to do just that.\",icon:\"js\",tags:[\"Javascript\"]};function d(n){let e=Object.assign({div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",p:\"p\"},n.components),{CodeBlock:a}=e;return a||k(\"CodeBlock\",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"timeout.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"timeout\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"delay: number\"}),`) {\n    `,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"return\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title class_\",children:\"Promise\"}),\"( \",(0,s.jsxs)(e.span,{className:\"hljs-function\",children:[(0,s.jsx)(e.span,{className:\"hljs-params\",children:\"res\"}),\" =>\"]}),\" \",(0,s.jsx)(e.span,{className:\"hljs-built_in\",children:\"setTimeout\"}),`(res, delay) );\n}\n`]})})]}),`\n`,(0,s.jsx)(e.h3,{id:\"context\",children:\"Context\"}),`\n`,(0,s.jsx)(e.p,{children:\"Sometimes when you are building something you want to see how it works with a little delay. I use this for playing with, or testing, React suspense.\"}),`\n`,(0,s.jsx)(e.h3,{id:\"usage\",children:\"Usage\"}),`\n`,(0,s.jsxs)(a,{children:[(0,s.jsx)(e.div,{className:\"rehype-code-title\",children:\"waitExample.ts\"}),(0,s.jsx)(e.pre,{children:(0,s.jsxs)(e.code,{className:\"hljs language-JavaScript\",children:[(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { timeout } \",(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-string\",children:'\"../lib/timeout\"'}),`;\n\n`,(0,s.jsx)(e.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,s.jsx)(e.span,{className:\"hljs-title function_\",children:\"timeout\"}),\"(\",(0,s.jsx)(e.span,{className:\"hljs-number\",children:\"1000\"}),\"); \",(0,s.jsx)(e.span,{className:\"hljs-comment\",children:\"//for 1 sec delay\"}),`\n`]})})]})]})}function x(n={}){let{wrapper:e}=n.components||{};return e?(0,s.jsx)(e,Object.assign({},n,{children:(0,s.jsx)(d,n)})):d(n)}var _=x;function k(n,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return g(b);})();\n;return Component;"
    },
    "_id": "snippets/wait.mdx",
    "_raw": {
      "sourceFilePath": "snippets/wait.mdx",
      "sourceFileName": "wait.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/wait"
    },
    "type": "Snippet",
    "slug": "/snippets/wait",
    "slugAsParams": "wait",
    "stats": {
      "text": "1 min read",
      "minutes": 0.325,
      "time": 19500,
      "words": 65
    }
  },
  {
    "title": "Web Vitals",
    "summary": "Web Vitals is an initiative by Google to provide unified guidance for quality signals that are essential to delivering a great user experience on the web.",
    "icon": "js",
    "date": "2021-10-23T00:00:00.000Z",
    "published": false,
    "tags": [
      "Javascript"
    ],
    "body": {
      "raw": "\nWeb Vitals is an initiative by Google to provide unified guidance for quality signals that are essential to delivering a great user experience on the web. The Web Vitals initiative aims to simplify the landscape, and help sites focus on the metrics that matter most, the Core Web Vitals.\n\n**Core Web Vitals** are the subset of Web Vitals that apply to **all web pages**, should be measured by all site owners, and will be surfaced across all Google tools.\n\nEach of the Core Web Vitals metrics represents a distinct facet of the user experience, is measurable in the field, and reflects the real-world experience of a critical user-centric outcome.\n\n### The Metrics\n\n- **Largest Contentful Paint (LCP)** : measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading.\n\n- **First Input Delay (FID)**: measures interactivity. To provide a good user experience, pages should have a FID of 100 milliseconds or less.\n\n- **Cumulative Layout Shift (CLS)**: measures visual stability. To provide a good user experience, pages should maintain a CLS of 0.1. or less.\n\n- **First Contentful Paint (FCP)**: measures perceived load speed because it marks the first point in the page load timeline where the user can see anything on the screen. a fast FCP helps reassure the user that something is happening.\n\n- **Time to First Byte (TTFB)**: a foundational metric for measuring connection setup time and web server responsiveness in both the lab and the field. It helps identify when a web server is too slow to respond to requests. When a user requests an HTML document it precedes every other meaningful loading performance metric.\n\n### Implementing Web Vitals Metrics\n\n<CodeBlock>\n\n```js\nexport const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n```\n\n</CodeBlock>\n\n<CodeBlock>\n\n```js\nimport { reportWebVitals } from './reportWebVitals';\n\nfunction sendToAnalytics(metric) {\n  const body = JSON.stringify(metric);\n\n  // Use `navigator.sendBeacon()` if available, falling back to `fetch()`.\n  (navigator.sendBeacon && navigator.sendBeacon('/analytics', body)) ||\n    fetch('/analytics', { body, method: 'POST', keepalive: true });\n}\n\nreportWebVitals(sendToAnalytics);\n```\n\n</CodeBlock>\n\nOnce you've configured your site to use the web-vitals library to measure and send your Core Web Vitals data to an analytics endpoint, the next step is to aggregate and report on that data to see if your pages are meeting the recommended thresholds for at least 75% of page visits.\n\n### References\n\n- [Web Vitals](https://web.dev/learn-web-vitals/)\n- [Send Beacon](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon)\n- [Track Web Vitals in Google Analytics GA4](https://www.simoahava.com/analytics/track-core-web-vitals-in-ga4-with-google-tag-manager/)\n- [Web Vitals Report](https://github.com/GoogleChromeLabs/web-vitals-report)\n",
      "code": "var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),b=(s,e)=>{for(var a in e)i(s,a,{get:e[a],enumerable:!0})},r=(s,e,a,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of m(e))!g.call(s,t)&&t!==a&&i(s,t,{get:()=>e[t],enumerable:!(l=p(e,t))||l.enumerable});return s};var y=(s,e,a)=>(a=s!=null?d(u(s)):{},r(e||!s||!s.__esModule?i(a,\"default\",{value:s,enumerable:!0}):a,s)),j=s=>r(i({},\"__esModule\",{value:!0}),s);var o=f((P,c)=>{c.exports=_jsx_runtime});var _={};b(_,{default:()=>w,frontmatter:()=>N});var n=y(o()),N={title:\"Web Vitals\",published:!1,date:\"2021-10-23\",summary:\"Web Vitals is an initiative by Google to provide unified guidance for quality signals that are essential to delivering a great user experience on the web.\",icon:\"js\",tags:[\"Javascript\"]};function h(s){let e=Object.assign({p:\"p\",strong:\"strong\",h3:\"h3\",ul:\"ul\",li:\"li\",pre:\"pre\",code:\"code\",span:\"span\",a:\"a\"},s.components),{CodeBlock:a}=e;return a||C(\"CodeBlock\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Web Vitals is an initiative by Google to provide unified guidance for quality signals that are essential to delivering a great user experience on the web. The Web Vitals initiative aims to simplify the landscape, and help sites focus on the metrics that matter most, the Core Web Vitals.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Core Web Vitals\"}),\" are the subset of Web Vitals that apply to \",(0,n.jsx)(e.strong,{children:\"all web pages\"}),\", should be measured by all site owners, and will be surfaced across all Google tools.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Each of the Core Web Vitals metrics represents a distinct facet of the user experience, is measurable in the field, and reflects the real-world experience of a critical user-centric outcome.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"the-metrics\",children:\"The Metrics\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Largest Contentful Paint (LCP)\"}),\" : measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"First Input Delay (FID)\"}),\": measures interactivity. To provide a good user experience, pages should have a FID of 100 milliseconds or less.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Cumulative Layout Shift (CLS)\"}),\": measures visual stability. To provide a good user experience, pages should maintain a CLS of 0.1. or less.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"First Contentful Paint (FCP)\"}),\": measures perceived load speed because it marks the first point in the page load timeline where the user can see anything on the screen. a fast FCP helps reassure the user that something is happening.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Time to First Byte (TTFB)\"}),\": a foundational metric for measuring connection setup time and web server responsiveness in both the lab and the field. It helps identify when a web server is too slow to respond to requests. When a user requests an HTML document it precedes every other meaningful loading performance metric.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"implementing-web-vitals-metrics\",children:\"Implementing Web Vitals Metrics\"}),`\n`,(0,n.jsx)(a,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"reportWebVitals\"}),\" = (\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"onPerfEntry\"}),`) => {\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"if\"}),\" (onPerfEntry && onPerfEntry \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"instanceof\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"Function\"}),`) {\n    `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'web-vitals'\"}),\").\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"then\"}),\"(\",(0,n.jsxs)(e.span,{className:\"hljs-function\",children:[\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"{ getCLS, getFID, getFCP, getLCP, getTTFB }\"}),\") =>\"]}),` {\n      `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"getCLS\"}),`(onPerfEntry);\n      `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"getFID\"}),`(onPerfEntry);\n      `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"getFCP\"}),`(onPerfEntry);\n      `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"getLCP\"}),`(onPerfEntry);\n      `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"getTTFB\"}),`(onPerfEntry);\n    });\n  }\n};\n`]})})}),`\n`,(0,n.jsx)(a,{children:(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"hljs language-js\",children:[(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"import\"}),\" { reportWebVitals } \",(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'./reportWebVitals'\"}),`;\n\n`,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"sendToAnalytics\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-params\",children:\"metric\"}),`) {\n  `,(0,n.jsx)(e.span,{className:\"hljs-keyword\",children:\"const\"}),\" body = \",(0,n.jsx)(e.span,{className:\"hljs-title class_\",children:\"JSON\"}),\".\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"stringify\"}),`(metric);\n\n  `,(0,n.jsx)(e.span,{className:\"hljs-comment\",children:\"// Use `navigator.sendBeacon()` if available, falling back to `fetch()`.\"}),`\n  (navigator.`,(0,n.jsx)(e.span,{className:\"hljs-property\",children:\"sendBeacon\"}),\" && navigator.\",(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"sendBeacon\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'/analytics'\"}),`, body)) ||\n    `,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(\",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'/analytics'\"}),\", { body, \",(0,n.jsx)(e.span,{className:\"hljs-attr\",children:\"method\"}),\": \",(0,n.jsx)(e.span,{className:\"hljs-string\",children:\"'POST'\"}),\", \",(0,n.jsx)(e.span,{className:\"hljs-attr\",children:\"keepalive\"}),\": \",(0,n.jsx)(e.span,{className:\"hljs-literal\",children:\"true\"}),` });\n}\n\n`,(0,n.jsx)(e.span,{className:\"hljs-title function_\",children:\"reportWebVitals\"}),`(sendToAnalytics);\n`]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Once you've configured your site to use the web-vitals library to measure and send your Core Web Vitals data to an analytics endpoint, the next step is to aggregate and report on that data to see if your pages are meeting the recommended thresholds for at least 75% of page visits.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://web.dev/learn-web-vitals/\",children:\"Web Vitals\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon\",children:\"Send Beacon\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://www.simoahava.com/analytics/track-core-web-vitals-in-ga4-with-google-tag-manager/\",children:\"Track Web Vitals in Google Analytics GA4\"})}),`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/GoogleChromeLabs/web-vitals-report\",children:\"Web Vitals Report\"})}),`\n`]})]})}function v(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(h,s)})):h(s)}var w=v;function C(s,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return j(_);})();\n;return Component;"
    },
    "_id": "snippets/web-vitals.mdx",
    "_raw": {
      "sourceFilePath": "snippets/web-vitals.mdx",
      "sourceFileName": "web-vitals.mdx",
      "sourceFileDir": "snippets",
      "contentType": "mdx",
      "flattenedPath": "snippets/web-vitals"
    },
    "type": "Snippet",
    "slug": "/snippets/web-vitals",
    "slugAsParams": "web-vitals",
    "stats": {
      "text": "3 min read",
      "minutes": 2.16,
      "time": 129600,
      "words": 432
    }
  }
]