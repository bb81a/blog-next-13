{
  "title": "Adding Syntax Highlighting in Nextjs",
  "summary": "If you want to show example code on a page in Nextjs you will help your readers by implemeting some form of syntax highlighting. Here's how.",
  "icon": "js",
  "date": "2021-12-03T00:00:00.000Z",
  "published": false,
  "tags": [
    "Javascript"
  ],
  "body": {
    "raw": "\n## Adding highlighting in a markdown-based blog\n\n<Step number={1} title='Add syntax highlights to markdown code' />\n\nIf you are using something like Remark you can simply add remark-prism to your markdown processing as follows.\n\n<CodeBlock>\n\n```JavaScript:markdownToHTML.js {4, 18} showLineNumbers\nimport { remark } from 'remark';\nimport html from 'remark-html';\nimport gfm from 'remark-gfm';\nimport prism from 'remark-prism';\nimport emoji from 'remark-emoji';\n\n/*\nUsing remark to convert markdown to HTML:\n  - prism for code syntax highlighting\n  - gfm for tables\n  - emoji\n*/\n\nexport async function markdownToHTML(markdown) {\n  const result = await remark()\n    .use(html, { sanitize: false })\n    .use(gfm)\n    .use(prism)\n    .use(emoji)\n    .process(markdown);\n  return result.toString();\n}\n```\n\n</CodeBlock>\n\n<Step number={2} title='Add css' />\n\nThen, make sure you load a prism css theme to actually colorize your code.\n\n<CodeBlock>\n\n```JavaScript:/pages/_app.js {1} showLineNumbers\nimport 'prismjs/themes/prism-tomorrow.css';\nimport '../styles/index.css';\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <Component {...pageProps} />\n  );\n}\n\n```\n\n</CodeBlock>\n\n### Adding highlighting to HTML directly\n\nIn this case we will be moving some of the work from the server to the client\n\n<Step number={1} title='Install prism js using npm / yarn' />\n\n```Shell\nnpm i prismjs\nyarn add prismjs\n```\n\nPrismjs also provides TypeScript support, `npm i @types/prismjs` or yarn add `@types/prismjs`\n\n<Step number={1} title='Use prismjs on your page' />\n\nImport prismjs into your blog page and highlight all.\nThe next step is just import prismjs into your codes and call the highlightAll function in your useEffect / componentDidMount.\n\n<CodeBlock>\n\n```Javascript:/pages/page.js\nimport Prism from 'prismjs';\nimport \"prismjs/components/prism-java\"; // if you need a specific language\nimport 'prismjs/themes/prism-tomorrow.css'; // css theme\n\nexport default function Index() {\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') { // don't run on server\n        Prism.highlightAll();\n    }\n  }, []);\n\n  return (\n    <pre class=\"language-javascript\" >\n      <code>\n        function getFullName (user) {\n          const fullName = user.firstName + user.lastName;\n\n          return fullName;\n        }\n      </code>\n    </pre>\n  );\n}\n```\n\n</CodeBlock>\n\nIt will automatically select the code blocks and will highlight them all. Note, you must have your code in the format above.\n\n#### References\n\n- [Prismjs](https://prismjs.com/)\n",
    "code": "var Component=(()=>{var o=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var u=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),y=(n,s)=>{for(var a in s)i(n,a,{get:s[a],enumerable:!0})},c=(n,s,a,l)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let r of j(s))!N.call(n,r)&&r!==a&&i(n,r,{get:()=>s[r],enumerable:!(l=p(s,r))||l.enumerable});return n};var f=(n,s,a)=>(a=n!=null?o(g(n)):{},c(s||!n||!n.__esModule?i(a,\"default\",{value:n,enumerable:!0}):a,n)),w=n=>c(i({},\"__esModule\",{value:!0}),n);var t=u((M,h)=>{h.exports=_jsx_runtime});var b={};y(b,{default:()=>_,frontmatter:()=>k});var e=f(t()),k={title:\"Adding Syntax Highlighting in Nextjs\",summary:\"If you want to show example code on a page in Nextjs you will help your readers by implemeting some form of syntax highlighting. Here's how.\",date:\"2021-12-03\",published:!1,icon:\"js\",tags:[\"Javascript\"]};function m(n){let s=Object.assign({h2:\"h2\",p:\"p\",div:\"div\",pre:\"pre\",code:\"code\",span:\"span\",h3:\"h3\",h4:\"h4\",ul:\"ul\",li:\"li\",a:\"a\"},n.components),{Step:a,CodeBlock:l}=s;return l||d(\"CodeBlock\",!0),a||d(\"Step\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.h2,{id:\"adding-highlighting-in-a-markdown-based-blog\",children:\"Adding highlighting in a markdown-based blog\"}),`\n`,(0,e.jsx)(a,{number:1,title:\"Add syntax highlights to markdown code\"}),`\n`,(0,e.jsx)(s.p,{children:\"If you are using something like Remark you can simply add remark-prism to your markdown processing as follows.\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"markdownToHTML.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-JavaScript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { remark } \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" html \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-html'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" gfm \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-gfm'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" prism \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-prism'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" emoji \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'remark-emoji'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-comment\",children:`/*\nUsing remark to convert markdown to HTML:\n  - prism for code syntax highlighting\n  - gfm for tables\n  - emoji\n*/`}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"markdownToHTML\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"markdown\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" result = \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"remark\"}),`()\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),\"(html, { \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"sanitize\"}),\": \",(0,e.jsx)(s.span,{className:\"hljs-literal\",children:\"false\"}),` })\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),`(gfm)\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),`(prism)\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"use\"}),`(emoji)\n    .`,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"process\"}),`(markdown);\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" result.\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"toString\"}),`();\n}\n`]})})]}),`\n`,(0,e.jsx)(a,{number:2,title:\"Add css\"}),`\n`,(0,e.jsx)(s.p,{children:\"Then, make sure you load a prism css theme to actually colorize your code.\"}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"/pages/_app.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-JavaScript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'prismjs/themes/prism-tomorrow.css'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'../styles/index.css'\"}),`;\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"MyApp\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\",children:\"{ Component, pageProps }\"}),`) {\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsx)(s.span,{className:\"xml\",children:(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"Component\"}),\" {\",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"...pageProps\"}),\"} />\"]})}),`\n  );\n}\n\n`]})})]}),`\n`,(0,e.jsx)(s.h3,{id:\"adding-highlighting-to-html-directly\",children:\"Adding highlighting to HTML directly\"}),`\n`,(0,e.jsx)(s.p,{children:\"In this case we will be moving some of the work from the server to the client\"}),`\n`,(0,e.jsx)(a,{number:1,title:\"Install prism js using npm / yarn\"}),`\n`,(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:\"hljs language-Shell\",children:`npm i prismjs\nyarn add prismjs\n`})}),`\n`,(0,e.jsxs)(s.p,{children:[\"Prismjs also provides TypeScript support, \",(0,e.jsx)(s.code,{children:\"npm i @types/prismjs\"}),\" or yarn add \",(0,e.jsx)(s.code,{children:\"@types/prismjs\"})]}),`\n`,(0,e.jsx)(a,{number:1,title:\"Use prismjs on your page\"}),`\n`,(0,e.jsx)(s.p,{children:`Import prismjs into your blog page and highlight all.\nThe next step is just import prismjs into your codes and call the highlightAll function in your useEffect / componentDidMount.`}),`\n`,(0,e.jsxs)(l,{children:[(0,e.jsx)(s.div,{className:\"rehype-code-title\",children:\"/pages/page.js\"}),(0,e.jsx)(s.pre,{children:(0,e.jsxs)(s.code,{className:\"hljs language-Javascript\",children:[(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Prism\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'prismjs'\"}),`;\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"prismjs/components/prism-java\"'}),\"; \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// if you need a specific language\"}),`\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'prismjs/themes/prism-tomorrow.css'\"}),\"; \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// css theme\"}),`\n\n`,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"Index\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-params\"}),`) {\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"useEffect\"}),\"(\",(0,e.jsx)(s.span,{className:\"hljs-function\",children:\"() =>\"}),` {\n    `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"if\"}),\" (\",(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"typeof\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-variable language_\",children:\"window\"}),\" !== \",(0,e.jsx)(s.span,{className:\"hljs-string\",children:\"'undefined'\"}),\") { \",(0,e.jsx)(s.span,{className:\"hljs-comment\",children:\"// don't run on server\"}),`\n        `,(0,e.jsx)(s.span,{className:\"hljs-title class_\",children:\"Prism\"}),\".\",(0,e.jsx)(s.span,{className:\"hljs-title function_\",children:\"highlightAll\"}),`();\n    }\n  }, []);\n\n  `,(0,e.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,e.jsxs)(s.span,{className:\"xml\",children:[(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"pre\"}),\" \",(0,e.jsx)(s.span,{className:\"hljs-attr\",children:\"class\"}),\"=\",(0,e.jsx)(s.span,{className:\"hljs-string\",children:'\"language-javascript\"'}),\" >\"]}),`\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"code\"}),\">\"]}),`\n        function getFullName (user) {\n          const fullName = user.firstName + user.lastName;\n\n          return fullName;\n        }\n      `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"code\"}),\">\"]}),`\n    `,(0,e.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,e.jsx)(s.span,{className:\"hljs-name\",children:\"pre\"}),\">\"]})]}),`\n  );\n}\n`]})})]}),`\n`,(0,e.jsx)(s.p,{children:\"It will automatically select the code blocks and will highlight them all. Note, you must have your code in the format above.\"}),`\n`,(0,e.jsx)(s.h4,{id:\"references\",children:\"References\"}),`\n`,(0,e.jsxs)(s.ul,{children:[`\n`,(0,e.jsx)(s.li,{children:(0,e.jsx)(s.a,{href:\"https://prismjs.com/\",children:\"Prismjs\"})}),`\n`]})]})}function x(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(m,n)})):m(n)}var _=x;function d(n,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(b);})();\n;return Component;"
  },
  "_id": "snippets/prismjs-syntax-highlighting.mdx",
  "_raw": {
    "sourceFilePath": "snippets/prismjs-syntax-highlighting.mdx",
    "sourceFileName": "prismjs-syntax-highlighting.mdx",
    "sourceFileDir": "snippets",
    "contentType": "mdx",
    "flattenedPath": "snippets/prismjs-syntax-highlighting"
  },
  "type": "Snippet",
  "slug": "/snippets/prismjs-syntax-highlighting",
  "slugAsParams": "prismjs-syntax-highlighting",
  "stats": {
    "text": "2 min read",
    "minutes": 1.67,
    "time": 100200,
    "words": 334
  }
}