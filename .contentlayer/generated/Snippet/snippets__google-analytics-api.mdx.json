{
  "title": "Google Analytics API",
  "summary": "Using Google Analytics API to get page data.",
  "icon": "ga",
  "date": "2021-10-21T00:00:00.000Z",
  "published": true,
  "tags": [
    "Javascript"
  ],
  "body": {
    "raw": "\nLet's assume you have Google Analytics setup for your account and you want to display your analytics in your application like [this](/stats). Well Google has an [API](https://googleapis.dev/nodejs/analytics-data/latest/v1beta.BetaAnalyticsDataClient.html) you can use.\n\nYou can call this API from a Next API as follows:\n\n<Step number={1} title='Create a Google Service Account' />\n\n- Go to [Google Developer Console](https://console.cloud.google.com) and create a new project if you haven't already.\n- On the sidebar click on **Credentials** and then **Create Credentials**\n- Select **Service Account** as the credential type.\n- Go back to the **Credentials** page and select **Service Accounts**\n- Select **Keys** tab and then **Add Key** then create a **JSON key**\n- Download and keep this **JSON key** safe.\n\n<Step number={2} title='Enable the Google Analytics Data API' />\n\n- On the sidebar click on **APIs & Services** and **ENABLE APIS AND SERVICES**\n- Search for **Google Analytics Data API** and enable it\n- Go to Analytics dashboard and click on **Admin** -> **Property User Management** -> **Add Users**\n- Add your service account email address (look in the JSON key for the email) and give it **Read and Analyze** access.\n\nThis may be a little confusing but you are just granting the service account you just created access to the Google Analytics Data API so you can use it in your Next app.\n\n<Step number={3} title='Install the @google-analytics/data package' />\n\n- `npm install @google-analytics/data` or `yarn add @google-analytics/data`\n- Set the **client_email**, **client_id** and **private_key** as env variables in your _.env.local_ file\n\n<Step number={4} title='Get the Data (create a Next API)' />\n\n<CodeBlock>\n\n```js\nimport { BetaAnalyticsDataClient } from '@google-analytics/data';\n\nexport default async function handler(req, res) {\n  const analyticsDataClient = new BetaAnalyticsDataClient({\n    credentials: {\n      client_email: process.env.ANALYTICS_CLIENT_EMAIL,\n      private_key: process.env.ANALYTICS_PRIVATE_KEY.replace(/\\\\n/g, '\\n'),\n    },\n    projectId: process.env.ANALYTICS_PROJECT_ID,\n  });\n\n  const propertyId = PROPERTY_ID; // place your property id here available in analytics console.\n  let today = new Date().getTime() - 60 * 60 * 24 * 60 * 1000;\n  let day = new Date(today).getDate();\n  let month = new Date(today).getMonth() + 1;\n  let year = new Date(today).getFullYear();\n\n  let dayFormat = `${year}-${month}-${day}`;\n\n  const totalReport = await analyticsDataClient.runReport({\n    property: 'properties/' + propertyId,\n    dateRanges: [\n      {\n        startDate: dayFormat,\n        endDate: 'today',\n      },\n    ],\n\n    metrics: [\n      {\n        name: 'screenpageViews',\n      },\n      {\n        name: 'engagementRate',\n      },\n      {\n        name: 'totalUsers',\n      },\n    ],\n  });\n\n  return res.status(200).json({\n    pageViews: totalReport[0].rows[0].metricValues[0].value,\n    engagmentRate: totalReport[0].rows[0].metricValues[1].value,\n    totalUsers: totalReport[0].rows[0].metricValues[2].value,\n  });\n}\n```\n\n</CodeBlock>\n\n<Step number={5} title='Show the Data' />\n\nHere's the exact React component I used as linked above. The markup is styled using [Tailwindcss](https://tailwindcss.com/) so that may look unfamiliar, but we just call the Next API using useSWR (which calls the Google Analytics API) and then we show Page Views, Engagement and Users.\n\n<CodeBlock>\n\n```jsx\nimport useSWR from 'swr';\nimport millify from 'millify';\n\nexport const Stats = () => {\n  const fetcher = (...args) => fetch(...args).then((res) => res.json());\n  const { data: stats } = useSWR('/api/stats', fetcher);\n\n  return (\n    <div className='flex flex-col mx-5'>\n      <h1 className='text-4xl md:text-6xl lg:text-7xl font-bold tracking-tighter leading-tight md:leading-none text-center md:text-left my-8'>\n        Analytics\n      </h1>\n\n      <div className='grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 mb-6'>\n        {/* Views */}\n        <div className='flex relative flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'>\n          <h1 className='text-2xl font-black'>Page Views</h1>\n          <span className='text-5xl font-black'>{!stats ? '-' : millify(stats.pageViews)}</span>\n        </div>\n        {/* Engagement */}\n        <div className='flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'>\n          <h1 className='text-2xl font-black'>Engagement Rate</h1>\n          <span className='text-5xl font-black'>\n            {!stats ? '-' : (stats.engagmentRate * 100).toFixed(0) + '%'}\n          </span>\n        </div>\n        {/* Users */}\n        <div className='flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'>\n          <h1 className='text-2xl font-black'>Total Users</h1>\n          <span className='text-5xl font-black'>{!stats ? '-' : millify(stats.totalUsers)}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n```\n\n</CodeBlock>\n",
    "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),u=(e,s)=>{for(var l in s)r(e,l,{get:s[l],enumerable:!0})},t=(e,s,l,n)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of N(s))!g.call(e,c)&&c!==l&&r(e,c,{get:()=>s[c],enumerable:!(n=o(s,c))||n.enumerable});return e};var f=(e,s,l)=>(l=e!=null?p(j(e)):{},t(s||!e||!e.__esModule?r(l,\"default\",{value:e,enumerable:!0}):l,e)),w=e=>t(r({},\"__esModule\",{value:!0}),e);var i=y((v,h)=>{h.exports=_jsx_runtime});var A={};u(A,{default:()=>x,frontmatter:()=>k});var a=f(i()),k={title:\"Google Analytics API\",published:!0,date:\"2021-10-21\",summary:\"Using Google Analytics API to get page data.\",icon:\"ga\",tags:[\"Javascript\"]};function d(e){let s=Object.assign({p:\"p\",a:\"a\",ul:\"ul\",li:\"li\",strong:\"strong\",code:\"code\",em:\"em\",pre:\"pre\",span:\"span\"},e.components),{Step:l,CodeBlock:n}=s;return n||m(\"CodeBlock\",!0),l||m(\"Step\",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:[\"Let's assume you have Google Analytics setup for your account and you want to display your analytics in your application like \",(0,a.jsx)(s.a,{href:\"/stats\",children:\"this\"}),\". Well Google has an \",(0,a.jsx)(s.a,{href:\"https://googleapis.dev/nodejs/analytics-data/latest/v1beta.BetaAnalyticsDataClient.html\",children:\"API\"}),\" you can use.\"]}),`\n`,(0,a.jsx)(s.p,{children:\"You can call this API from a Next API as follows:\"}),`\n`,(0,a.jsx)(l,{number:1,title:\"Create a Google Service Account\"}),`\n`,(0,a.jsxs)(s.ul,{children:[`\n`,(0,a.jsxs)(s.li,{children:[\"Go to \",(0,a.jsx)(s.a,{href:\"https://console.cloud.google.com\",children:\"Google Developer Console\"}),\" and create a new project if you haven't already.\"]}),`\n`,(0,a.jsxs)(s.li,{children:[\"On the sidebar click on \",(0,a.jsx)(s.strong,{children:\"Credentials\"}),\" and then \",(0,a.jsx)(s.strong,{children:\"Create Credentials\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Select \",(0,a.jsx)(s.strong,{children:\"Service Account\"}),\" as the credential type.\"]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Go back to the \",(0,a.jsx)(s.strong,{children:\"Credentials\"}),\" page and select \",(0,a.jsx)(s.strong,{children:\"Service Accounts\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Select \",(0,a.jsx)(s.strong,{children:\"Keys\"}),\" tab and then \",(0,a.jsx)(s.strong,{children:\"Add Key\"}),\" then create a \",(0,a.jsx)(s.strong,{children:\"JSON key\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Download and keep this \",(0,a.jsx)(s.strong,{children:\"JSON key\"}),\" safe.\"]}),`\n`]}),`\n`,(0,a.jsx)(l,{number:2,title:\"Enable the Google Analytics Data API\"}),`\n`,(0,a.jsxs)(s.ul,{children:[`\n`,(0,a.jsxs)(s.li,{children:[\"On the sidebar click on \",(0,a.jsx)(s.strong,{children:\"APIs & Services\"}),\" and \",(0,a.jsx)(s.strong,{children:\"ENABLE APIS AND SERVICES\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Search for \",(0,a.jsx)(s.strong,{children:\"Google Analytics Data API\"}),\" and enable it\"]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Go to Analytics dashboard and click on \",(0,a.jsx)(s.strong,{children:\"Admin\"}),\" -> \",(0,a.jsx)(s.strong,{children:\"Property User Management\"}),\" -> \",(0,a.jsx)(s.strong,{children:\"Add Users\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Add your service account email address (look in the JSON key for the email) and give it \",(0,a.jsx)(s.strong,{children:\"Read and Analyze\"}),\" access.\"]}),`\n`]}),`\n`,(0,a.jsx)(s.p,{children:\"This may be a little confusing but you are just granting the service account you just created access to the Google Analytics Data API so you can use it in your Next app.\"}),`\n`,(0,a.jsx)(l,{number:3,title:\"Install the @google-analytics/data package\"}),`\n`,(0,a.jsxs)(s.ul,{children:[`\n`,(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:\"npm install @google-analytics/data\"}),\" or \",(0,a.jsx)(s.code,{children:\"yarn add @google-analytics/data\"})]}),`\n`,(0,a.jsxs)(s.li,{children:[\"Set the \",(0,a.jsx)(s.strong,{children:\"client_email\"}),\", \",(0,a.jsx)(s.strong,{children:\"client_id\"}),\" and \",(0,a.jsx)(s.strong,{children:\"private_key\"}),\" as env variables in your \",(0,a.jsx)(s.em,{children:\".env.local\"}),\" file\"]}),`\n`]}),`\n`,(0,a.jsx)(l,{number:4,title:\"Get the Data (create a Next API)\"}),`\n`,(0,a.jsx)(n,{children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:\"hljs language-js\",children:[(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" { \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"BetaAnalyticsDataClient\"}),\" } \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'@google-analytics/data'\"}),`;\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"default\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"async\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"function\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"handler\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"req, res\"}),`) {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" analyticsDataClient = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"BetaAnalyticsDataClient\"}),`({\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"credentials\"}),`: {\n      `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"client_email\"}),\": process.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"ANALYTICS_CLIENT_EMAIL\"}),`,\n      `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"private_key\"}),\": process.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"ANALYTICS_PRIVATE_KEY\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"replace\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-regexp\",children:\"/\\\\\\\\n/g\"}),\", \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'\\\\n'\"}),`),\n    },\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"projectId\"}),\": process.\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"env\"}),\".\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"ANALYTICS_PROJECT_ID\"}),`,\n  });\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" propertyId = \",(0,a.jsx)(s.span,{className:\"hljs-variable constant_\",children:\"PROPERTY_ID\"}),\"; \",(0,a.jsx)(s.span,{className:\"hljs-comment\",children:\"// place your property id here available in analytics console.\"}),`\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" today = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"().\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getTime\"}),\"() - \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"60\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"60\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"24\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"60\"}),\" * \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"1000\"}),`;\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" day = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"(today).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getDate\"}),`();\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" month = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"(today).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getMonth\"}),\"() + \",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),`;\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" year = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"new\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title class_\",children:\"Date\"}),\"(today).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"getFullYear\"}),`();\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"let\"}),\" dayFormat = \",(0,a.jsxs)(s.span,{className:\"hljs-string\",children:[\"`\",(0,a.jsx)(s.span,{className:\"hljs-subst\",children:\"${year}\"}),\"-\",(0,a.jsx)(s.span,{className:\"hljs-subst\",children:\"${month}\"}),\"-\",(0,a.jsx)(s.span,{className:\"hljs-subst\",children:\"${day}\"}),\"`\"]}),`;\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" totalReport = \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"await\"}),\" analyticsDataClient.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"runReport\"}),`({\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"property\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'properties/'\"}),` + propertyId,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"dateRanges\"}),`: [\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"startDate\"}),`: dayFormat,\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"endDate\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'today'\"}),`,\n      },\n    ],\n\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"metrics\"}),`: [\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'screenpageViews'\"}),`,\n      },\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'engagementRate'\"}),`,\n      },\n      {\n        `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"name\"}),\": \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'totalUsers'\"}),`,\n      },\n    ],\n  });\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),\" res.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"status\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"200\"}),\").\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`({\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"pageViews\"}),\": totalReport[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"rows\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"metricValues\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"value\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"engagmentRate\"}),\": totalReport[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"rows\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"metricValues\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"1\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"value\"}),`,\n    `,(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"totalUsers\"}),\": totalReport[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"rows\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"0\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"metricValues\"}),\"[\",(0,a.jsx)(s.span,{className:\"hljs-number\",children:\"2\"}),\"].\",(0,a.jsx)(s.span,{className:\"hljs-property\",children:\"value\"}),`,\n  });\n}\n`]})})}),`\n`,(0,a.jsx)(l,{number:5,title:\"Show the Data\"}),`\n`,(0,a.jsxs)(s.p,{children:[\"Here's the exact React component I used as linked above. The markup is styled using \",(0,a.jsx)(s.a,{href:\"https://tailwindcss.com/\",children:\"Tailwindcss\"}),\" so that may look unfamiliar, but we just call the Next API using useSWR (which calls the Google Analytics API) and then we show Page Views, Engagement and Users.\"]}),`\n`,(0,a.jsx)(n,{children:(0,a.jsx)(s.pre,{children:(0,a.jsxs)(s.code,{className:\"hljs language-jsx\",children:[(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" useSWR \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'swr'\"}),`;\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"import\"}),\" millify \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"from\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'millify'\"}),`;\n\n`,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"export\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"Stats\"}),\" = (\",(0,a.jsx)(s.span,{className:\"hljs-params\"}),`) => {\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetcher\"}),\" = (\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"...args\"}),\") => \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"fetch\"}),\"(...args).\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"then\"}),\"(\",(0,a.jsxs)(s.span,{className:\"hljs-function\",children:[\"(\",(0,a.jsx)(s.span,{className:\"hljs-params\",children:\"res\"}),\") =>\"]}),\" res.\",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"json\"}),`());\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"const\"}),\" { \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"data\"}),\": stats } = \",(0,a.jsx)(s.span,{className:\"hljs-title function_\",children:\"useSWR\"}),\"(\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'/api/stats'\"}),`, fetcher);\n\n  `,(0,a.jsx)(s.span,{className:\"hljs-keyword\",children:\"return\"}),` (\n    `,(0,a.jsxs)(s.span,{className:\"xml\",children:[(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex flex-col mx-5'\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-4xl md:text-6xl lg:text-7xl font-bold tracking-tighter leading-tight md:leading-none text-center md:text-left my-8'\"}),\">\"]}),`\n        Analytics\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 mb-6'\"}),\">\"]}),`\n        {/* Views */}\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex relative flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-2xl font-black'\"}),\">\"]}),\"Page Views\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-5xl font-black'\"}),\">\"]}),\"{!stats ? '-' : millify(stats.pageViews)}\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n        {/* Engagement */}\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-2xl font-black'\"}),\">\"]}),\"Engagement Rate\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-5xl font-black'\"}),\">\"]}),`\n            {!stats ? '-' : (stats.engagmentRate * 100).toFixed(0) + '%'}\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n        {/* Users */}\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'flex flex-col items-center p-5 space-y-5 w-full rounded shadow-lg bg-gray-100 dark:bg-gray-800'\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-2xl font-black'\"}),\">\"]}),\"Total Users\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"h1\"}),\">\"]}),`\n          `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"<\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\" \",(0,a.jsx)(s.span,{className:\"hljs-attr\",children:\"className\"}),\"=\",(0,a.jsx)(s.span,{className:\"hljs-string\",children:\"'text-5xl font-black'\"}),\">\"]}),\"{!stats ? '-' : millify(stats.totalUsers)}\",(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"span\"}),\">\"]}),`\n        `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n      `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]}),`\n    `,(0,a.jsxs)(s.span,{className:\"hljs-tag\",children:[\"</\",(0,a.jsx)(s.span,{className:\"hljs-name\",children:\"div\"}),\">\"]})]}),`\n  );\n};\n`]})})})]})}function b(e={}){let{wrapper:s}=e.components||{};return s?(0,a.jsx)(s,Object.assign({},e,{children:(0,a.jsx)(d,e)})):d(e)}var x=b;function m(e,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+e+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(A);})();\n;return Component;"
  },
  "_id": "snippets/google-analytics-api.mdx",
  "_raw": {
    "sourceFilePath": "snippets/google-analytics-api.mdx",
    "sourceFileName": "google-analytics-api.mdx",
    "sourceFileDir": "snippets",
    "contentType": "mdx",
    "flattenedPath": "snippets/google-analytics-api"
  },
  "type": "Snippet",
  "slug": "/snippets/google-analytics-api",
  "slugAsParams": "google-analytics-api",
  "stats": {
    "text": "3 min read",
    "minutes": 2.93,
    "time": 175800,
    "words": 586
  }
}