{
  "title": "Google Tag Manager",
  "summary": "Implementing Google Tag Manager in Nextjs.",
  "icon": "next",
  "date": "2021-12-01T00:00:00.000Z",
  "published": true,
  "tags": [
    "Javascript"
  ],
  "body": {
    "raw": "\nLet's cover how to set up Next.JS with Google Analytics using the latest versions (Next.JS 12, Google Tag Manager, and Google Analytics 4).\n\n## Background\n\n[Google Tag Manager](https://tagmanager.google.com) software from Google that allows you to deploy various types of code (tags) to your website. Some good examples of tags would be Google Analytics tracking codes, Google Analytics event codes, Google Ads conversion script and remarketing tags. There are many more types of code that can be added to your website using GTM, including custom codes.\n\nGoogle Tag Manager and Google Analytics explanation:\n\n<YouTube link=\"https://youtu.be/qm28tjEqZXA\" />\n\nGoogle Tag Manager does not replace [Google Analytics](https://analytics.google.com). Instead, it helps you easily add Google Analytics tracking to a website and define rules when each tag fires. In other words Google Tag Manager and Google Analytics work together!\n\nPrior to GTM, GA tracking codes had to be hard-coded by a web developer on each individual page. Having hundreds of events is very difficult when it comes to maintaining/updating them. But Google Tag Manager solves this problem because all your tags are stored in one place – your GTM account.\n\nGoogle Tag Manager also lets you test your tags to make sure they are triggered when you load the right page or click a particular button. Another great benefit: you can change your tags and the way they work without actually changing the source code of your website – instead you just edit tags in GTM user interface and publish changes with a click of a button.\n\nNote in order the setup GTM and GA you will need _both_ a GTM Container ID from your Tag Manager Account (which looks like \"GTM-XXXXXXX\") _and_ a Google Analytics account and property and a measurement ID. A Google Analytics GA4 ID will look like \"G-XXXXXXXXXX\". To add GTM to your Nextjs site you will only need the GTM Container ID - the rest of the configuration is done via the GTM UI.\n\nHere we go:\n\n<Step number={1} title=\"Create a Google Tag Manager Account\" />\n\nCreate an account, or use an existing account, at [Google Tag Manager](tagmanager.google.com). (A new container is created by default, and you can create additional containers within each account.)\n\n> A Tag Manager account represents the topmost level of organization. Typically, only one account is needed per company. A Tag Manager account contains _one or more containers_, and there are specific container types that may be used for websites, AMP pages, Android apps, and iOS apps.\n\n<Step number={2} title=\"Create an Account/Container inside Tag Manager\" />\n\nIn Tag Manager, click Accounts and then Create account.\n\n- Enter an account name and indicate whether you'd like to share data anonymously with Google and others.\n- Enter a descriptive container name and select the type of content: Web, AMP, Android, or iOS. For our purposes choose web..\n- Click Create.\n- Review the Terms of Service and click Yes.\n\nWhen your new container first loads, you will be prompted with the web container installation code snippet. All you need here is the **GTM Container ID**.\n\n<Step number={3} title=\"Install the container in your Nextjs app\" />\n\nThis is surprisingly the simplest step. Next has an example [here](https://github.com/vercel/next.js/tree/canary/examples/with-google-tag-manager). All you have to do is inject the GTM script in your `pages\\_app.js` file using the next/script component.\n\nThe Next example also shows that you can manually fire a page view based on a route change event but that is unnecessary - you should just configure GTM to trigger on a history change event as outlined in step 4 below. All you have to do is configure the code below.\n\n<CodeBlock>\n\n```js:_app.js {1, 9-22} showLineNumbers\nimport Script from 'next/script';\nimport { ThemeProvider } from 'next-themes';\nimport { Layout } from '../components/Layout';\nimport '../styles/index.css';\n\nexport default function MyApp({ Component, pageProps }) {\n  return (\n    <>\n      {/* Google Tag Manager */}\n      <Script\n        id='gtm'\n        strategy='afterInteractive'\n        dangerouslySetInnerHTML={{\n          __html: `\n            (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n            new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n            })(window,document,'script','dataLayer', '${process.env.NEXT_PUBLIC_GTM_ACCOUNT}');\n          `,\n        }}\n      />\n      <ThemeProvider attribute='class'>\n        <Layout>\n          <Component {...pageProps} />\n        </Layout>\n      </ThemeProvider>\n    </>\n  );\n}\n```\n\n</CodeBlock>\n\nThat's it! Google Tag Manager is installed in your Nextjs app assuming you have set your envronment variable to your GTM Container ID.\n\n<Step number={4} title=\"Add and publish your tags\" />\n\nThe rest of the work is done by configuring Google Tag Manager. That is the power of GTM - your coding is done - the rest is all configuration. Most Tag Manager implementations start with a Google Analytics page view tag deployment. Here are step by step instructions for [how to deploy a Google Analytics tag](https://support.google.com/tagmanager/answer/6107124).\n\nThere is a significant \"gotcha\" for Nextjs apps - actually all \"Single Page Apps\" (SPAs). That's because of how SPA's work, and not related to Nextjs per se - when you navigate pages in Nextjs the **page view doesn't fire** because the page didn't change! If you'd like to fire GTM correctly on each page navigation, be sure to enable the \"History Change\" trigger, as described [here](https://support.google.com/tagmanager/answer/7679322?hl=en).\n\nYour configuration in GTM should look like this as a bare minumum:\n\n![GTM Setup](https://danstroot.imgix.net/assets/snippets/img/gtm-setup.png)\n\nThat's it! Now if you want to get fancy and show your Google Analytics stats inside your site [check this out!](/snippets/google-analytics-api)\n",
    "code": "var Component=(()=>{var fn=Object.create;var M=Object.defineProperty;var cn=Object.getOwnPropertyDescriptor;var un=Object.getOwnPropertyNames;var mn=Object.getPrototypeOf,pn=Object.prototype.hasOwnProperty;var B=(l,n)=>()=>(n||l((n={exports:{}}).exports,n),n.exports),_n=(l,n)=>{for(var m in n)M(l,m,{get:n[m],enumerable:!0})},Te=(l,n,m,h)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let x of un(n))!pn.call(l,x)&&x!==m&&M(l,x,{get:()=>n[x],enumerable:!(h=cn(n,x))||h.enumerable});return l};var hn=(l,n,m)=>(m=l!=null?fn(mn(l)):{},Te(n||!l||!l.__esModule?M(m,\"default\",{value:l,enumerable:!0}):m,l)),bn=l=>Te(M({},\"__esModule\",{value:!0}),l);var Ce=B((vn,ve)=>{ve.exports=React});var Ve=B(q=>{\"use strict\";(function(){\"use strict\";var l=Ce(),n=Symbol.for(\"react.element\"),m=Symbol.for(\"react.portal\"),h=Symbol.for(\"react.fragment\"),x=Symbol.for(\"react.strict_mode\"),z=Symbol.for(\"react.profiler\"),J=Symbol.for(\"react.provider\"),K=Symbol.for(\"react.context\"),w=Symbol.for(\"react.forward_ref\"),O=Symbol.for(\"react.suspense\"),G=Symbol.for(\"react.suspense_list\"),E=Symbol.for(\"react.memo\"),D=Symbol.for(\"react.lazy\"),Re=Symbol.for(\"react.offscreen\"),Z=Symbol.iterator,ke=\"@@iterator\";function Ae(e){if(e===null||typeof e!=\"object\")return null;var d=Z&&e[Z]||e[ke];return typeof d==\"function\"?d:null}var T=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function p(e){{for(var d=arguments.length,r=new Array(d>1?d-1:0),a=1;a<d;a++)r[a-1]=arguments[a];Se(\"error\",e,r)}}function Se(e,d,r){{var a=T.ReactDebugCurrentFrame,i=a.getStackAddendum();i!==\"\"&&(d+=\"%s\",r=r.concat([i]));var f=r.map(function(o){return String(o)});f.unshift(\"Warning: \"+d),Function.prototype.apply.call(console[e],console,f)}}var Pe=!1,Me=!1,Oe=!1,Ge=!1,De=!1,Q;Q=Symbol.for(\"react.module.reference\");function Ie(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===h||e===z||De||e===x||e===O||e===G||Ge||e===Re||Pe||Me||Oe||typeof e==\"object\"&&e!==null&&(e.$$typeof===D||e.$$typeof===E||e.$$typeof===J||e.$$typeof===K||e.$$typeof===w||e.$$typeof===Q||e.getModuleId!==void 0))}function Fe(e,d,r){var a=e.displayName;if(a)return a;var i=d.displayName||d.name||\"\";return i!==\"\"?r+\"(\"+i+\")\":r}function ee(e){return e.displayName||\"Context\"}function g(e){if(e==null)return null;if(typeof e.tag==\"number\"&&p(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case h:return\"Fragment\";case m:return\"Portal\";case z:return\"Profiler\";case x:return\"StrictMode\";case O:return\"Suspense\";case G:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case K:var d=e;return ee(d)+\".Consumer\";case J:var r=e;return ee(r._context)+\".Provider\";case w:return Fe(e,e.render,\"ForwardRef\");case E:var a=e.displayName||null;return a!==null?a:g(e.type)||\"Memo\";case D:{var i=e,f=i._payload,o=i._init;try{return g(o(f))}catch{return null}}}return null}var y=Object.assign,V=0,ne,te,de,re,ae,se,oe;function ie(){}ie.__reactDisabledLog=!0;function Ye(){{if(V===0){ne=console.log,te=console.info,de=console.warn,re=console.error,ae=console.group,se=console.groupCollapsed,oe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ie,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}V++}}function Le(){{if(V--,V===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},e,{value:ne}),info:y({},e,{value:te}),warn:y({},e,{value:de}),error:y({},e,{value:re}),group:y({},e,{value:ae}),groupCollapsed:y({},e,{value:se}),groupEnd:y({},e,{value:oe})})}V<0&&p(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var I=T.ReactCurrentDispatcher,F;function R(e,d,r){{if(F===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\\n( *(at )?)/);F=a&&a[1]||\"\"}return`\n`+F+e}}var Y=!1,k;{var Xe=typeof WeakMap==\"function\"?WeakMap:Map;k=new Xe}function le(e,d){if(!e||Y)return\"\";{var r=k.get(e);if(r!==void 0)return r}var a;Y=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var f;f=I.current,I.current=null,Ye();try{if(d){var o=function(){throw Error()};if(Object.defineProperty(o.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(o,[])}catch(N){a=N}Reflect.construct(e,[],o)}else{try{o.call()}catch(N){a=N}e.call(o.prototype)}}else{try{throw Error()}catch(N){a=N}e()}}catch(N){if(N&&a&&typeof N.stack==\"string\"){for(var s=N.stack.split(`\n`),_=a.stack.split(`\n`),c=s.length-1,u=_.length-1;c>=1&&u>=0&&s[c]!==_[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==_[u]){if(c!==1||u!==1)do if(c--,u--,u<0||s[c]!==_[u]){var b=`\n`+s[c].replace(\" at new \",\" at \");return e.displayName&&b.includes(\"<anonymous>\")&&(b=b.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&k.set(e,b),b}while(c>=1&&u>=0);break}}}finally{Y=!1,I.current=f,Le(),Error.prepareStackTrace=i}var C=e?e.displayName||e.name:\"\",ye=C?R(C):\"\";return typeof e==\"function\"&&k.set(e,ye),ye}function We(e,d,r){return le(e,!1)}function $e(e){var d=e.prototype;return!!(d&&d.isReactComponent)}function A(e,d,r){if(e==null)return\"\";if(typeof e==\"function\")return le(e,$e(e));if(typeof e==\"string\")return R(e);switch(e){case O:return R(\"Suspense\");case G:return R(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case w:return We(e.render);case E:return A(e.type,d,r);case D:{var a=e,i=a._payload,f=a._init;try{return A(f(i),d,r)}catch{}}}return\"\"}var S=Object.prototype.hasOwnProperty,fe={},ce=T.ReactDebugCurrentFrame;function P(e){if(e){var d=e._owner,r=A(e.type,e._source,d?d.type:null);ce.setExtraStackFrame(r)}else ce.setExtraStackFrame(null)}function Ue(e,d,r,a,i){{var f=Function.call.bind(S);for(var o in e)if(f(e,o)){var s=void 0;try{if(typeof e[o]!=\"function\"){var _=Error((a||\"React class\")+\": \"+r+\" type `\"+o+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[o]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw _.name=\"Invariant Violation\",_}s=e[o](d,o,a,r,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(c){s=c}s&&!(s instanceof Error)&&(P(i),p(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",a||\"React class\",r,o,typeof s),P(null)),s instanceof Error&&!(s.message in fe)&&(fe[s.message]=!0,P(i),p(\"Failed %s type: %s\",r,s.message),P(null))}}}var Be=Array.isArray;function L(e){return Be(e)}function qe(e){{var d=typeof Symbol==\"function\"&&Symbol.toStringTag,r=d&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return r}}function He(e){try{return ue(e),!1}catch{return!0}}function ue(e){return\"\"+e}function me(e){if(He(e))return p(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",qe(e)),ue(e)}var j=T.ReactCurrentOwner,ze={key:!0,ref:!0,__self:!0,__source:!0},pe,_e,X;X={};function Je(e){if(S.call(e,\"ref\")){var d=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(d&&d.isReactWarning)return!1}return e.ref!==void 0}function Ke(e){if(S.call(e,\"key\")){var d=Object.getOwnPropertyDescriptor(e,\"key\").get;if(d&&d.isReactWarning)return!1}return e.key!==void 0}function Ze(e,d){if(typeof e.ref==\"string\"&&j.current&&d&&j.current.stateNode!==d){var r=g(j.current.type);X[r]||(p('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',g(j.current.type),e.ref),X[r]=!0)}}function Qe(e,d){{var r=function(){pe||(pe=!0,p(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",d))};r.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:r,configurable:!0})}}function en(e,d){{var r=function(){_e||(_e=!0,p(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",d))};r.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:r,configurable:!0})}}var nn=function(e,d,r,a,i,f,o){var s={$$typeof:n,type:e,key:d,ref:r,props:o,_owner:f};return s._store={},Object.defineProperty(s._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(s,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function tn(e,d,r,a,i){{var f,o={},s=null,_=null;r!==void 0&&(me(r),s=\"\"+r),Ke(d)&&(me(d.key),s=\"\"+d.key),Je(d)&&(_=d.ref,Ze(d,i));for(f in d)S.call(d,f)&&!ze.hasOwnProperty(f)&&(o[f]=d[f]);if(e&&e.defaultProps){var c=e.defaultProps;for(f in c)o[f]===void 0&&(o[f]=c[f])}if(s||_){var u=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;s&&Qe(o,u),_&&en(o,u)}return nn(e,s,_,i,a,j.current,o)}}var W=T.ReactCurrentOwner,he=T.ReactDebugCurrentFrame;function v(e){if(e){var d=e._owner,r=A(e.type,e._source,d?d.type:null);he.setExtraStackFrame(r)}else he.setExtraStackFrame(null)}var $;$=!1;function U(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===n}function be(){{if(W.current){var e=g(W.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function dn(e){{if(e!==void 0){var d=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),r=e.lineNumber;return`\n\nCheck your code at `+d+\":\"+r+\".\"}return\"\"}}var xe={};function rn(e){{var d=be();if(!d){var r=typeof e==\"string\"?e:e.displayName||e.name;r&&(d=`\n\nCheck the top-level render call using <`+r+\">.\")}return d}}function ge(e,d){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var r=rn(d);if(xe[r])return;xe[r]=!0;var a=\"\";e&&e._owner&&e._owner!==W.current&&(a=\" It was passed a child from \"+g(e._owner.type)+\".\"),v(e),p('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,a),v(null)}}function Ne(e,d){{if(typeof e!=\"object\")return;if(L(e))for(var r=0;r<e.length;r++){var a=e[r];U(a)&&ge(a,d)}else if(U(e))e._store&&(e._store.validated=!0);else if(e){var i=Ae(e);if(typeof i==\"function\"&&i!==e.entries)for(var f=i.call(e),o;!(o=f.next()).done;)U(o.value)&&ge(o.value,d)}}}function an(e){{var d=e.type;if(d==null||typeof d==\"string\")return;var r;if(typeof d==\"function\")r=d.propTypes;else if(typeof d==\"object\"&&(d.$$typeof===w||d.$$typeof===E))r=d.propTypes;else return;if(r){var a=g(d);Ue(r,e.props,\"prop\",a,e)}else if(d.PropTypes!==void 0&&!$){$=!0;var i=g(d);p(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",i||\"Unknown\")}typeof d.getDefaultProps==\"function\"&&!d.getDefaultProps.isReactClassApproved&&p(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function sn(e){{for(var d=Object.keys(e.props),r=0;r<d.length;r++){var a=d[r];if(a!==\"children\"&&a!==\"key\"){v(e),p(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",a),v(null);break}}e.ref!==null&&(v(e),p(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),v(null))}}function on(e,d,r,a,i,f){{var o=Ie(e);if(!o){var s=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(s+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var _=dn(i);_?s+=_:s+=be();var c;e===null?c=\"null\":L(e)?c=\"array\":e!==void 0&&e.$$typeof===n?(c=\"<\"+(g(e.type)||\"Unknown\")+\" />\",s=\" Did you accidentally export a JSX literal instead of a component?\"):c=typeof e,p(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",c,s)}var u=tn(e,d,r,i,f);if(u==null)return u;if(o){var b=d.children;if(b!==void 0)if(a)if(L(b)){for(var C=0;C<b.length;C++)Ne(b[C],e);Object.freeze&&Object.freeze(b)}else p(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else Ne(b,e)}return e===h?sn(u):an(u),u}}var ln=on;q.Fragment=h,q.jsxDEV=ln})()});var we=B((Vn,je)=>{\"use strict\";je.exports=Ve()});var yn={};_n(yn,{default:()=>Nn,frontmatter:()=>xn});var t=hn(we()),xn={title:\"Google Tag Manager\",published:!0,date:\"2021-12-01\",summary:\"Implementing Google Tag Manager in Nextjs.\",icon:\"next\",tags:[\"Javascript\"]};function Ee(l){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",em:\"em\",blockquote:\"blockquote\",ul:\"ul\",li:\"li\",strong:\"strong\",code:\"code\",div:\"div\",pre:\"pre\",span:\"span\",img:\"img\"},l.components),{YouTube:m,Step:h,CodeBlock:x}=n;return x||H(\"CodeBlock\",!0,\"58:1-93:13\"),h||H(\"Step\",!0,\"35:1-35:64\"),m||H(\"YouTube\",!0,\"23:1-23:48\"),(0,t.jsxDEV)(t.Fragment,{children:[(0,t.jsxDEV)(n.p,{children:\"Let's cover how to set up Next.JS with Google Analytics using the latest versions (Next.JS 12, Google Tag Manager, and Google Analytics 4).\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:15,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{id:\"background\",children:\"Background\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:17,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[(0,t.jsxDEV)(n.a,{href:\"https://tagmanager.google.com\",children:\"Google Tag Manager\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:19,columnNumber:1},this),\" software from Google that allows you to deploy various types of code (tags) to your website. Some good examples of tags would be Google Analytics tracking codes, Google Analytics event codes, Google Ads conversion script and remarketing tags. There are many more types of code that can be added to your website using GTM, including custom codes.\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:19,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Google Tag Manager and Google Analytics explanation:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:21,columnNumber:1},this),`\n`,(0,t.jsxDEV)(m,{link:\"https://youtu.be/qm28tjEqZXA\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Google Tag Manager does not replace \",(0,t.jsxDEV)(n.a,{href:\"https://analytics.google.com\",children:\"Google Analytics\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:25,columnNumber:37},this),\". Instead, it helps you easily add Google Analytics tracking to a website and define rules when each tag fires. In other words Google Tag Manager and Google Analytics work together!\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Prior to GTM, GA tracking codes had to be hard-coded by a web developer on each individual page. Having hundreds of events is very difficult when it comes to maintaining/updating them. But Google Tag Manager solves this problem because all your tags are stored in one place \\u2013 your GTM account.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Google Tag Manager also lets you test your tags to make sure they are triggered when you load the right page or click a particular button. Another great benefit: you can change your tags and the way they work without actually changing the source code of your website \\u2013 instead you just edit tags in GTM user interface and publish changes with a click of a button.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Note in order the setup GTM and GA you will need \",(0,t.jsxDEV)(n.em,{children:\"both\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:31,columnNumber:50},this),' a GTM Container ID from your Tag Manager Account (which looks like \"GTM-XXXXXXX\") ',(0,t.jsxDEV)(n.em,{children:\"and\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:31,columnNumber:139},this),' a Google Analytics account and property and a measurement ID. A Google Analytics GA4 ID will look like \"G-XXXXXXXXXX\". To add GTM to your Nextjs site you will only need the GTM Container ID - the rest of the configuration is done via the GTM UI.']},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Here we go:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,t.jsxDEV)(h,{number:1,title:\"Create a Google Tag Manager Account\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Create an account, or use an existing account, at \",(0,t.jsxDEV)(n.a,{href:\"tagmanager.google.com\",children:\"Google Tag Manager\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:37,columnNumber:51},this),\". (A new container is created by default, and you can create additional containers within each account.)\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:[\"A Tag Manager account represents the topmost level of organization. Typically, only one account is needed per company. A Tag Manager account contains \",(0,t.jsxDEV)(n.em,{children:\"one or more containers\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:39,columnNumber:153},this),\", and there are specific container types that may be used for websites, AMP pages, Android apps, and iOS apps.\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:39,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,t.jsxDEV)(h,{number:2,title:\"Create an Account/Container inside Tag Manager\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"In Tag Manager, click Accounts and then Create account.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:43,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:\"Enter an account name and indicate whether you'd like to share data anonymously with Google and others.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:45,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:\"Enter a descriptive container name and select the type of content: Web, AMP, Android, or iOS. For our purposes choose web..\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:\"Click Create.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:47,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:\"Review the Terms of Service and click Yes.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:48,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:45,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"When your new container first loads, you will be prompted with the web container installation code snippet. All you need here is the \",(0,t.jsxDEV)(n.strong,{children:\"GTM Container ID\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:50,columnNumber:134},this),\".\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,t.jsxDEV)(h,{number:3,title:\"Install the container in your Nextjs app\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"This is surprisingly the simplest step. Next has an example \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/with-google-tag-manager\",children:\"here\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:54,columnNumber:61},this),\". All you have to do is inject the GTM script in your \",(0,t.jsxDEV)(n.code,{children:\"pages\\\\_app.js\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:54,columnNumber:201},this),\" file using the next/script component.\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:54,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"The Next example also shows that you can manually fire a page view based on a route change event but that is unnecessary - you should just configure GTM to trigger on a history change event as outlined in step 4 below. All you have to do is configure the code below.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:56,columnNumber:1},this),`\n`,(0,t.jsxDEV)(x,{children:[(0,t.jsxDEV)(n.div,{className:\"rehype-code-title\",children:\"_app.js\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"hljs language-js\",children:[(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"import\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-title class_\",children:\"Script\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"from\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'next/script'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`;\n`,(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"import\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" { \",(0,t.jsxDEV)(n.span,{className:\"hljs-title class_\",children:\"ThemeProvider\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" } \",(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"from\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'next-themes'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`;\n`,(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"import\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" { \",(0,t.jsxDEV)(n.span,{className:\"hljs-title class_\",children:\"Layout\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" } \",(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"from\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'../components/Layout'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`;\n`,(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"import\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'../styles/index.css'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`;\n\n`,(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"export\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"default\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"function\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-title function_\",children:\"MyApp\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"(\",(0,t.jsxDEV)(n.span,{className:\"hljs-params\",children:\"{ Component, pageProps }\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`) {\n  `,(0,t.jsxDEV)(n.span,{className:\"hljs-keyword\",children:\"return\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),` (\n    `,(0,t.jsxDEV)(n.span,{className:\"xml\",children:[(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:\"<>\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n      {/* Google Tag Manager */}\n      `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:[\"<\",(0,t.jsxDEV)(n.span,{className:\"hljs-name\",children:\"Script\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n        `,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"id\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'gtm'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n        `,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"strategy\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'afterInteractive'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n        `,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"dangerouslySetInnerHTML\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"{{\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n          `,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"__html:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" `\\n            (\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"function\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"(\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"w\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"d\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"s\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"l\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"i\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"){\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"w\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"[\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"l\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"]=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"w[l]||[];w[l].push({\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"'\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"gtm.start\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"'\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\":\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n            `,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"new\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"Date\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"()\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\".getTime\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"(),\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"event:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"'\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"gtm.js\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"'});\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"var\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"f\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"d.getElementsByTagName(s)[0],\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n            `,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"j\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"d.createElement(s),dl\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"l!\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'dataLayer'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"?'&\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"l\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'+l:'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"';\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"j.async\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"true;j.src\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`=\n            `,(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'https://www.googletagmanager.com/gtm.js?id='\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"+\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"i\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"+\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"dl\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\";\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"f.parentNode.insertBefore\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"(\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"j\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"f\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`);\n            })(`,(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"window\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"document\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\",'\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"script\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"','\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"dataLayer\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"', '${\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"process.env.NEXT_PUBLIC_GTM_ACCOUNT\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`}');\n          \\`,\n        }}\n      />`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),(0,t.jsxDEV)(n.span,{className:\"xml\",children:[`\n      `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:[\"<\",(0,t.jsxDEV)(n.span,{className:\"hljs-name\",children:\"ThemeProvider\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" \",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"attribute\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"=\",(0,t.jsxDEV)(n.span,{className:\"hljs-string\",children:\"'class'\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n        `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:[\"<\",(0,t.jsxDEV)(n.span,{className:\"hljs-name\",children:\"Layout\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n          `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:[\"<\",(0,t.jsxDEV)(n.span,{className:\"hljs-name\",children:\"Component\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\" {\",(0,t.jsxDEV)(n.span,{className:\"hljs-attr\",children:\"...pageProps\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\"} />\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n        `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:[\"</\",(0,t.jsxDEV)(n.span,{className:\"hljs-name\",children:\"Layout\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n      `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:[\"</\",(0,t.jsxDEV)(n.span,{className:\"hljs-name\",children:\"ThemeProvider\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),\">\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n    `,(0,t.jsxDEV)(n.span,{className:\"hljs-tag\",children:\"</>\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this),`\n  );\n}\n`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:60,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:60,columnNumber:1},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:58,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"That's it! Google Tag Manager is installed in your Nextjs app assuming you have set your envronment variable to your GTM Container ID.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:95,columnNumber:1},this),`\n`,(0,t.jsxDEV)(h,{number:4,title:\"Add and publish your tags\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:97,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"The rest of the work is done by configuring Google Tag Manager. That is the power of GTM - your coding is done - the rest is all configuration. Most Tag Manager implementations start with a Google Analytics page view tag deployment. Here are step by step instructions for \",(0,t.jsxDEV)(n.a,{href:\"https://support.google.com/tagmanager/answer/6107124\",children:\"how to deploy a Google Analytics tag\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:99,columnNumber:273},this),\".\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:99,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[`There is a significant \"gotcha\" for Nextjs apps - actually all \"Single Page Apps\" (SPAs). That's because of how SPA's work, and not related to Nextjs per se - when you navigate pages in Nextjs the `,(0,t.jsxDEV)(n.strong,{children:\"page view doesn't fire\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:101,columnNumber:198},this),` because the page didn't change! If you'd like to fire GTM correctly on each page navigation, be sure to enable the \"History Change\" trigger, as described `,(0,t.jsxDEV)(n.a,{href:\"https://support.google.com/tagmanager/answer/7679322?hl=en\",children:\"here\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:101,columnNumber:379},this),\".\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:101,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Your configuration in GTM should look like this as a bare minumum:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:103,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:(0,t.jsxDEV)(n.img,{src:\"https://danstroot.imgix.net/assets/snippets/img/gtm-setup.png\",alt:\"GTM Setup\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:105,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:105,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"That's it! Now if you want to get fancy and show your Google Analytics stats inside your site \",(0,t.jsxDEV)(n.a,{href:\"/snippets/google-analytics-api\",children:\"check this out!\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:107,columnNumber:95},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:107,columnNumber:1},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\",lineNumber:1,columnNumber:1},this)}function gn(l={}){let{wrapper:n}=l.components||{};return n?(0,t.jsxDEV)(n,Object.assign({},l,{children:(0,t.jsxDEV)(Ee,l,void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this)}),void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx\"},this):Ee(l)}var Nn=gn;function H(l,n,m){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+l+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(m?\"\\nIt\\u2019s referenced in your code at `\"+m+\"` in `/Volumes/T7/Code/blog-next-13/content/snippets/_mdx_bundler_entry_point-7d44e4e0-fc73-4dff-996a-4ce541d07f93.mdx`\":\"\"))}return bn(yn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "snippets/google-tag-manager.mdx",
  "_raw": {
    "sourceFilePath": "snippets/google-tag-manager.mdx",
    "sourceFileName": "google-tag-manager.mdx",
    "sourceFileDir": "snippets",
    "contentType": "mdx",
    "flattenedPath": "snippets/google-tag-manager"
  },
  "type": "Snippet",
  "slug": "/snippets/google-tag-manager",
  "slugAsParams": "google-tag-manager",
  "stats": {
    "text": "5 min read",
    "minutes": 4.275,
    "time": 256500,
    "words": 855
  }
}