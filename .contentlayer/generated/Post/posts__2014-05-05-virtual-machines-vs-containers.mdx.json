{
  "title": "Virtual Machines vs Containers",
  "excerpt": "Personally I think the next wave of infrastructure efficiency will be driven by Linux container technology (LinuX Containers = LXC). The LXC container approach does not require a hypervisor - instead you run isolated \"containers\" on a Linux host. LXC provides operating system-level virtualization, but instead of creating a full-fledged virtual machine LXC containers leverage cgroups (control groups) to completely isolate the operating environment, including process trees, network, user ids and mounted file systems. This work was started by engineers at Google and in late 2007 it was merged into kernel version 2.6.24.",
  "coverImage": "/assets/blog/img/docker.png",
  "date": "2014-05-05T00:00:00.000Z",
  "published": true,
  "author": {
    "name": "Dan Stroot",
    "picture": "/assets/blog/authors/dan.jpeg",
    "type": "Author",
    "_raw": {}
  },
  "ogImage": {
    "url": "/assets/blog/img/docker.png",
    "type": "OGImage",
    "_raw": {}
  },
  "seoURL": "https://danstroot.com/2014/05/04/virtual-machines-vs-containers/",
  "body": {
    "raw": "\nThree driving forces of infrastructure efficiency in a large, distributed environment were:\n\n- **Data center consolidation** _(KPI: How many DCs do you have?)_\n- **Host virtualization** _(KPI: what percentage of your servers are virtual?)_\n- **\"Cloud\" in its various forms** _(KPI: How many servers are you still running?)_\n\nAssuming you have been aggressive you may not have any data centers left. You may be buying services rather than servers, and/or all of your remaining machines might be virtualized and hosted in someone else's data center. Now what?\n\n### Where is future infrastructure efficiency going to come from?\n\nPersonally I think the next wave of infrastructure efficiency will be driven by Linux container technology (LinuX Containers = LXC). The LXC container approach does **not** require a hypervisor - instead you run isolated \"containers\" on a Linux host.\n\nLXC provides operating system-level virtualization, but instead of creating a full-fledged virtual machine LXC containers leverage cgroups (control groups) to completely isolate application's view of the operating environment, including process trees, network, user ids and mounted file systems. Cgroups are a Linux kernel feature to limit, account, and isolate resource usage (CPU, memory, disk I/O, etc.) of process groups.\n\nThis work was started by engineers at Google and in late 2007 it was merged into kernel version 2.6.24. LXC also relies on other kinds of namespace-isolation functionality, which have been developed and integrated into the mainline Linux kernel since then. It looks something like this:\n\n![Docker](https://danstroot.imgix.net/assets/blog/img/dockervsvm.png)\n\n### Is LXC Technology Really Better?\n\nHere are some of the major benefits of Linux Containers from my perspective:\n\n#### Fast\n\n- Runtime performance at near bare metal speeds (typically 97+ percent of bare metal).\n- Management operations (boot, stop, start, reboot, etc.) in seconds or milliseconds.\n\n#### Agile\n\n- VM-like agility -- it's still \"virtualization\".\n- With VMs we often touted our ability to ship a machine \"over the wire\" since a virtual machine is basically just a large file. It also allows better business recovery scenarios where I can have a snapshot of my production machine(s) copied to a different datacenter at regular intervals. Guess what? LXC containers are an order of magnitude smaller!\n- Developers can essentially use the exact same containers as those deployed into production.\n\n#### Lightweight\n\n- Just enough Operating System (JeOS); include only what you need reducing image and container bloat.\n- Minimal per container penalty which equates to greater density and hence greater returns on existing assets -- imagine packing 100s or 1000s of containers on a single host node!\n\n#### Inexpensive\n\n- Open source -- free -- lower TCO.\n- Supported with out-of-the-box modern Linux kernels.\n- LXC hosting likely to drive the next wave of cloud products.\n\n#### Ecosystem\n\n- Growing in popularity -- just checkout the google trends for docker or LXC.\n- Vibrant community and numerous 3rd party applications (1000s of prebuilt images on docker index and 100s of open source apps on GitHub or other public sources).\n\n#### Benchmarks\n\n- Average boot time: LXC 1.5x faster\n- Average reboot time: LXC 18.9x faster\n- LXC CPU growth 26x lower than VM (per machine)\n- LXC Memory group 3x lower than VM (per machine)\n- LXC images 3.2x smaller than VM\n\n### Summary\n\nThe next wave of server density is likely to be driven by LXC technology instead of traditional VM technology. This technology may also increase further an organizations agility, developer productivity and even business continuity. However, LXC technology is not yet as mature or \"manageable\" as VM technology, but tools like Docker are developing quickly.\n\n_Sources:_\n\n- [KVM and Docker LXC Benchmarking with OpenStack](http://bodenr.blogspot.com/2014/05/kvm-and-docker-lxc-benchmarking-with.html)\n",
    "code": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty;var y=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),f=(i,e)=>{for(var r in e)o(i,r,{get:e[r],enumerable:!0})},s=(i,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of g(e))!p.call(i,t)&&t!==r&&o(i,t,{get:()=>e[t],enumerable:!(a=u(e,t))||a.enumerable});return i};var v=(i,e,r)=>(r=i!=null?d(m(i)):{},s(e||!i||!i.__esModule?o(r,\"default\",{value:i,enumerable:!0}):r,i)),b=i=>s(o({},\"__esModule\",{value:!0}),i);var c=y((X,l)=>{l.exports=_jsx_runtime});var L={};f(L,{default:()=>x,frontmatter:()=>w});var n=v(c()),w={title:\"Virtual Machines vs Containers\",excerpt:'Personally I think the next wave of infrastructure efficiency will be driven by Linux container technology (LinuX Containers = LXC). The LXC container approach does not require a hypervisor - instead you run isolated \"containers\" on a Linux host. LXC provides operating system-level virtualization, but instead of creating a full-fledged virtual machine LXC containers leverage cgroups (control groups) to completely isolate the operating environment, including process trees, network, user ids and mounted file systems. This work was started by engineers at Google and in late 2007 it was merged into kernel version 2.6.24.',coverImage:\"/assets/blog/img/docker.png\",date:\"2014-05-05\",published:!0,author:{name:\"Dan Stroot\",picture:\"/assets/blog/authors/dan.jpeg\"},ogImage:{url:\"/assets/blog/img/docker.png\"},seoURL:\"https://danstroot.com/2014/05/04/virtual-machines-vs-containers/\"};function h(i){let e=Object.assign({p:\"p\",ul:\"ul\",li:\"li\",strong:\"strong\",em:\"em\",h3:\"h3\",img:\"img\",h4:\"h4\",a:\"a\"},i.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Three driving forces of infrastructure efficiency in a large, distributed environment were:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Data center consolidation\"}),\" \",(0,n.jsx)(e.em,{children:\"(KPI: How many DCs do you have?)\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Host virtualization\"}),\" \",(0,n.jsx)(e.em,{children:\"(KPI: what percentage of your servers are virtual?)\"})]}),`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:'\"Cloud\" in its various forms'}),\" \",(0,n.jsx)(e.em,{children:\"(KPI: How many servers are you still running?)\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Assuming you have been aggressive you may not have any data centers left. You may be buying services rather than servers, and/or all of your remaining machines might be virtualized and hosted in someone else's data center. Now what?\"}),`\n`,(0,n.jsx)(e.h3,{id:\"where-is-future-infrastructure-efficiency-going-to-come-from\",children:\"Where is future infrastructure efficiency going to come from?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Personally I think the next wave of infrastructure efficiency will be driven by Linux container technology (LinuX Containers = LXC). The LXC container approach does \",(0,n.jsx)(e.strong,{children:\"not\"}),' require a hypervisor - instead you run isolated \"containers\" on a Linux host.']}),`\n`,(0,n.jsx)(e.p,{children:\"LXC provides operating system-level virtualization, but instead of creating a full-fledged virtual machine LXC containers leverage cgroups (control groups) to completely isolate application's view of the operating environment, including process trees, network, user ids and mounted file systems. Cgroups are a Linux kernel feature to limit, account, and isolate resource usage (CPU, memory, disk I/O, etc.) of process groups.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This work was started by engineers at Google and in late 2007 it was merged into kernel version 2.6.24. LXC also relies on other kinds of namespace-isolation functionality, which have been developed and integrated into the mainline Linux kernel since then. It looks something like this:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://danstroot.imgix.net/assets/blog/img/dockervsvm.png\",alt:\"Docker\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"is-lxc-technology-really-better\",children:\"Is LXC Technology Really Better?\"}),`\n`,(0,n.jsx)(e.p,{children:\"Here are some of the major benefits of Linux Containers from my perspective:\"}),`\n`,(0,n.jsx)(e.h4,{id:\"fast\",children:\"Fast\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Runtime performance at near bare metal speeds (typically 97+ percent of bare metal).\"}),`\n`,(0,n.jsx)(e.li,{children:\"Management operations (boot, stop, start, reboot, etc.) in seconds or milliseconds.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"agile\",children:\"Agile\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:`VM-like agility -- it's still \"virtualization\".`}),`\n`,(0,n.jsx)(e.li,{children:'With VMs we often touted our ability to ship a machine \"over the wire\" since a virtual machine is basically just a large file. It also allows better business recovery scenarios where I can have a snapshot of my production machine(s) copied to a different datacenter at regular intervals. Guess what? LXC containers are an order of magnitude smaller!'}),`\n`,(0,n.jsx)(e.li,{children:\"Developers can essentially use the exact same containers as those deployed into production.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"lightweight\",children:\"Lightweight\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Just enough Operating System (JeOS); include only what you need reducing image and container bloat.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Minimal per container penalty which equates to greater density and hence greater returns on existing assets -- imagine packing 100s or 1000s of containers on a single host node!\"}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"inexpensive\",children:\"Inexpensive\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Open source -- free -- lower TCO.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Supported with out-of-the-box modern Linux kernels.\"}),`\n`,(0,n.jsx)(e.li,{children:\"LXC hosting likely to drive the next wave of cloud products.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"ecosystem\",children:\"Ecosystem\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Growing in popularity -- just checkout the google trends for docker or LXC.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Vibrant community and numerous 3rd party applications (1000s of prebuilt images on docker index and 100s of open source apps on GitHub or other public sources).\"}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"benchmarks\",children:\"Benchmarks\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Average boot time: LXC 1.5x faster\"}),`\n`,(0,n.jsx)(e.li,{children:\"Average reboot time: LXC 18.9x faster\"}),`\n`,(0,n.jsx)(e.li,{children:\"LXC CPU growth 26x lower than VM (per machine)\"}),`\n`,(0,n.jsx)(e.li,{children:\"LXC Memory group 3x lower than VM (per machine)\"}),`\n`,(0,n.jsx)(e.li,{children:\"LXC images 3.2x smaller than VM\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"summary\",children:\"Summary\"}),`\n`,(0,n.jsx)(e.p,{children:'The next wave of server density is likely to be driven by LXC technology instead of traditional VM technology. This technology may also increase further an organizations agility, developer productivity and even business continuity. However, LXC technology is not yet as mature or \"manageable\" as VM technology, but tools like Docker are developing quickly.'}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"Sources:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"http://bodenr.blogspot.com/2014/05/kvm-and-docker-lxc-benchmarking-with.html\",children:\"KVM and Docker LXC Benchmarking with OpenStack\"})}),`\n`]})]})}function k(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,Object.assign({},i,{children:(0,n.jsx)(h,i)})):h(i)}var x=k;return b(L);})();\n;return Component;"
  },
  "_id": "posts/2014-05-05-virtual-machines-vs-containers.mdx",
  "_raw": {
    "sourceFilePath": "posts/2014-05-05-virtual-machines-vs-containers.mdx",
    "sourceFileName": "2014-05-05-virtual-machines-vs-containers.mdx",
    "sourceFileDir": "posts",
    "contentType": "mdx",
    "flattenedPath": "posts/2014-05-05-virtual-machines-vs-containers"
  },
  "type": "Post",
  "slug": "/posts/2014-05-05-virtual-machines-vs-containers",
  "slugAsParams": "2014-05-05-virtual-machines-vs-containers",
  "stats": {
    "text": "3 min read",
    "minutes": 3,
    "time": 180000,
    "words": 600
  }
}