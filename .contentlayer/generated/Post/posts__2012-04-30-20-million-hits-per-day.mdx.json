{
  "title": "20.5 Million hits a day using an Amazon Micro server ($15 a month) and Node.js",
  "excerpt": "I have been building a website recently just to get current with the latest web technologies and scaling. I saw this post on Hacker News \"10 Million hits a day with WordPress using a $15 server\" and was intrigued.  It was time to benchmark one of my own applications!",
  "coverImage": "/assets/blog/img/icloud2.jpg",
  "date": "2012-07-01T00:00:00.000Z",
  "published": false,
  "author": {
    "name": "Dan Stroot",
    "picture": "/assets/blog/authors/dan.jpeg",
    "type": "Author",
    "_raw": {}
  },
  "ogImage": {
    "url": "/assets/blog/img/icloud2.jpg",
    "type": "OGImage",
    "_raw": {}
  },
  "seoURL": "https://danstroot.com/2012/06/30/20-million-hits-per-day/",
  "body": {
    "raw": "\nI have been building a website recently just to get current with the latest web technologies and scaling. I saw this post on Hacker News: [10 Million hits a day with WordPress using a $15 server](http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server '10 Million hits a day with WordPress using a $15 server') and was intrigued. It was time to benchmark one of my own applications since it also runs on an Amazon Micro server for now as my development/production machine.\n\nFirst, let’s get this out of the way. Amazon will throttle your micro server into the ground if you actually ran this level of traffic for an extended period of time. This [article](http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/) explains it rather well. However this experiment still illustrates what is possible with this level of virtual hardware. If you actually have high levels of traffic then you already know a micro instance is not for you.\n\nI’m using an Amazon Linux x86 machine image (ami-31814f58) and the machine type is a “t1.micro” instance ($0.02 per hour – two cents an hour!). This is how Amazon describes a micro instance:\n\n- 613 MB memory\n- Up to 2 EC2 Compute Units (for short periodic bursts)\n- EBS storage only\n- 32-bit or 64-bit platform\n- I/O Performance: Low\n- API name: t1.micro\n\nI am using a 32 bit instance. I installed MySQL and compiled Node.js and then installed my web application – that’s it. Took me about an hour because I also installed phpMyAdmin and I hadn’t done it in a while.\n\nSome notes before we start testing – my Node.js application uses the Express framework and in the docs I noticed something interesting:\n\nTo alter the environment we can set the NODE_ENV environment variable, for example: `$ NODE_ENV=production node app.js`\n\nThis is very important, as many caching mechanisms are only enabled when in production.\n\nSo I set environment to production and we are ready to start testing. I am also using blitz.io and therefore had to do some housekeeping setting my application to serve their API key (clever since it prevents you from using blitz.io as a DoS tool). Once all that was done I was ready to run my first load test. I wasn’t really sure what to expect.\n\n### Let’s run a blitz.io “rush” to see how we’re doing\n\n[![Hit Rate](http://www.wanderingcio.com/wp-content/uploads/2012/04/15-1-300x140.png '15-1')](http://www.wanderingcio.com/wp-content/uploads/2012/04/15-1.png)\n\n_(click the image to see a full size version)_\n\nNote that blitz.io ramps up from 0 to 250 users, and our peak response rate was 238 hits per second as you can see above. This peak rate translates into **20,563,200 hits per day**!\n\nThroughout the test our response rates looked pretty stable and averaged 13ms for the duration of the test:\n\n[![Response Times](http://www.wanderingcio.com/wp-content/uploads/2012/04/15-2-300x139.png '15-2')](http://www.wanderingcio.com/wp-content/uploads/2012/04/15-2.png)\n\n_(click the image to see a full size version)_\n\nInterestingly blitz.io calculates your _average_ hit rate during the test and uses that to estimate hits per day rather than your peak rate. I’m not sure why they do it that way. Here is their summary:\n\n[![Summary](http://www.wanderingcio.com/wp-content/uploads/2012/04/15-3-300x44.png '15-3')](http://www.wanderingcio.com/wp-content/uploads/2012/04/15-3.png)\n\n_(click the image to see a full size version)_\n\nSo what did we learn here? That Node.js on an Amazon micro instance can run really well? Well yes I suppose, and this bodes well for true scalability to larger machines and to machine clusters in the future. But the real meat here is the confluence of several trends: ever more efficient web delivery (Nginx, Node.js, Varnish, etc.) , the move away from serving pages to serving data, and finally cloud infrastructure, means it is exceptionally easy to build highly scalable web sites for a very very small investment compared to several years ago.\n\nThis has profound implications for \"corporate IT\"!\n\n### References\n\n- [http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server](http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server)\n- [http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/](http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/)\n",
    "code": "var Component=(()=>{var un=Object.create;var I=Object.defineProperty;var dn=Object.getOwnPropertyDescriptor;var cn=Object.getOwnPropertyNames;var fn=Object.getPrototypeOf,mn=Object.prototype.hasOwnProperty;var H=(d,t)=>()=>(t||d((t={exports:{}}).exports,t),t.exports),bn=(d,t)=>{for(var h in t)I(d,h,{get:t[h],enumerable:!0})},ye=(d,t,h,x)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let v of cn(t))!mn.call(d,v)&&v!==h&&I(d,v,{get:()=>t[v],enumerable:!(x=dn(t,v))||x.enumerable});return d};var pn=(d,t,h)=>(h=d!=null?un(fn(d)):{},ye(t||!d||!d.__esModule?I(h,\"default\",{value:d,enumerable:!0}):h,d)),hn=d=>ye(I({},\"__esModule\",{value:!0}),d);var we=H((Nn,Ne)=>{Ne.exports=React});var Te=H(G=>{\"use strict\";(function(){\"use strict\";var d=we(),t=Symbol.for(\"react.element\"),h=Symbol.for(\"react.portal\"),x=Symbol.for(\"react.fragment\"),v=Symbol.for(\"react.strict_mode\"),q=Symbol.for(\"react.profiler\"),X=Symbol.for(\"react.provider\"),K=Symbol.for(\"react.context\"),R=Symbol.for(\"react.forward_ref\"),D=Symbol.for(\"react.suspense\"),A=Symbol.for(\"react.suspense_list\"),V=Symbol.for(\"react.memo\"),F=Symbol.for(\"react.lazy\"),Ve=Symbol.for(\"react.offscreen\"),J=Symbol.iterator,Oe=\"@@iterator\";function Pe(e){if(e===null||typeof e!=\"object\")return null;var n=J&&e[J]||e[Oe];return typeof n==\"function\"?n:null}var N=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function m(e){{for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Se(\"error\",e,r)}}function Se(e,n,r){{var i=N.ReactDebugCurrentFrame,s=i.getStackAddendum();s!==\"\"&&(n+=\"%s\",r=r.concat([s]));var u=r.map(function(l){return String(l)});u.unshift(\"Warning: \"+n),Function.prototype.apply.call(console[e],console,u)}}var je=!1,ke=!1,Ie=!1,De=!1,Ae=!1,Q;Q=Symbol.for(\"react.module.reference\");function Fe(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===x||e===q||Ae||e===v||e===D||e===A||De||e===Ve||je||ke||Ie||typeof e==\"object\"&&e!==null&&(e.$$typeof===F||e.$$typeof===V||e.$$typeof===X||e.$$typeof===K||e.$$typeof===R||e.$$typeof===Q||e.getModuleId!==void 0))}function Me(e,n,r){var i=e.displayName;if(i)return i;var s=n.displayName||n.name||\"\";return s!==\"\"?r+\"(\"+s+\")\":r}function Z(e){return e.displayName||\"Context\"}function _(e){if(e==null)return null;if(typeof e.tag==\"number\"&&m(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case x:return\"Fragment\";case h:return\"Portal\";case q:return\"Profiler\";case v:return\"StrictMode\";case D:return\"Suspense\";case A:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case K:var n=e;return Z(n)+\".Consumer\";case X:var r=e;return Z(r._context)+\".Provider\";case R:return Me(e,e.render,\"ForwardRef\");case V:var i=e.displayName||null;return i!==null?i:_(e.type)||\"Memo\";case F:{var s=e,u=s._payload,l=s._init;try{return _(l(u))}catch{return null}}}return null}var y=Object.assign,C=0,ee,ne,te,re,oe,ie,ae;function le(){}le.__reactDisabledLog=!0;function $e(){{if(C===0){ee=console.log,ne=console.info,te=console.warn,re=console.error,oe=console.group,ie=console.groupCollapsed,ae=console.groupEnd;var e={configurable:!0,enumerable:!0,value:le,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}C++}}function We(){{if(C--,C===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},e,{value:ee}),info:y({},e,{value:ne}),warn:y({},e,{value:te}),error:y({},e,{value:re}),group:y({},e,{value:oe}),groupCollapsed:y({},e,{value:ie}),groupEnd:y({},e,{value:ae})})}C<0&&m(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var M=N.ReactCurrentDispatcher,$;function O(e,n,r){{if($===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\\n( *(at )?)/);$=i&&i[1]||\"\"}return`\n`+$+e}}var W=!1,P;{var ze=typeof WeakMap==\"function\"?WeakMap:Map;P=new ze}function se(e,n){if(!e||W)return\"\";{var r=P.get(e);if(r!==void 0)return r}var i;W=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var u;u=M.current,M.current=null,$e();try{if(n){var l=function(){throw Error()};if(Object.defineProperty(l.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(l,[])}catch(g){i=g}Reflect.construct(e,[],l)}else{try{l.call()}catch(g){i=g}e.call(l.prototype)}}else{try{throw Error()}catch(g){i=g}e()}}catch(g){if(g&&i&&typeof g.stack==\"string\"){for(var a=g.stack.split(`\n`),b=i.stack.split(`\n`),c=a.length-1,f=b.length-1;c>=1&&f>=0&&a[c]!==b[f];)f--;for(;c>=1&&f>=0;c--,f--)if(a[c]!==b[f]){if(c!==1||f!==1)do if(c--,f--,f<0||a[c]!==b[f]){var p=`\n`+a[c].replace(\" at new \",\" at \");return e.displayName&&p.includes(\"<anonymous>\")&&(p=p.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&P.set(e,p),p}while(c>=1&&f>=0);break}}}finally{W=!1,M.current=u,We(),Error.prepareStackTrace=s}var T=e?e.displayName||e.name:\"\",xe=T?O(T):\"\";return typeof e==\"function\"&&P.set(e,xe),xe}function Ye(e,n,r){return se(e,!1)}function Le(e){var n=e.prototype;return!!(n&&n.isReactComponent)}function S(e,n,r){if(e==null)return\"\";if(typeof e==\"function\")return se(e,Le(e));if(typeof e==\"string\")return O(e);switch(e){case D:return O(\"Suspense\");case A:return O(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case R:return Ye(e.render);case V:return S(e.type,n,r);case F:{var i=e,s=i._payload,u=i._init;try{return S(u(s),n,r)}catch{}}}return\"\"}var j=Object.prototype.hasOwnProperty,ue={},de=N.ReactDebugCurrentFrame;function k(e){if(e){var n=e._owner,r=S(e.type,e._source,n?n.type:null);de.setExtraStackFrame(r)}else de.setExtraStackFrame(null)}function Ue(e,n,r,i,s){{var u=Function.call.bind(j);for(var l in e)if(u(e,l)){var a=void 0;try{if(typeof e[l]!=\"function\"){var b=Error((i||\"React class\")+\": \"+r+\" type `\"+l+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[l]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw b.name=\"Invariant Violation\",b}a=e[l](n,l,i,r,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(c){a=c}a&&!(a instanceof Error)&&(k(s),m(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",i||\"React class\",r,l,typeof a),k(null)),a instanceof Error&&!(a.message in ue)&&(ue[a.message]=!0,k(s),m(\"Failed %s type: %s\",r,a.message),k(null))}}}var Be=Array.isArray;function z(e){return Be(e)}function He(e){{var n=typeof Symbol==\"function\"&&Symbol.toStringTag,r=n&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return r}}function Ge(e){try{return ce(e),!1}catch{return!0}}function ce(e){return\"\"+e}function fe(e){if(Ge(e))return m(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",He(e)),ce(e)}var E=N.ReactCurrentOwner,qe={key:!0,ref:!0,__self:!0,__source:!0},me,be,Y;Y={};function Xe(e){if(j.call(e,\"ref\")){var n=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(n&&n.isReactWarning)return!1}return e.ref!==void 0}function Ke(e){if(j.call(e,\"key\")){var n=Object.getOwnPropertyDescriptor(e,\"key\").get;if(n&&n.isReactWarning)return!1}return e.key!==void 0}function Je(e,n){if(typeof e.ref==\"string\"&&E.current&&n&&E.current.stateNode!==n){var r=_(E.current.type);Y[r]||(m('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',_(E.current.type),e.ref),Y[r]=!0)}}function Qe(e,n){{var r=function(){me||(me=!0,m(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};r.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:r,configurable:!0})}}function Ze(e,n){{var r=function(){be||(be=!0,m(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",n))};r.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:r,configurable:!0})}}var en=function(e,n,r,i,s,u,l){var a={$$typeof:t,type:e,key:n,ref:r,props:l,_owner:u};return a._store={},Object.defineProperty(a._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(a,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(a,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a};function nn(e,n,r,i,s){{var u,l={},a=null,b=null;r!==void 0&&(fe(r),a=\"\"+r),Ke(n)&&(fe(n.key),a=\"\"+n.key),Xe(n)&&(b=n.ref,Je(n,s));for(u in n)j.call(n,u)&&!qe.hasOwnProperty(u)&&(l[u]=n[u]);if(e&&e.defaultProps){var c=e.defaultProps;for(u in c)l[u]===void 0&&(l[u]=c[u])}if(a||b){var f=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;a&&Qe(l,f),b&&Ze(l,f)}return en(e,a,b,s,i,E.current,l)}}var L=N.ReactCurrentOwner,pe=N.ReactDebugCurrentFrame;function w(e){if(e){var n=e._owner,r=S(e.type,e._source,n?n.type:null);pe.setExtraStackFrame(r)}else pe.setExtraStackFrame(null)}var U;U=!1;function B(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===t}function he(){{if(L.current){var e=_(L.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function tn(e){{if(e!==void 0){var n=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),r=e.lineNumber;return`\n\nCheck your code at `+n+\":\"+r+\".\"}return\"\"}}var _e={};function rn(e){{var n=he();if(!n){var r=typeof e==\"string\"?e:e.displayName||e.name;r&&(n=`\n\nCheck the top-level render call using <`+r+\">.\")}return n}}function ge(e,n){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var r=rn(n);if(_e[r])return;_e[r]=!0;var i=\"\";e&&e._owner&&e._owner!==L.current&&(i=\" It was passed a child from \"+_(e._owner.type)+\".\"),w(e),m('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,i),w(null)}}function ve(e,n){{if(typeof e!=\"object\")return;if(z(e))for(var r=0;r<e.length;r++){var i=e[r];B(i)&&ge(i,n)}else if(B(e))e._store&&(e._store.validated=!0);else if(e){var s=Pe(e);if(typeof s==\"function\"&&s!==e.entries)for(var u=s.call(e),l;!(l=u.next()).done;)B(l.value)&&ge(l.value,n)}}}function on(e){{var n=e.type;if(n==null||typeof n==\"string\")return;var r;if(typeof n==\"function\")r=n.propTypes;else if(typeof n==\"object\"&&(n.$$typeof===R||n.$$typeof===V))r=n.propTypes;else return;if(r){var i=_(n);Ue(r,e.props,\"prop\",i,e)}else if(n.PropTypes!==void 0&&!U){U=!0;var s=_(n);m(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",s||\"Unknown\")}typeof n.getDefaultProps==\"function\"&&!n.getDefaultProps.isReactClassApproved&&m(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function an(e){{for(var n=Object.keys(e.props),r=0;r<n.length;r++){var i=n[r];if(i!==\"children\"&&i!==\"key\"){w(e),m(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",i),w(null);break}}e.ref!==null&&(w(e),m(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),w(null))}}function ln(e,n,r,i,s,u){{var l=Fe(e);if(!l){var a=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(a+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var b=tn(s);b?a+=b:a+=he();var c;e===null?c=\"null\":z(e)?c=\"array\":e!==void 0&&e.$$typeof===t?(c=\"<\"+(_(e.type)||\"Unknown\")+\" />\",a=\" Did you accidentally export a JSX literal instead of a component?\"):c=typeof e,m(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",c,a)}var f=nn(e,n,r,s,u);if(f==null)return f;if(l){var p=n.children;if(p!==void 0)if(i)if(z(p)){for(var T=0;T<p.length;T++)ve(p[T],e);Object.freeze&&Object.freeze(p)}else m(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ve(p,e)}return e===x?an(f):on(f),f}}var sn=ln;G.Fragment=x,G.jsxDEV=sn})()});var Ee=H((Tn,Ce)=>{\"use strict\";Ce.exports=Te()});var xn={};bn(xn,{default:()=>vn,frontmatter:()=>_n});var o=pn(Ee()),_n={title:\"20.5 Million hits a day using an Amazon Micro server ($15 a month) and Node.js\",excerpt:'I have been building a website recently just to get current with the latest web technologies and scaling. I saw this post on Hacker News \"10 Million hits a day with WordPress using a $15 server\" and was intrigued.  It was time to benchmark one of my own applications!',coverImage:\"/assets/blog/img/icloud2.jpg\",date:\"2012-07-01\",published:!1,author:{name:\"Dan Stroot\",picture:\"/assets/blog/authors/dan.jpeg\"},ogImage:{url:\"/assets/blog/img/icloud2.jpg\"},seoURL:\"https://danstroot.com/2012/06/30/20-million-hits-per-day/\"};function Re(d){let t=Object.assign({p:\"p\",a:\"a\",ul:\"ul\",li:\"li\",code:\"code\",h3:\"h3\",img:\"img\",em:\"em\",strong:\"strong\"},d.components);return(0,o.jsxDEV)(o.Fragment,{children:[(0,o.jsxDEV)(t.p,{children:[\"I have been building a website recently just to get current with the latest web technologies and scaling. I saw this post on Hacker News: \",(0,o.jsxDEV)(t.a,{href:\"http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server\",title:\"10 Million hits a day with WordPress using a $15 server\",children:\"10 Million hits a day with WordPress using a $15 server\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:18,columnNumber:139},this),\" and was intrigued. It was time to benchmark one of my own applications since it also runs on an Amazon Micro server for now as my development/production machine.\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:18,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:[\"First, let\\u2019s get this out of the way. Amazon will throttle your micro server into the ground if you actually ran this level of traffic for an extended period of time. This \",(0,o.jsxDEV)(t.a,{href:\"http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/\",children:\"article\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:20,columnNumber:173},this),\" explains it rather well. However this experiment still illustrates what is possible with this level of virtual hardware. If you actually have high levels of traffic then you already know a micro instance is not for you.\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:20,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"I\\u2019m using an Amazon Linux x86 machine image (ami-31814f58) and the machine type is a \\u201Ct1.micro\\u201D instance ($0.02 per hour \\u2013 two cents an hour!). This is how Amazon describes a micro instance:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:22,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.ul,{children:[`\n`,(0,o.jsxDEV)(t.li,{children:\"613 MB memory\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.li,{children:\"Up to 2 EC2 Compute Units (for short periodic bursts)\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.li,{children:\"EBS storage only\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.li,{children:\"32-bit or 64-bit platform\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.li,{children:\"I/O Performance: Low\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.li,{children:\"API name: t1.micro\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:29,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"I am using a 32 bit instance. I installed MySQL and compiled Node.js and then installed my web application \\u2013 that\\u2019s it. Took me about an hour because I also installed phpMyAdmin and I hadn\\u2019t done it in a while.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"Some notes before we start testing \\u2013 my Node.js application uses the Express framework and in the docs I noticed something interesting:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:[\"To alter the environment we can set the NODE_ENV environment variable, for example: \",(0,o.jsxDEV)(t.code,{children:\"$ NODE_ENV=production node app.js\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:35,columnNumber:85},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"This is very important, as many caching mechanisms are only enabled when in production.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"So I set environment to production and we are ready to start testing. I am also using blitz.io and therefore had to do some housekeeping setting my application to serve their API key (clever since it prevents you from using blitz.io as a DoS tool). Once all that was done I was ready to run my first load test. I wasn\\u2019t really sure what to expect.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.h3,{id:\"lets-run-a-blitzio-rush-to-see-how-were-doing\",children:\"Let\\u2019s run a blitz.io \\u201Crush\\u201D to see how we\\u2019re doing\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:(0,o.jsxDEV)(t.a,{href:\"http://www.wanderingcio.com/wp-content/uploads/2012/04/15-1.png\",children:(0,o.jsxDEV)(t.img,{src:\"http://www.wanderingcio.com/wp-content/uploads/2012/04/15-1-300x140.png\",alt:\"Hit Rate\",title:\"15-1\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:43,columnNumber:2},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:43,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:43,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:(0,o.jsxDEV)(t.em,{children:\"(click the image to see a full size version)\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:45,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:45,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:[\"Note that blitz.io ramps up from 0 to 250 users, and our peak response rate was 238 hits per second as you can see above. This peak rate translates into \",(0,o.jsxDEV)(t.strong,{children:\"20,563,200 hits per day\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:47,columnNumber:154},this),\"!\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:47,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"Throughout the test our response rates looked pretty stable and averaged 13ms for the duration of the test:\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:49,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:(0,o.jsxDEV)(t.a,{href:\"http://www.wanderingcio.com/wp-content/uploads/2012/04/15-2.png\",children:(0,o.jsxDEV)(t.img,{src:\"http://www.wanderingcio.com/wp-content/uploads/2012/04/15-2-300x139.png\",alt:\"Response Times\",title:\"15-2\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:51,columnNumber:2},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:51,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:51,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:(0,o.jsxDEV)(t.em,{children:\"(click the image to see a full size version)\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:53,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:53,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:[\"Interestingly blitz.io calculates your \",(0,o.jsxDEV)(t.em,{children:\"average\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:55,columnNumber:40},this),\" hit rate during the test and uses that to estimate hits per day rather than your peak rate. I\\u2019m not sure why they do it that way. Here is their summary:\"]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:55,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:(0,o.jsxDEV)(t.a,{href:\"http://www.wanderingcio.com/wp-content/uploads/2012/04/15-3.png\",children:(0,o.jsxDEV)(t.img,{src:\"http://www.wanderingcio.com/wp-content/uploads/2012/04/15-3-300x44.png\",alt:\"Summary\",title:\"15-3\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:57,columnNumber:2},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:57,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:57,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:(0,o.jsxDEV)(t.em,{children:\"(click the image to see a full size version)\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:59,columnNumber:1},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:59,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:\"So what did we learn here? That Node.js on an Amazon micro instance can run really well? Well yes I suppose, and this bodes well for true scalability to larger machines and to machine clusters in the future. But the real meat here is the confluence of several trends: ever more efficient web delivery (Nginx, Node.js, Varnish, etc.) , the move away from serving pages to serving data, and finally cloud infrastructure, means it is exceptionally easy to build highly scalable web sites for a very very small investment compared to several years ago.\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:61,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.p,{children:'This has profound implications for \"corporate IT\"!'},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:63,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.h3,{id:\"references\",children:\"References\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:65,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.ul,{children:[`\n`,(0,o.jsxDEV)(t.li,{children:(0,o.jsxDEV)(t.a,{href:\"http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server\",children:\"http://www.ewanleith.com/blog/900/10-million-hits-a-day-with-wordpress-using-a-15-server\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:67,columnNumber:3},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:67,columnNumber:1},this),`\n`,(0,o.jsxDEV)(t.li,{children:(0,o.jsxDEV)(t.a,{href:\"http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/\",children:\"http://gregsramblings.com/2011/02/07/amazon-ec2-micro-instance-cpu-steal/\"},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:68,columnNumber:3},this)},void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:68,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:67,columnNumber:1},this)]},void 0,!0,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\",lineNumber:1,columnNumber:1},this)}function gn(d={}){let{wrapper:t}=d.components||{};return t?(0,o.jsxDEV)(t,Object.assign({},d,{children:(0,o.jsxDEV)(Re,d,void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\"},this)}),void 0,!1,{fileName:\"/Volumes/T7/Code/blog-next-13/content/posts/_mdx_bundler_entry_point-124b7297-d738-4d69-8f15-9eb6ca043805.mdx\"},this):Re(d)}var vn=gn;return hn(xn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
  },
  "_id": "posts/2012-04-30-20-million-hits-per-day.mdx",
  "_raw": {
    "sourceFilePath": "posts/2012-04-30-20-million-hits-per-day.mdx",
    "sourceFileName": "2012-04-30-20-million-hits-per-day.mdx",
    "sourceFileDir": "posts",
    "contentType": "mdx",
    "flattenedPath": "posts/2012-04-30-20-million-hits-per-day"
  },
  "type": "Post",
  "slug": "/posts/2012-04-30-20-million-hits-per-day",
  "slugAsParams": "2012-04-30-20-million-hits-per-day",
  "stats": {
    "text": "4 min read",
    "minutes": 3.05,
    "time": 183000,
    "words": 610
  }
}